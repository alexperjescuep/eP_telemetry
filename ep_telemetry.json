[
    {
        "id": "5eb044a.67306bc",
        "type": "tab",
        "label": "Heartbeat",
        "disabled": false,
        "info": ""
    },
    {
        "id": "15a0d5c9.3b9b92",
        "type": "tab",
        "label": "Telemetry Data Streaming",
        "disabled": false,
        "info": ""
    },
    {
        "id": "24aabfeb.a5fbb8",
        "type": "tab",
        "label": "Sendinblue",
        "disabled": false,
        "info": ""
    },
    {
        "id": "81053105.60e14",
        "type": "tab",
        "label": "iAuditor",
        "disabled": false,
        "info": ""
    },
    {
        "id": "7a5c30af.ff5bc",
        "type": "tab",
        "label": "Automated emails",
        "disabled": false,
        "info": ""
    },
    {
        "id": "86053255.0ee62",
        "type": "tab",
        "label": "Example",
        "disabled": false,
        "info": ""
    },
    {
        "id": "7f949f4.debdf6",
        "type": "tab",
        "label": "Website Contact Form",
        "disabled": false,
        "info": ""
    },
    {
        "id": "812297d7.4a626",
        "type": "tab",
        "label": "ProspectSoft reporting",
        "disabled": false,
        "info": ""
    },
    {
        "id": "2adcf353.aeef9c",
        "type": "tab",
        "label": "Franke",
        "disabled": false,
        "info": ""
    },
    {
        "id": "db823d6a.3762f",
        "type": "subflow",
        "name": "Prospectsoft: Get Contact details ",
        "info": "",
        "category": "",
        "in": [
            {
                "x": -60,
                "y": 80,
                "wires": [
                    {
                        "id": "fecb4035.9d3958"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1300,
                "y": 80,
                "wires": [
                    {
                        "id": "587b6da8.c69b54",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "a9d41dbe.70411",
        "type": "subflow",
        "name": "iAuditor: Send email",
        "info": "",
        "category": "",
        "in": [],
        "out": [],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "d5875f98.4f265",
        "type": "subflow",
        "name": "iAuditor: Send email | Staging",
        "info": "",
        "category": "",
        "in": [],
        "out": [],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "b6f41f64.a726c",
        "type": "subflow",
        "name": "Subflow 1",
        "info": "",
        "in": [
            {
                "x": 40,
                "y": 120,
                "wires": [
                    {
                        "id": "22fc4e9a.40e8f2"
                    }
                ]
            }
        ],
        "out": []
    },
    {
        "id": "2e2912af.70f376",
        "type": "subflow",
        "name": "Subflow 2",
        "info": "",
        "in": [],
        "out": []
    },
    {
        "id": "2d331bcf.10f214",
        "type": "subflow",
        "name": "Subflow 3",
        "info": "",
        "in": [],
        "out": []
    },
    {
        "id": "5f5d909a.167008",
        "type": "subflow",
        "name": "Counter readings ",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 20,
                "y": 80,
                "wires": [
                    {
                        "id": "238eaf56.c09c48"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "color": "#1a73e8",
        "icon": "node-red-contrib-iot-in-gcp/bigquery.png"
    },
    {
        "id": "95b26777.8ffd9",
        "type": "subflow",
        "name": "Training record",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "99b0d2ca.166168"
                    },
                    {
                        "id": "b902b781.c6413"
                    },
                    {
                        "id": "69b6e385.1c8504"
                    },
                    {
                        "id": "d510e6c3.fbb4c8"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "8f4437ce.91766",
        "type": "subflow",
        "name": "Site survey",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "c8fdf3c3.a2bfe"
                    },
                    {
                        "id": "53c6fa4e.69a044"
                    },
                    {
                        "id": "a6c84aa2.a97f68"
                    },
                    {
                        "id": "45c0c0b5.52b2d8"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "a76d987b.d992d",
        "type": "amazon config",
        "z": "",
        "name": "AWS",
        "region": "eu-west-1",
        "proxyRequired": false,
        "proxy": ""
    },
    {
        "id": "e288eb3f.29a54",
        "type": "bigquery-config",
        "z": ""
    },
    {
        "id": "e0691b19.afee48",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "8acedcb.f54ab2",
        "type": "gauth",
        "z": ""
    },
    {
        "id": "746e2d73.12c1c4",
        "type": "config-log",
        "z": "",
        "logname": "Logs config",
        "logdir": "logs",
        "stamp": "utc",
        "stampFormat": "YYYY/MM/DD HH:mm:ss",
        "logstyle": "plain",
        "logrotate": false,
        "logcompress": false,
        "logrotatecount": "5",
        "logsize": "1000",
        "logtopic": false,
        "logsource": true
    },
    {
        "id": "fcf125a3.b69808",
        "type": "websocket-listener",
        "z": "",
        "path": "",
        "wholemsg": "false"
    },
    {
        "id": "c9ed9fa5.3181d",
        "type": "mqtt-broker",
        "z": "",
        "name": "",
        "broker": "192.168.1.167",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": false,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "36289bb4.875f8c",
        "type": "chronos-config",
        "z": "",
        "name": "Every 10 mins",
        "sunPositions": []
    },
    {
        "id": "23889661.c1e502",
        "type": "AWS SQS",
        "z": "15a0d5c9.3b9b92",
        "aws": "a76d987b.d992d",
        "operation": "ReceiveMessage",
        "QueueUrl": "https://sqs.eu-west-1.amazonaws.com/935852492816/Nayax-DEX",
        "Label": "",
        "AWSAccountIds": "",
        "Actions": "",
        "ReceiptHandle": "",
        "VisibilityTimeout": "",
        "Entries": "",
        "QueueName": "",
        "MessageBody": "",
        "Attributes": "",
        "Tags": "",
        "TagKeys": "",
        "name": "Receive SQS message",
        "x": 210,
        "y": 240,
        "wires": [
            [
                "346ed3a9.507cb4"
            ],
            []
        ]
    },
    {
        "id": "a7ab23e.25b12e",
        "type": "inject",
        "z": "15a0d5c9.3b9b92",
        "name": "Check SQS",
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 120,
        "wires": [
            [
                "f09d09e7.1580e"
            ]
        ]
    },
    {
        "id": "2f7a05d.72d887a",
        "type": "AWS SQS",
        "z": "15a0d5c9.3b9b92",
        "aws": "a76d987b.d992d",
        "operation": "DeleteMessage",
        "QueueUrl": "https://sqs.eu-west-1.amazonaws.com/935852492816/Nayax-DEX",
        "Label": "",
        "AWSAccountIds": "",
        "Actions": "",
        "ReceiptHandle": "",
        "VisibilityTimeout": "",
        "Entries": "",
        "QueueName": "",
        "MessageBody": "",
        "Attributes": "",
        "Tags": "",
        "TagKeys": "",
        "name": "Delete Message",
        "x": 960,
        "y": 60,
        "wires": [
            [],
            [
                "1e21880e.6a5cd8"
            ]
        ]
    },
    {
        "id": "1e21880e.6a5cd8",
        "type": "debug",
        "z": "15a0d5c9.3b9b92",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": true,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 380,
        "wires": []
    },
    {
        "id": "77ce4b39.6b57b4",
        "type": "function",
        "z": "15a0d5c9.3b9b92",
        "name": "Encode ReceiptHandle",
        "func": "var encReceiptHandle = encodeURIComponent(msg.payload.Messages[0].ReceiptHandle)\nmsg.ReceiptHandle = encReceiptHandle;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 750,
        "y": 60,
        "wires": [
            [
                "2f7a05d.72d887a"
            ]
        ]
    },
    {
        "id": "18170c1.8e490f4",
        "type": "function",
        "z": "15a0d5c9.3b9b92",
        "name": "Parse DEX",
        "func": "//ADMIN\n//first parse pass to isolate elements\nparsedJSON = JSON.parse(msg.payload.Body);\n//isolate receiveCount\nvar machineDate = msg.payload.Body.match(\n  /(?:MachineDate\":\")([0-9]{4})([0-9]{2})([0-9]{2}).([0-9]{2})([0-9]{2})([0-9]{2})/\n);\nvar HWSerial = msg.payload.Body.match(\n  /(?:HWSerial\":\")([0-9]*)/\n);\n\n//split DexData into PA1 objects\nvar dexLines = parsedJSON.DexData.toString().split(\"PA1\");\n//find PA1 object that contains CAPPUCCINO\nvar cappuccinoData = dexLines.filter((s) => s.includes(\"CAPPUCCINO\"));\n//find PA1 object that contains CAFFE LATTE\nvar caffeeLatteData = dexLines.filter((s) => s.includes(\"CAFFE LATTE\"));\n//find PA1 object that contains WHITE COFFEE\nvar whiteCoffeeData = dexLines.filter((s) => s.includes(\"WHITE COFFEE\"));\n//find PA1 object that contains AMERICANO\nvar americanoData = dexLines.filter((s) => s.includes(\"AMERICANO\"));\n//find PA1 object that contains FLAT WHITE\nvar flatWhiteData = dexLines.filter((s) => s.includes(\"FLAT WHITE\"));\n//find PA1 object that contains DOUBLE ESPRESSO\nvar doubleEspressoData = dexLines.filter((s) => s.includes(\"DOUBLE ESPRESSO\"));\n//find PA1 object that contains CAFFE MOCHA\nvar caffeeMochaData = dexLines.filter((s) => s.includes(\"CAFFE MOCHA\"));\n//find PA1 object that contains HOT CHOCOLATE\nvar hotChocolateData = dexLines.filter((s) => s.includes(\"HOT CHOCOLATE\"));\n//find PA1 object that contains BLACK TEA\nvar blackTeaData = dexLines.filter((s) => s.includes(\"BLACK TEA\"));\n//find PA1 object that contains WHITE TEA\nvar whiteTeaData = dexLines.filter((s) => s.includes(\"WHITE TEA\"));\nif (msg.payload.Body.includes(\"CARAMEL\")) {\n  //find PA1 object that contains CARAMEL\n  var caramelData = dexLines.filter((s) => s.includes(\"CARAMEL\"));\n}\nif (msg.payload.Body.includes(\"VANILLA\")) {\n  //find PA1 object that contains VANILLA\n  var vanillaData = dexLines.filter((s) => s.includes(\"VANILLA\"));\n}\nif (msg.payload.Body.includes(\"HAZELNUT\")) {\n  //find PA1 object that contains HAZELNUT\n  var hazelnutData = dexLines.filter((s) => s.includes(\"HAZELNUT\"));\n}\nif (msg.payload.Body.includes(\"TOMATO\")) {\n  //find PA1 object that contains TOMATO\n  var tomatoSoupData = dexLines.filter((s) => s.includes(\"TOMATO SOUP\"));\n}\nif (msg.payload.Body.includes(\"CUP TYPE 1\")) {\n  //find PA1 object that contains TOMATO\n  var cupTypeOneData = dexLines.filter((s) => s.includes(\"CUP TYPE 1\"));\n}\n\n//find PA4 and split cappuccinoSalesVal & cappuccinoTestVendVal\nvar cappuccinoSalesVal = cappuccinoData[0].match(/(PA4)\\*([0-9]*)/);\nvar cappuccinoTestVendVal = cappuccinoData[0].match(/(PA3)\\*([0-9]*)/);\n//find PA4 and split caffeeLatteSalesVal & caffeeLatteTestVendVal\nvar caffeeLatteSalesVal = caffeeLatteData[0].match(/(PA4)\\*([0-9]*)/);\nvar caffeeLatteTestVendVal = caffeeLatteData[0].match(/(PA3)\\*([0-9]*)/);\n//find PA4 and split whiteCoffeeSalesVal & whiteCoffeeTestVendVal\nvar whiteCoffeeSalesVal = whiteCoffeeData[0].match(/(PA4)\\*([0-9]*)/);\nvar whiteCoffeeTestVendVal = whiteCoffeeData[0].match(/(PA3)\\*([0-9]*)/);\n//find PA4 and split americanoSalesVal & americanoTestVendVal\nvar americanoSalesVal = americanoData[0].match(/(PA4)\\*([0-9]*)/);\nvar americanoTestVendVal = americanoData[0].match(/(PA3)\\*([0-9]*)/);\n//find PA4 and split flatWhiteSalesVal & flatWhiteTestVendVal\nvar flatWhiteSalesVal = flatWhiteData[0].match(/(PA4)\\*([0-9]*)/);\nvar flatWhiteTestVendVal = flatWhiteData[0].match(/(PA3)\\*([0-9]*)/);\n//find PA4 and split doubleEspressoSalesVal & doubleEspressoTestVendVal\nvar doubleEspressoSalesVal = doubleEspressoData[0].match(/(PA4)\\*([0-9]*)/);\nvar doubleEspressoTestVendVal = doubleEspressoData[0].match(/(PA3)\\*([0-9]*)/);\n//find PA4 and split caffeeMochaSalesVal & caffeeMochaTestVendVal\nvar caffeeMochaSalesVal = caffeeMochaData[0].match(/(PA4)\\*([0-9]*)/);\nvar caffeeMochaTestVendVal = caffeeMochaData[0].match(/(PA3)\\*([0-9]*)/);\n//find PA4 and split hotChocolateSalesVal & hotChocolateTestVendVal\nvar hotChocolateSalesVal = hotChocolateData[0].match(/(PA4)\\*([0-9]*)/);\nvar hotChocolateTestVendVal = hotChocolateData[0].match(/(PA3)\\*([0-9]*)/);\n//find PA4 and split blackTeaSalesVal & blackTeaTestVendVal\nvar blackTeaSalesVal = blackTeaData[0].match(/(PA4)\\*([0-9]*)/);\nvar blackTeaTestVendVal = blackTeaData[0].match(/(PA3)\\*([0-9]*)/);\n//find PA4 and split whiteTeaSalesVal & whiteTeaTestVendVal\nvar whiteTeaSalesVal = whiteTeaData[0].match(/(PA4)\\*([0-9]*)/);\nvar whiteTeaTestVendVal = whiteTeaData[0].match(/(PA3)\\*([0-9]*)/);\nif (typeof caramelData !== 'undefined') {\n  //find PA4 and split caramelSalesVal & caramelTestVendVal\n  var caramelSalesVal = caramelData[0].match(/(PA4)\\*([0-9]*)/);\n  var caramelTestVendVal = caramelData[0].match(/(PA3)\\*([0-9]*)/);\n}\nif (typeof vanillaData !== 'undefined') {\n  //find PA4 and split vanillaSalesVal & vanillaTestVendVal\n  var vanillaSalesVal = vanillaData[0].match(/(PA4)\\*([0-9]*)/);\n  var vanillaTestVendVal = vanillaData[0].match(/(PA3)\\*([0-9]*)/);\n}\nif (typeof hazelnutData !== 'undefined') {\n  //find PA4 and split hazelnutSalesVal & hazelnutTestVendVal\n  var hazelnutSalesVal = hazelnutData[0].match(/(PA4)\\*([0-9]*)/);\n  var hazelnutTestVendVal = hazelnutData[0].match(/(PA3)\\*([0-9]*)/);\n}\nif (typeof tomatoSoupData !== 'undefined') {\n  //find PA4 and split tomatoSoupSalesVal & tomatoSoupTestVendVal\n  var tomatoSoupSalesVal = tomatoSoupData[0].match(/(PA4)\\*([0-9]*)/);\n  var tomatoSoupTestVendVal = tomatoSoupData[0].match(/(PA3)\\*([0-9]*)/);\n}\nif (typeof cupTypeOneData !== 'undefined') {\n  //find PA4 and split tomatoSoupSalesVal & tomatoSoupTestVendVal\n  var cupTypeOneSalesVal = cupTypeOneData[0].match(/(PA4)\\*([0-9]*)/);\n  var cupTypeOneTestVendVal = cupTypeOneData[0].match(/(PA3)\\*([0-9]*)/);\n}\n\n//include SalesVal and TestVendVal in msg.payload\nmsg.payload.machineDate = machineDate[1] + '-' + machineDate[2] + '-' + machineDate[3] + 'T' + machineDate[4] + ':' + machineDate[5] + ':' + machineDate[6];\n//msg.payload.machineTime = machineDate[2];\nmsg.payload.HWSerial = HWSerial[1];\nmsg.payload.cappuccinoSales = cappuccinoSalesVal[2];\nmsg.payload.cappuccinoTestVend = cappuccinoTestVendVal[2];\nmsg.payload.caffeeLatteSales = caffeeLatteSalesVal[2];\nmsg.payload.caffeeLatteTestVend = caffeeLatteTestVendVal[2];\nmsg.payload.whiteCoffeeSales = whiteCoffeeSalesVal[2];\nmsg.payload.whiteCoffeeTestVend = whiteCoffeeTestVendVal[2];\nmsg.payload.americanoSales = americanoSalesVal[2];\nmsg.payload.americanoTestVend = americanoTestVendVal[2];\nmsg.payload.flatWhiteSales = flatWhiteSalesVal[2];\nmsg.payload.flatWhiteTestVend = flatWhiteTestVendVal[2];\nmsg.payload.doubleEspressoSales = doubleEspressoSalesVal[2];\nmsg.payload.doubleEspressoTestVend = doubleEspressoTestVendVal[2];\nmsg.payload.caffeeMochaSales = caffeeMochaSalesVal[2];\nmsg.payload.caffeeMochaTestVend = caffeeMochaTestVendVal[2];\nmsg.payload.hotChocolateSales = hotChocolateSalesVal[2];\nmsg.payload.hotChocolateTestVend = hotChocolateTestVendVal[2];\nmsg.payload.blackTeaSales = blackTeaSalesVal[2];\nmsg.payload.blackTeaTestVend = blackTeaTestVendVal[2];\nmsg.payload.whiteTeaSales = whiteTeaSalesVal[2];\nmsg.payload.whiteTeaTestVend = whiteTeaTestVendVal[2];\nif (typeof vanillaData !== 'undefined') {\n  msg.payload.vanillaSales = vanillaSalesVal[2];\n  msg.payload.vanillaTestVend = vanillaTestVendVal[2];\n}\nif (typeof caramelData !== 'undefined') {\n  msg.payload.caramelSales = caramelSalesVal[2];\n  msg.payload.caramelTestVend = caramelTestVendVal[2];\n}\nif (typeof hazelnutData !== 'undefined') {\n  msg.payload.hazelnutSales = hazelnutSalesVal[2];\n  msg.payload.hazelnutTestVend = hazelnutTestVendVal[2];\n}\nif (typeof tomatoSoupData !== 'undefined') {\n  msg.payload.tomatoSoupSales = tomatoSoupSalesVal[2];\n  msg.payload.tomatoSoupTestVend = tomatoSoupTestVendVal[2];\n}\nif (typeof cupTypeOneData !== 'undefined') {\n  msg.payload.cupTypeOneSalesVal = cupTypeOneSalesVal[2];\n  msg.payload.cupTypeOneTestVend = cupTypeOneTestVendVal[2];\n}\n\n// debug data\n//    msg.parsedJSON = parsedJSON;\n// msg.lines = dexLines;\n// msg.cappuccinoData = cappuccinoData;\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 530,
        "y": 180,
        "wires": [
            [
                "e4e1c7ad.9a724"
            ]
        ]
    },
    {
        "id": "fe48ac50.d9ed58",
        "type": "bigquery insert",
        "z": "15a0d5c9.3b9b92",
        "bigquery": "e288eb3f.29a54",
        "dataset": "Nayax_Data",
        "table": "SalesAndTestVends",
        "name": "Write Data in BigQuery",
        "x": 1020,
        "y": 300,
        "wires": []
    },
    {
        "id": "a6c9e422.6aaea",
        "type": "change",
        "z": "15a0d5c9.3b9b92",
        "name": "Change payload",
        "rules": [
            {
                "t": "delete",
                "p": "payload.Body",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.ReceiptHandle",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.MD5OfBody",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.Attributes",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 300,
        "wires": [
            [
                "fe48ac50.d9ed58",
                "1e21880e.6a5cd8"
            ]
        ]
    },
    {
        "id": "f09d09e7.1580e",
        "type": "function",
        "z": "15a0d5c9.3b9b92",
        "name": "Set SQS Query Attributes",
        "func": "msg.MaxNumberOfMessages = '10'\nmsg.AttributeNames = ['ApproximateReceiveCount']\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 210,
        "y": 180,
        "wires": [
            [
                "23889661.c1e502"
            ]
        ],
        "inputLabels": [
            "Input"
        ],
        "icon": "node-red-dashboard/ui_numeric.png"
    },
    {
        "id": "346ed3a9.507cb4",
        "type": "bigsplitter",
        "z": "15a0d5c9.3b9b92",
        "name": "Split payload.Messages array",
        "property": "payload.Messages",
        "x": 230,
        "y": 300,
        "wires": [
            [
                "662a9a55.280364",
                "18170c1.8e490f4"
            ],
            []
        ]
    },
    {
        "id": "e4e1c7ad.9a724",
        "type": "switch",
        "z": "15a0d5c9.3b9b92",
        "name": "Check ApproximateReceiveCount",
        "property": "payload.Attributes.ApproximateReceiveCount",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "2",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 780,
        "y": 180,
        "wires": [
            [
                "a6c9e422.6aaea"
            ]
        ]
    },
    {
        "id": "f0603a6c.8d23e8",
        "type": "http in",
        "z": "7f949f4.debdf6",
        "name": "Receive contact form",
        "url": "/contact_form",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 240,
        "wires": [
            [
                "fd5122c6.487b78",
                "1afcf994.1fa71e",
                "8393c236.520e28"
            ]
        ]
    },
    {
        "id": "9a3de1b4.705f78",
        "type": "debug",
        "z": "7f949f4.debdf6",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": true,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 1040,
        "y": 240,
        "wires": []
    },
    {
        "id": "56d2626e.a70a8c",
        "type": "GSheet",
        "z": "7f949f4.debdf6",
        "creds": "8acedcb.f54ab2",
        "method": "append",
        "action": "",
        "sheet": "1_LxYh5puWtTfyfFmLd7wQh47vg1z4L9tw5VqmQhEkTU",
        "cells": "FormSubmissions!A2",
        "name": "Add row",
        "x": 820,
        "y": 180,
        "wires": [
            [
                "9a3de1b4.705f78"
            ]
        ]
    },
    {
        "id": "8393c236.520e28",
        "type": "change",
        "z": "7f949f4.debdf6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.[costcutterAccountNumber, storeName, storeAddress, storePostcode, storeContactName, storeContactNumber, bdmName, bdmEmail, branding, floorstandingQuantity, tabletopQuantity, solutionType, solutionQuantity, shippingChargesAcknowledge]",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 180,
        "wires": [
            [
                "56d2626e.a70a8c"
            ]
        ]
    },
    {
        "id": "fd5122c6.487b78",
        "type": "http response",
        "z": "7f949f4.debdf6",
        "name": "Send http response",
        "statusCode": "200",
        "headers": {},
        "x": 430,
        "y": 300,
        "wires": []
    },
    {
        "id": "ad745ac7.371798",
        "type": "http request",
        "z": "7f949f4.debdf6",
        "name": "POST to Excel",
        "method": "POST",
        "ret": "txt",
        "paytoqs": false,
        "url": "https://prod-08.uksouth.logic.azure.com:443/workflows/f844dc78c2af462cbae56f1722c2cf04/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=KlVJp9P7LNzH3tkw2Vmzot7P4-LnNHyr_3B4iioBApk",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 800,
        "y": 240,
        "wires": [
            [
                "9a3de1b4.705f78"
            ]
        ]
    },
    {
        "id": "1afcf994.1fa71e",
        "type": "simpletime",
        "z": "7f949f4.debdf6",
        "name": "",
        "x": 410,
        "y": 240,
        "wires": [
            [
                "cf6c5a6.742c3a8"
            ]
        ]
    },
    {
        "id": "cf6c5a6.742c3a8",
        "type": "function",
        "z": "7f949f4.debdf6",
        "name": "Add time to Payload",
        "func": "var rawTime = msg.myrawdate;\n\nmsg.payload.rawTime = rawTime;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 600,
        "y": 240,
        "wires": [
            [
                "ad745ac7.371798"
            ]
        ]
    },
    {
        "id": "ce0c78cf.c533a8",
        "type": "inject",
        "z": "812297d7.4a626",
        "name": "Check number of leads",
        "repeat": "3600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 120,
        "wires": [
            [
                "5ed37ee.a3b688"
            ]
        ]
    },
    {
        "id": "6421adcb.0955c4",
        "type": "http request",
        "z": "812297d7.4a626",
        "name": "Get Total Leads",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "https://api-v1.prospect365.com/Leads/$count?$filter=contains(Description, 'sanitiser')",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 580,
        "y": 120,
        "wires": [
            [
                "487d1d1b.8aac24"
            ]
        ]
    },
    {
        "id": "545322c5.f9f2c4",
        "type": "debug",
        "z": "812297d7.4a626",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1210,
        "y": 120,
        "wires": []
    },
    {
        "id": "487d1d1b.8aac24",
        "type": "GSheet",
        "z": "812297d7.4a626",
        "creds": "8acedcb.f54ab2",
        "method": "update",
        "action": "",
        "sheet": "1un-cRNKri9mc5K32EdyrPmrILUekxj1sIqZXFW79GDE",
        "cells": "Sheet1!B2",
        "name": "Add Total leads",
        "x": 840,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "ca8d72a1.abc65",
        "type": "GSheet",
        "z": "812297d7.4a626",
        "creds": "8acedcb.f54ab2",
        "method": "update",
        "action": "",
        "sheet": "1un-cRNKri9mc5K32EdyrPmrILUekxj1sIqZXFW79GDE",
        "cells": "Sheet1!C2",
        "name": "Add Web leads",
        "x": 850,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "66d9c603.0ee2d8",
        "type": "http request",
        "z": "812297d7.4a626",
        "name": "Get Web Leads",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "https://api-v1.prospect365.com/Leads/$count?&$filter=contains(SourceId, 'WEB') and contains(Description, 'sanitiser')",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 580,
        "y": 180,
        "wires": [
            [
                "ca8d72a1.abc65"
            ]
        ]
    },
    {
        "id": "5ed37ee.a3b688",
        "type": "function",
        "z": "812297d7.4a626",
        "name": "Set Bearer Token",
        "func": "msg.headers = {\n    Authorization: \"Bearer \"+\"a187f0827402b6e7be3da3bbb7835d71\"\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 370,
        "y": 120,
        "wires": [
            [
                "66d9c603.0ee2d8",
                "6421adcb.0955c4",
                "4d689715.a814c8",
                "8efbab7.8121bd8"
            ]
        ]
    },
    {
        "id": "317bf520.89ce9a",
        "type": "GSheet",
        "z": "812297d7.4a626",
        "creds": "8acedcb.f54ab2",
        "method": "update",
        "action": "",
        "sheet": "1un-cRNKri9mc5K32EdyrPmrILUekxj1sIqZXFW79GDE",
        "cells": "Sheet1!D2",
        "name": "Add Newsletter leads",
        "x": 870,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "4d689715.a814c8",
        "type": "http request",
        "z": "812297d7.4a626",
        "name": "Get Newsletter Leads",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "https://api-v1.prospect365.com/Leads/$count?&$filter=contains(SourceId, 'E-SHOT') and contains(Description, 'sanitiser')",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 600,
        "y": 240,
        "wires": [
            [
                "317bf520.89ce9a"
            ]
        ]
    },
    {
        "id": "4a75f887.2633b8",
        "type": "GSheet",
        "z": "812297d7.4a626",
        "creds": "8acedcb.f54ab2",
        "method": "update",
        "action": "",
        "sheet": "1un-cRNKri9mc5K32EdyrPmrILUekxj1sIqZXFW79GDE",
        "cells": "Sheet1!E2",
        "name": "Add Direct Email leads",
        "x": 870,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "8efbab7.8121bd8",
        "type": "http request",
        "z": "812297d7.4a626",
        "name": "Get Newsletter Leads",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "https://api-v1.prospect365.com/Leads/$count?&$filter=contains(SourceId, '8ac76c') and contains(Description, 'sanitiser')",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 600,
        "y": 300,
        "wires": [
            [
                "4a75f887.2633b8"
            ]
        ]
    },
    {
        "id": "d3932164.25316",
        "type": "bigquery insert",
        "z": "15a0d5c9.3b9b92",
        "bigquery": "e288eb3f.29a54",
        "dataset": "Critica_Data",
        "table": "Sales",
        "name": "Write Critica to BigQuery",
        "x": 1230,
        "y": 540,
        "wires": []
    },
    {
        "id": "400fe382.8249a4",
        "type": "change",
        "z": "15a0d5c9.3b9b92",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "time",
                "pt": "msg",
                "to": "$now()",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 170,
        "y": 540,
        "wires": [
            [
                "927b56f.166ba28"
            ]
        ]
    },
    {
        "id": "c8f2f40e.6c8f",
        "type": "inject",
        "z": "15a0d5c9.3b9b92",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 480,
        "wires": [
            [
                "400fe382.8249a4"
            ]
        ]
    },
    {
        "id": "927b56f.166ba28",
        "type": "moment",
        "z": "15a0d5c9.3b9b92",
        "name": "",
        "topic": "",
        "input": "time",
        "inputType": "msg",
        "inTz": "Europe/London",
        "adjAmount": "1",
        "adjType": "hours",
        "adjDir": "add",
        "format": "YYYY-MM-DDTHH:mm:ss",
        "locale": "en_US",
        "output": "real_timezone",
        "outputType": "msg",
        "outTz": "Europe/London",
        "x": 420,
        "y": 480,
        "wires": [
            [
                "d56f6434.5abe78"
            ]
        ]
    },
    {
        "id": "ea3033fc.83a9f8",
        "type": "function",
        "z": "15a0d5c9.3b9b92",
        "name": "Set rejectUnauthorized",
        "func": "msg.rejectUnauthorized = false; \n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 700,
        "y": 480,
        "wires": [
            [
                "ba34566c.37a9"
            ]
        ]
    },
    {
        "id": "ba34566c.37a9",
        "type": "http request",
        "z": "15a0d5c9.3b9b92",
        "name": "Get Yesterday's sale from Critica",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "https://critica.promate.com/odata/ODataFilters/{{{real_timezone_minus10mins}}}_{{{real_timezone}}}?$orderby=TxTime",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "basic",
        "x": 740,
        "y": 540,
        "wires": [
            [
                "894bc035.4b7e",
                "21549cd4.5792a4"
            ]
        ],
        "info": "https://critica.promate.com/odata/ODataFilters/{{{real_timezone_minus10mins}}}_{{{real_timezone}}}?$orderby=TxTime"
    },
    {
        "id": "d56f6434.5abe78",
        "type": "moment",
        "z": "15a0d5c9.3b9b92",
        "name": "",
        "topic": "",
        "input": "real_timezone",
        "inputType": "msg",
        "inTz": "Europe/London",
        "adjAmount": "10",
        "adjType": "minutes",
        "adjDir": "subtract",
        "format": "YYYY-MM-DDTHH:mm:ss",
        "locale": "en_US",
        "output": "real_timezone_minus10mins",
        "outputType": "msg",
        "outTz": "Europe/London",
        "x": 420,
        "y": 540,
        "wires": [
            [
                "ea3033fc.83a9f8"
            ]
        ]
    },
    {
        "id": "894bc035.4b7e",
        "type": "bigsplitter",
        "z": "15a0d5c9.3b9b92",
        "name": "Split Array",
        "property": "payload.value",
        "x": 990,
        "y": 540,
        "wires": [
            [
                "a276539f.973778",
                "d3932164.25316"
            ],
            []
        ]
    },
    {
        "id": "7ff373af.627c2c",
        "type": "AWS SQS",
        "z": "15a0d5c9.3b9b92",
        "aws": "a76d987b.d992d",
        "operation": "SendMessage",
        "QueueUrl": "https://sqs.eu-west-1.amazonaws.com/935852492816/Nayax-DEX-backup",
        "Label": "",
        "AWSAccountIds": "",
        "Actions": "",
        "ReceiptHandle": "",
        "VisibilityTimeout": "",
        "Entries": "",
        "QueueName": "",
        "MessageBody": "",
        "Attributes": "",
        "Tags": "",
        "TagKeys": "",
        "name": "Backup message",
        "x": 870,
        "y": 120,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "662a9a55.280364",
        "type": "function",
        "z": "15a0d5c9.3b9b92",
        "name": "Generate Back-up messages",
        "func": "msg.MessageBody=msg.payload.Body;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 120,
        "wires": [
            [
                "7ff373af.627c2c"
            ]
        ]
    },
    {
        "id": "56d93b70.c03fe4",
        "type": "delay",
        "z": "15a0d5c9.3b9b92",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 530,
        "y": 60,
        "wires": [
            [
                "77ce4b39.6b57b4"
            ]
        ]
    },
    {
        "id": "f5a61760.2178",
        "type": "comment",
        "z": "15a0d5c9.3b9b92",
        "name": "Critica",
        "info": "",
        "x": 130,
        "y": 420,
        "wires": []
    },
    {
        "id": "5eec15d5.84cfbc",
        "type": "comment",
        "z": "15a0d5c9.3b9b92",
        "name": "Nayax",
        "info": "",
        "x": 140,
        "y": 60,
        "wires": []
    },
    {
        "id": "b5427a8.4ebd888",
        "type": "http in",
        "z": "24aabfeb.a5fbb8",
        "name": "Receive Sendinblue unsubscribes",
        "url": "/unsubscribe",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 60,
        "wires": [
            [
                "999e7ad5.7e3618",
                "8db2d7d.b345aa8",
                "99e65973.593d3"
            ]
        ]
    },
    {
        "id": "999e7ad5.7e3618",
        "type": "http response",
        "z": "24aabfeb.a5fbb8",
        "name": "Send http response",
        "statusCode": "200",
        "headers": {},
        "x": 140,
        "y": 120,
        "wires": []
    },
    {
        "id": "8db2d7d.b345aa8",
        "type": "debug",
        "z": "24aabfeb.a5fbb8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1250,
        "y": 400,
        "wires": []
    },
    {
        "id": "afc47201.1a4e",
        "type": "http request",
        "z": "24aabfeb.a5fbb8",
        "name": "Find Contact in Prospectsoft",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "https://api-batch-v1.prospect365.com/Contacts?&$filter=email eq '{{{payload}}}'&$select=ContactId",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "bearer",
        "x": 560,
        "y": 220,
        "wires": [
            [
                "a2ef9556.5d06b8",
                "8db2d7d.b345aa8"
            ]
        ]
    },
    {
        "id": "2eb8fb87.fce404",
        "type": "http request",
        "z": "24aabfeb.a5fbb8",
        "name": "Change flag in Prospectsoft",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "bearer",
        "x": 1060,
        "y": 220,
        "wires": [
            [
                "8db2d7d.b345aa8"
            ]
        ]
    },
    {
        "id": "d63b205c.c31468",
        "type": "flogger",
        "z": "15a0d5c9.3b9b92",
        "name": "Logger",
        "logfile": "Nayax-SQS.log",
        "inputchoice": "fullmsg",
        "inputobject": "payload",
        "inputobjectType": "msg",
        "inputmoustache": "Recieved payload {{payload}} and topic {{topic}}",
        "loglevel": "INFO",
        "logconfig": "746e2d73.12c1c4",
        "sendpane": true,
        "x": 1160,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "399e7340.952dac",
        "type": "flogger",
        "z": "15a0d5c9.3b9b92",
        "name": "Critica Logger",
        "logfile": "Critica.log",
        "inputchoice": "fullmsg",
        "inputobject": "payload",
        "inputobjectType": "msg",
        "inputmoustache": "Recieved payload {{payload}} and topic {{topic}}",
        "loglevel": "INFO",
        "logconfig": "746e2d73.12c1c4",
        "sendpane": true,
        "x": 1200,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "99e65973.593d3",
        "type": "change",
        "z": "24aabfeb.a5fbb8",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.email",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 220,
        "wires": [
            [
                "afc47201.1a4e"
            ]
        ]
    },
    {
        "id": "a2ef9556.5d06b8",
        "type": "function",
        "z": "24aabfeb.a5fbb8",
        "name": "Build http request",
        "func": "msg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.url = \"https://api-batch-v1.prospect365.com/ContactXtras(\" + msg.payload.value[0].ContactId + \")\";\nmsg.method = \"PATCH\";\nmsg.payload = '{ \"EPEmailFlag\": 0 }';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 810,
        "y": 220,
        "wires": [
            [
                "2eb8fb87.fce404"
            ]
        ]
    },
    {
        "id": "e43b1949.e22938",
        "type": "http response",
        "z": "24aabfeb.a5fbb8",
        "name": "Send http response",
        "statusCode": "200",
        "headers": {},
        "x": 480,
        "y": 300,
        "wires": []
    },
    {
        "id": "93f09f59.ec147",
        "type": "http in",
        "z": "24aabfeb.a5fbb8",
        "name": "Receive Sendinblue new contacts",
        "url": "/ps_contactxtra_update",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 300,
        "wires": [
            [
                "e43b1949.e22938"
            ]
        ]
    },
    {
        "id": "9e5ca125.9314c8",
        "type": "http in",
        "z": "5eb044a.67306bc",
        "name": "Heartbeat API monitoring",
        "url": "/heartbeat",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 310,
        "y": 160,
        "wires": [
            [
                "a01be39c.33a4e"
            ]
        ]
    },
    {
        "id": "a01be39c.33a4e",
        "type": "http response",
        "z": "5eb044a.67306bc",
        "name": "Send http response",
        "statusCode": "200",
        "headers": {},
        "x": 610,
        "y": 160,
        "wires": []
    },
    {
        "id": "8c6abfcd.570ea8",
        "type": "http in",
        "z": "24aabfeb.a5fbb8",
        "name": "Receive ProspectSoft ContactXtra updates",
        "url": "/ps_contactxtra_update",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 220,
        "y": 460,
        "wires": [
            [
                "9798be11.c642",
                "e1e9087f.4eb04",
                "8db2d7d.b345aa8"
            ]
        ]
    },
    {
        "id": "9798be11.c642",
        "type": "http response",
        "z": "24aabfeb.a5fbb8",
        "name": "Send http response",
        "statusCode": "200",
        "headers": {},
        "x": 160,
        "y": 400,
        "wires": []
    },
    {
        "id": "e1e9087f.4eb04",
        "type": "switch",
        "z": "24aabfeb.a5fbb8",
        "name": "Check if EPEmailFlag has updates",
        "property": "payload.updatedFields",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "EPEmailFlag",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 200,
        "y": 520,
        "wires": [
            [
                "1df8350e.8be893"
            ]
        ]
    },
    {
        "id": "1df8350e.8be893",
        "type": "switch",
        "z": "24aabfeb.a5fbb8",
        "name": "Check flag status",
        "property": "payload.updatedEntity.epEmailFlag",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 470,
        "y": 520,
        "wires": [
            [
                "e27c1ec3.9b2f2"
            ],
            [
                "82ac1677.fb98b8"
            ]
        ],
        "info": "Check the new flag status"
    },
    {
        "id": "33011f4c.d3444",
        "type": "function",
        "z": "24aabfeb.a5fbb8",
        "name": "Build http request",
        "func": "msg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"api-key\"] = \"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\";\nmsg.url = \"https://api.sendinblue.com/v3/contacts/\"+msg.payload.email+\"\";\nmsg.method = \"PUT\";\nmsg.payload = '{\"emailBlacklisted\": false}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 970,
        "y": 480,
        "wires": [
            [
                "53be66b7.39eb2"
            ]
        ]
    },
    {
        "id": "53be66b7.39eb2",
        "type": "http request",
        "z": "24aabfeb.a5fbb8",
        "name": "Change flag in Sendinblue",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "bearer",
        "x": 1220,
        "y": 520,
        "wires": [
            [
                "8db2d7d.b345aa8"
            ]
        ]
    },
    {
        "id": "bd5180e1.ca4e2",
        "type": "http request",
        "z": "db823d6a.3762f",
        "name": "Find Contact in Prospectsoft",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 700,
        "y": 80,
        "wires": [
            [
                "e334f6ac.0af0e8"
            ]
        ]
    },
    {
        "id": "fecb4035.9d3958",
        "type": "change",
        "z": "db823d6a.3762f",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.updatedEntity.contactId",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 80,
        "wires": [
            [
                "786c217.c52a7e"
            ]
        ]
    },
    {
        "id": "786c217.c52a7e",
        "type": "function",
        "z": "db823d6a.3762f",
        "name": "Build http request",
        "func": "msg.headers = {\n      Authorization: \"Bearer a187f0827402b6e7be3da3bbb7835d71\"\n};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.url = \"https://api-batch-v1.prospect365.com/Contacts(\"+ msg.payload +\")?$expand=Division($select=Name)\";\nmsg.method = \"GET\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 80,
        "wires": [
            [
                "bd5180e1.ca4e2"
            ]
        ]
    },
    {
        "id": "e334f6ac.0af0e8",
        "type": "function",
        "z": "db823d6a.3762f",
        "name": "Encode Email",
        "func": "var encEmail = encodeURIComponent(msg.payload.value[0].Email)\nmsg.payload.email = encEmail;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 940,
        "y": 80,
        "wires": [
            [
                "587b6da8.c69b54"
            ]
        ]
    },
    {
        "id": "56dd6377.0ba17c",
        "type": "function",
        "z": "24aabfeb.a5fbb8",
        "name": "Build http request",
        "func": "msg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"api-key\"] = \"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\";\nmsg.url = \"https://api.sendinblue.com/v3/contacts/\"+ msg.payload.email +\"\";\nmsg.method = \"PUT\";\nmsg.payload = '{\"emailBlacklisted\": true}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 970,
        "y": 560,
        "wires": [
            [
                "53be66b7.39eb2"
            ]
        ]
    },
    {
        "id": "e27c1ec3.9b2f2",
        "type": "subflow:db823d6a.3762f",
        "z": "24aabfeb.a5fbb8",
        "name": "Find contact in ProspectSoft",
        "env": [],
        "x": 720,
        "y": 480,
        "wires": [
            [
                "33011f4c.d3444"
            ]
        ]
    },
    {
        "id": "82ac1677.fb98b8",
        "type": "subflow:db823d6a.3762f",
        "z": "24aabfeb.a5fbb8",
        "name": "Find contact in ProspectSoft",
        "env": [],
        "x": 720,
        "y": 560,
        "wires": [
            [
                "56dd6377.0ba17c"
            ]
        ]
    },
    {
        "id": "3b451848.8989c",
        "type": "http response",
        "z": "d5875f98.4f265",
        "name": "Send http response",
        "statusCode": "200",
        "headers": {},
        "x": 210,
        "y": 140,
        "wires": []
    },
    {
        "id": "1278ac9f.bc408b",
        "type": "http in",
        "z": "d5875f98.4f265",
        "name": "Receive New Visit Report",
        "url": "/new_visit_report",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 230,
        "y": 80,
        "wires": [
            [
                "3b451848.8989c",
                "7bb1fffd.a8a958",
                "e2447185.d677e"
            ]
        ]
    },
    {
        "id": "7bb1fffd.a8a958",
        "type": "debug",
        "z": "d5875f98.4f265",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 990,
        "y": 100,
        "wires": []
    },
    {
        "id": "f906922a.bf1c28",
        "type": "function",
        "z": "d5875f98.4f265",
        "name": "Build http request",
        "func": "var reportAddress = flow.get([\"reportURL\"]);\nvar machineType = flow.get([\"machineType\"]);\nvar machineCleanliness = flow.get([\"machineCleanliness\"]);\nvar posCondition = flow.get([\"posCondition\"]);\nvar signoffSheets = flow.get([\"signoffSheets\"])\nvar trainingRequired = flow.get([\"trainingRequired\"]);\nvar operatingManual = flow.get([\"operatingManual\"]);\nvar author = flow.get(['author']);\nvar site = flow.get(['site']);\nvar reportWebLink = flow.get(['reportWebLink']);\nvar visitScore = flow.get(['visitScore']);\nvar serialNo = flow.get(['serialNo']);\nvar date_completed = flow.get(['date_completed']);\nvar feedback = flow.get(['feedback']);\nvar visitStatus = flow.get(['visitStatus']);\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"api-key\"] = \"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\";\nmsg.url = \"https://api.sendinblue.com/v3/smtp/email\";\nmsg.method = \"POST\";\nmsg.payload= '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"alex.perjescu@expressoplus.com\",\"name\":\"Alex Perjescu\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"'+reportAddress+'\"}],\"templateId\":10,\"subject\":\"'+ site +' - '+ visitStatus + visitScore +'%\",\"params\":{\"site\":\"' + site + '\",\"machineType\":\"' + machineType + '\",\"score\":\"' + visitScore +'\",\"posCondition\":\"' + posCondition +'\",\"machineCleanliness\":\"'+ machineCleanliness +'\",\"operatingManual\":\"' + operatingManual + '\",\"signoffSheets\":\"' + signoffSheets + '\",\"trainingRequired\":\"' + trainingRequired + '\",\"author\":\"' + author +'\",\"reportWebLink\":\"' + reportWebLink + '\",\"serialNo\":\"' + serialNo + '\",\"date_completed\":\"'+ date_completed +'\",\"feedback\":\"'+ feedback +'\"}}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 710,
        "y": 580,
        "wires": [
            [
                "6ce6e687.ff1c08"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "7c5df7ea.b03aa",
        "type": "function",
        "z": "d5875f98.4f265",
        "name": "Filter info for email",
        "func": "msg.payload.machineType = msg.payload.header_items.filter(el => el.label.includes(\"Machine Type\"));\nmsg.payload.posCondition = msg.payload.items.filter(el => el.label.includes(\"point of sale is in good condition\"));\nmsg.payload.operatingManual = msg.payload.items.filter(el => el.label.includes(\"has an Operating Manual\"));\nmsg.payload.trainingRequired = msg.payload.items.filter(el => el.label.includes(\"Has additional training been arranged?\"));\nmsg.payload.serialNo = msg.payload.header_items.filter(el => el.label == \"Machine Serial Number\");\nmsg.payload.machineCleanliness = msg.payload.items.filter(el => el.label.includes(\"What is the state of the machine's cleanliness\"));\nmsg.payload.feedback = msg.payload.items.filter(el => el.label.includes(\"Please detail all feedback\"));\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 280,
        "wires": [
            [
                "4bed6e70.5c16b"
            ]
        ]
    },
    {
        "id": "6ce6e687.ff1c08",
        "type": "http request",
        "z": "d5875f98.4f265",
        "name": "Send email via Sendinblue",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 740,
        "y": 620,
        "wires": [
            [
                "7bb1fffd.a8a958"
            ]
        ]
    },
    {
        "id": "f9f5a52f.e98c48",
        "type": "function",
        "z": "d5875f98.4f265",
        "name": "Build PDF request",
        "func": "var auditID = flow.get([\"auditID\"]);\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/report';\nmsg.method = 'POST';\nmsg.payload = '{\"format\": \"PDF\"}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 340,
        "wires": [
            [
                "4a42db1e.436b54"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "4a42db1e.436b54",
        "type": "http request",
        "z": "d5875f98.4f265",
        "name": "Request audit PDF",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 470,
        "y": 380,
        "wires": [
            [
                "a9547dfb.f2006"
            ]
        ]
    },
    {
        "id": "ca91b9c8.33a2f",
        "type": "function",
        "z": "d5875f98.4f265",
        "name": "Check if PDF ready",
        "func": "var auditID = flow.get([\"auditID\"]);\nvar messageID = flow.get([\"messageID\"])\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/report/' + messageID;\nmsg.method = 'GET';\nmsg.payload = '{\"format\": \"PDF\"}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 540,
        "wires": [
            [
                "f3282720.36b41"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "f3282720.36b41",
        "type": "http request",
        "z": "d5875f98.4f265",
        "name": "Request audit PDF",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 470,
        "y": 580,
        "wires": [
            [
                "8698fa0f.353f"
            ]
        ]
    },
    {
        "id": "8698fa0f.353f",
        "type": "switch",
        "z": "d5875f98.4f265",
        "name": "",
        "property": "payload.status",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "IN_PROGRESS",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "SUCCESS",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 230,
        "y": 620,
        "wires": [
            [
                "260933dd.34584c"
            ],
            [
                "f4623b82.b24378"
            ]
        ]
    },
    {
        "id": "260933dd.34584c",
        "type": "delay",
        "z": "d5875f98.4f265",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 200,
        "y": 480,
        "wires": [
            [
                "ca91b9c8.33a2f"
            ]
        ]
    },
    {
        "id": "a9547dfb.f2006",
        "type": "change",
        "z": "d5875f98.4f265",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "messageID",
                "pt": "flow",
                "to": "payload.messageId",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 380,
        "wires": [
            [
                "1c6d7cab.766933"
            ]
        ]
    },
    {
        "id": "f4623b82.b24378",
        "type": "change",
        "z": "d5875f98.4f265",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reportURL",
                "pt": "flow",
                "to": "payload.url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 620,
        "wires": [
            [
                "f906922a.bf1c28"
            ]
        ]
    },
    {
        "id": "4bed6e70.5c16b",
        "type": "change",
        "z": "d5875f98.4f265",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machineType",
                "pt": "flow",
                "to": "payload.machineType[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "posCondition",
                "pt": "flow",
                "to": "payload.posCondition[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "operatingManual",
                "pt": "flow",
                "to": "payload.operatingManual[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "trainingRequired",
                "pt": "flow",
                "to": "payload.trainingRequired[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "author",
                "pt": "flow",
                "to": "payload.audit_data.authorship.author",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "site",
                "pt": "flow",
                "to": "payload.audit_data.name",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "auditID",
                "pt": "flow",
                "to": "payload.audit_id",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "visitScore",
                "pt": "flow",
                "to": "payload.audit_data.score_percentage",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "machineCleanliness",
                "pt": "flow",
                "to": "payload.machineCleanliness[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "signoffSheets",
                "pt": "flow",
                "to": "payload.trainingRequired[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "date_completed",
                "pt": "flow",
                "to": "payload.audit_data.date_completed",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "serialNo",
                "pt": "flow",
                "to": "payload.serialNo[0].responses.text",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "feedback",
                "pt": "flow",
                "to": "payload.feedback[0].responses.text",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 140,
        "wires": [
            [
                "f9f5a52f.e98c48",
                "7bb1fffd.a8a958",
                "c68fa8f9.b9a94"
            ]
        ]
    },
    {
        "id": "1c6d7cab.766933",
        "type": "function",
        "z": "d5875f98.4f265",
        "name": "Get report web link",
        "func": "var auditID = flow.get([\"auditID\"]);\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/web_report_link';\nmsg.method = 'GET';\nmsg.payload = '';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 440,
        "wires": [
            [
                "869677c.6442388"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "869677c.6442388",
        "type": "http request",
        "z": "d5875f98.4f265",
        "name": "Request report web link",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 490,
        "y": 480,
        "wires": [
            [
                "a814e2d1.2317b8"
            ]
        ]
    },
    {
        "id": "a814e2d1.2317b8",
        "type": "change",
        "z": "d5875f98.4f265",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reportWebLink",
                "pt": "flow",
                "to": "payload.url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 480,
        "wires": [
            [
                "260933dd.34584c"
            ]
        ]
    },
    {
        "id": "e24135ca.0ba438",
        "type": "http request",
        "z": "d5875f98.4f265",
        "name": "Request audit data",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 470,
        "y": 220,
        "wires": [
            [
                "7c5df7ea.b03aa"
            ]
        ]
    },
    {
        "id": "cd17aac8.8918b8",
        "type": "function",
        "z": "d5875f98.4f265",
        "name": "Get full audit",
        "func": "var auditID = msg.payload.data.audit.audit_id;\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 450,
        "y": 180,
        "wires": [
            [
                "e24135ca.0ba438"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "e2447185.d677e",
        "type": "switch",
        "z": "d5875f98.4f265",
        "name": "",
        "property": "payload.data.template.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Audit",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 450,
        "y": 120,
        "wires": [
            [
                "cd17aac8.8918b8"
            ]
        ]
    },
    {
        "id": "9bce0d1c.3054e",
        "type": "comment",
        "z": "d5875f98.4f265",
        "name": "Staging",
        "info": "",
        "x": 200,
        "y": 300,
        "wires": []
    },
    {
        "id": "c68fa8f9.b9a94",
        "type": "switch",
        "z": "d5875f98.4f265",
        "name": "",
        "property": "visitScore",
        "propertyType": "flow",
        "rules": [
            {
                "t": "gte",
                "v": "70",
                "vt": "str"
            },
            {
                "t": "lt",
                "v": "70",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 220,
        "wires": [
            [
                "cde2952d.334c7"
            ],
            [
                "e27d668.75e1698"
            ]
        ]
    },
    {
        "id": "cde2952d.334c7",
        "type": "change",
        "z": "d5875f98.4f265",
        "name": "Pass",
        "rules": [
            {
                "t": "set",
                "p": "visitStatus",
                "pt": "flow",
                "to": "Pass",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 260,
        "wires": [
            [
                "f9f5a52f.e98c48"
            ]
        ]
    },
    {
        "id": "e27d668.75e1698",
        "type": "change",
        "z": "d5875f98.4f265",
        "name": "Fail",
        "rules": [
            {
                "t": "set",
                "p": "visitStatus",
                "pt": "flow",
                "to": "Fail",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 300,
        "wires": [
            [
                "f9f5a52f.e98c48"
            ]
        ]
    },
    {
        "id": "337db954.ac17de",
        "type": "function",
        "z": "24aabfeb.a5fbb8",
        "name": "Sendinblue: Check contact",
        "func": "var encodedEmail = global.get([\"encodedEmail\"]);\nmsg.headers = {};\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"api-key\"] = \"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\";\nmsg.url = \"https://api.sendinblue.com/v3/contacts/\" + encodedEmail + \"\";\nmsg.method = \"GET\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 220,
        "y": 720,
        "wires": [
            [
                "4185fb85.573e74"
            ]
        ]
    },
    {
        "id": "656488c5.6efae8",
        "type": "subflow:db823d6a.3762f",
        "z": "24aabfeb.a5fbb8",
        "name": "Find contact in ProspectSoft",
        "env": [],
        "x": 220,
        "y": 660,
        "wires": [
            [
                "337db954.ac17de"
            ]
        ]
    },
    {
        "id": "38f5b689.afb41a",
        "type": "switch",
        "z": "24aabfeb.a5fbb8",
        "name": "Check if EPEmailFlag has updates",
        "property": "payload.updatedFields",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "EPEmailFlag",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 540,
        "y": 660,
        "wires": [
            [
                "9e1805ab.73aff8"
            ]
        ]
    },
    {
        "id": "9e1805ab.73aff8",
        "type": "switch",
        "z": "24aabfeb.a5fbb8",
        "name": "Check flag status",
        "property": "payload.updatedEntity.epEmailFlag",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 660,
        "wires": [
            [
                "21203b85.73cc6c"
            ],
            [
                "eb712a28.70267"
            ]
        ],
        "info": "Check the new flag status"
    },
    {
        "id": "21203b85.73cc6c",
        "type": "function",
        "z": "24aabfeb.a5fbb8",
        "name": "Sendinblue: Subscribe",
        "func": "var encodedEmail = flow.get([\"encodedEmail\"]);\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"api-key\"] = \"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\";\nmsg.url = \"https://api.sendinblue.com/v3/contacts/\" + encodedEmail +\"\";\nmsg.method = \"PUT\";\nmsg.payload = '{\"emailBlacklisted\": false}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1040,
        "y": 640,
        "wires": [
            [
                "fa07495d.80911"
            ]
        ]
    },
    {
        "id": "eb712a28.70267",
        "type": "function",
        "z": "24aabfeb.a5fbb8",
        "name": "Sendinblue: Unsubscribe",
        "func": "var encodedEmail = flow.get([\"encodedEmail\"]);\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"api-key\"] = \"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\";\nmsg.url = \"https://api.sendinblue.com/v3/contacts/\" + encodedEmail +\"\";\nmsg.method = \"PUT\";\nmsg.payload = '{\"emailBlacklisted\": true}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1050,
        "y": 680,
        "wires": [
            [
                "fa07495d.80911"
            ]
        ]
    },
    {
        "id": "fa07495d.80911",
        "type": "http request",
        "z": "24aabfeb.a5fbb8",
        "name": "Change flag in Sendinblue",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "bearer",
        "x": 1340,
        "y": 660,
        "wires": [
            [
                "22a11941.38e21e"
            ]
        ]
    },
    {
        "id": "22a11941.38e21e",
        "type": "debug",
        "z": "24aabfeb.a5fbb8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1350,
        "y": 820,
        "wires": []
    },
    {
        "id": "4185fb85.573e74",
        "type": "http request",
        "z": "24aabfeb.a5fbb8",
        "name": "Sendinblue: Check Contact",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 220,
        "y": 780,
        "wires": [
            [
                "5de060c1.6995c"
            ]
        ]
    },
    {
        "id": "9cb1536b.21cb08",
        "type": "function",
        "z": "a9d41dbe.70411",
        "name": "Build http request",
        "func": "var reportAddress = flow.get([\"reportURL\"]);\nvar machineType = flow.get([\"machineType\"]);\nvar machineCleanliness = flow.get([\"machineCleanliness\"]);\nvar posCondition = flow.get([\"posCondition\"]);\nvar signoffSheets = flow.get([\"signoffSheets\"])\nvar trainingRequired = flow.get([\"trainingRequired\"]);\nvar operatingManual = flow.get([\"operatingManual\"]);\nvar author = flow.get(['author']);\nvar site = flow.get(['site']);\nvar reportWebLink = flow.get(['reportWebLink']);\nvar visitScore = flow.get(['visitScore']);\nvar serialNo = flow.get(['serialNo']);\nvar date_completed = flow.get(['date_completed']);\nvar feedback = flow.get(['feedback']);\nvar visitStatus = flow.get(['visitStatus']);\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"api-key\"] = \"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\";\nmsg.url = \"https://api.sendinblue.com/v3/smtp/email\";\nmsg.method = \"POST\";\nmsg.payload= '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"alex.perjescu@expressoplus.com\",\"name\":\"Alex Perjescu\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"'+reportAddress+'\"}],\"templateId\":10,\"subject\":\"'+ site +' - '+ visitStatus + visitScore +'%\",\"params\":{\"site\":\"' + site + '\",\"machineType\":\"' + machineType + '\",\"score\":\"' + visitScore +'\",\"posCondition\":\"' + posCondition +'\",\"machineCleanliness\":\"'+ machineCleanliness +'\",\"operatingManual\":\"' + operatingManual + '\",\"signoffSheets\":\"' + signoffSheets + '\",\"trainingRequired\":\"' + trainingRequired + '\",\"author\":\"' + author +'\",\"reportWebLink\":\"' + reportWebLink + '\",\"serialNo\":\"' + serialNo + '\",\"date_completed\":\"'+ date_completed +'\",\"feedback\":\"'+ feedback +'\"}}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1690,
        "y": 760,
        "wires": [
            [
                "ecb10446.3cd218"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "bdaa595c.8f3228",
        "type": "function",
        "z": "a9d41dbe.70411",
        "name": "Filter info for email",
        "func": "msg.payload.machineType = msg.payload.header_items.filter(el => el.label.includes(\"Machine Type\"));\nmsg.payload.posCondition = msg.payload.items.filter(el => el.label.includes(\"point of sale is in good condition\"));\nmsg.payload.operatingManual = msg.payload.items.filter(el => el.label.includes(\"has an Operating Manual\"));\nmsg.payload.trainingRequired = msg.payload.items.filter(el => el.label.includes(\"Has additional training been arranged?\"));\nmsg.payload.serialNo = msg.payload.header_items.filter(el => el.label == \"Machine Serial Number\");\nmsg.payload.machineCleanliness = msg.payload.items.filter(el => el.label.includes(\"What is the state of the machine's cleanliness\"));\nmsg.payload.feedback = msg.payload.items.filter(el => el.label.includes(\"Please detail all feedback\"));\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1450,
        "y": 460,
        "wires": [
            [
                "66f2bc0.64bfd44"
            ]
        ]
    },
    {
        "id": "ecb10446.3cd218",
        "type": "http request",
        "z": "a9d41dbe.70411",
        "name": "Send email via Sendinblue",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1720,
        "y": 800,
        "wires": [
            [
                "87507835.f214d8"
            ]
        ]
    },
    {
        "id": "bb4a23d0.ea2908",
        "type": "function",
        "z": "a9d41dbe.70411",
        "name": "Build PDF request",
        "func": "var auditID = flow.get([\"auditID\"]);\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/report';\nmsg.method = 'POST';\nmsg.payload = '{\"format\": \"PDF\"}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1450,
        "y": 520,
        "wires": [
            [
                "aec1a2b7.0ffe"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "aec1a2b7.0ffe",
        "type": "http request",
        "z": "a9d41dbe.70411",
        "name": "Request audit PDF",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1450,
        "y": 560,
        "wires": [
            [
                "902f3077.c36818"
            ]
        ]
    },
    {
        "id": "ed5fa409.2a7f8",
        "type": "function",
        "z": "a9d41dbe.70411",
        "name": "Check if PDF ready",
        "func": "var auditID = flow.get([\"auditID\"]);\nvar messageID = flow.get([\"messageID\"])\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/report/' + messageID;\nmsg.method = 'GET';\nmsg.payload = '{\"format\": \"PDF\"}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1450,
        "y": 720,
        "wires": [
            [
                "dc6d2d5e.c72098"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "dc6d2d5e.c72098",
        "type": "http request",
        "z": "a9d41dbe.70411",
        "name": "Request audit PDF",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1450,
        "y": 760,
        "wires": [
            [
                "e535f786.a3f44"
            ]
        ]
    },
    {
        "id": "e535f786.a3f44",
        "type": "switch",
        "z": "a9d41dbe.70411",
        "name": "",
        "property": "payload.status",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "IN_PROGRESS",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "SUCCESS",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1210,
        "y": 800,
        "wires": [
            [
                "ba059c5b.1e6fb8"
            ],
            [
                "eb039dc5.473368"
            ]
        ]
    },
    {
        "id": "ba059c5b.1e6fb8",
        "type": "delay",
        "z": "a9d41dbe.70411",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1180,
        "y": 660,
        "wires": [
            [
                "ed5fa409.2a7f8"
            ]
        ]
    },
    {
        "id": "902f3077.c36818",
        "type": "change",
        "z": "a9d41dbe.70411",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "messageID",
                "pt": "flow",
                "to": "payload.messageId",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1690,
        "y": 560,
        "wires": [
            [
                "f5b4dedf.a235d8"
            ]
        ]
    },
    {
        "id": "eb039dc5.473368",
        "type": "change",
        "z": "a9d41dbe.70411",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reportURL",
                "pt": "flow",
                "to": "payload.url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 800,
        "wires": [
            [
                "9cb1536b.21cb08"
            ]
        ]
    },
    {
        "id": "66f2bc0.64bfd44",
        "type": "change",
        "z": "a9d41dbe.70411",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machineType",
                "pt": "flow",
                "to": "payload.machineType[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "posCondition",
                "pt": "flow",
                "to": "payload.posCondition[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "operatingManual",
                "pt": "flow",
                "to": "payload.operatingManual[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "trainingRequired",
                "pt": "flow",
                "to": "payload.trainingRequired[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "author",
                "pt": "flow",
                "to": "payload.audit_data.authorship.author",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "site",
                "pt": "flow",
                "to": "payload.audit_data.name",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "auditID",
                "pt": "flow",
                "to": "payload.audit_id",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "visitScore",
                "pt": "flow",
                "to": "payload.audit_data.score_percentage",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "machineCleanliness",
                "pt": "flow",
                "to": "payload.machineCleanliness[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "signoffSheets",
                "pt": "flow",
                "to": "payload.trainingRequired[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "date_completed",
                "pt": "flow",
                "to": "payload.audit_data.date_completed",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "serialNo",
                "pt": "flow",
                "to": "payload.serialNo[0].responses.text",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "feedback",
                "pt": "flow",
                "to": "payload.feedback[0].responses.text",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1680,
        "y": 320,
        "wires": [
            [
                "bb4a23d0.ea2908",
                "ee1c1547.ce454",
                "87507835.f214d8"
            ]
        ]
    },
    {
        "id": "f5b4dedf.a235d8",
        "type": "function",
        "z": "a9d41dbe.70411",
        "name": "Get report web link",
        "func": "var auditID = flow.get([\"auditID\"]);\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/web_report_link';\nmsg.method = 'GET';\nmsg.payload = '';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1450,
        "y": 620,
        "wires": [
            [
                "ebe0491.f24fc38"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "ebe0491.f24fc38",
        "type": "http request",
        "z": "a9d41dbe.70411",
        "name": "Request report web link",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1470,
        "y": 660,
        "wires": [
            [
                "86af6d3a.dd361"
            ]
        ]
    },
    {
        "id": "86af6d3a.dd361",
        "type": "change",
        "z": "a9d41dbe.70411",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reportWebLink",
                "pt": "flow",
                "to": "payload.url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 660,
        "wires": [
            [
                "ba059c5b.1e6fb8"
            ]
        ]
    },
    {
        "id": "1f6b5f8d.2e59b8",
        "type": "http request",
        "z": "a9d41dbe.70411",
        "name": "Request audit data",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1450,
        "y": 400,
        "wires": [
            [
                "bdaa595c.8f3228"
            ]
        ]
    },
    {
        "id": "3b0c7b27.0ab384",
        "type": "function",
        "z": "a9d41dbe.70411",
        "name": "Get full audit",
        "func": "var auditID = msg.payload.data.audit.audit_id;\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1430,
        "y": 360,
        "wires": [
            [
                "1f6b5f8d.2e59b8"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "de5162f3.fd9808",
        "type": "switch",
        "z": "a9d41dbe.70411",
        "name": "",
        "property": "payload.data.template.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Audit",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1430,
        "y": 300,
        "wires": [
            [
                "3b0c7b27.0ab384"
            ]
        ]
    },
    {
        "id": "54606a4a.9c338c",
        "type": "comment",
        "z": "a9d41dbe.70411",
        "name": "Staging",
        "info": "",
        "x": 1180,
        "y": 480,
        "wires": []
    },
    {
        "id": "ee1c1547.ce454",
        "type": "switch",
        "z": "a9d41dbe.70411",
        "name": "",
        "property": "visitScore",
        "propertyType": "flow",
        "rules": [
            {
                "t": "gte",
                "v": "70",
                "vt": "str"
            },
            {
                "t": "lt",
                "v": "70",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1710,
        "y": 400,
        "wires": [
            [
                "ce5cffe0.7451b"
            ],
            [
                "538b6066.077d58"
            ]
        ]
    },
    {
        "id": "ce5cffe0.7451b",
        "type": "change",
        "z": "a9d41dbe.70411",
        "name": "Pass",
        "rules": [
            {
                "t": "set",
                "p": "visitStatus",
                "pt": "flow",
                "to": "Pass",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1710,
        "y": 440,
        "wires": [
            [
                "bb4a23d0.ea2908"
            ]
        ]
    },
    {
        "id": "538b6066.077d58",
        "type": "change",
        "z": "a9d41dbe.70411",
        "name": "Fail",
        "rules": [
            {
                "t": "set",
                "p": "visitStatus",
                "pt": "flow",
                "to": "Fail",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1710,
        "y": 480,
        "wires": [
            [
                "bb4a23d0.ea2908"
            ]
        ]
    },
    {
        "id": "87507835.f214d8",
        "type": "debug",
        "z": "a9d41dbe.70411",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1970,
        "y": 280,
        "wires": []
    },
    {
        "id": "6e7de414.bbf93c",
        "type": "delay",
        "z": "a9d41dbe.70411",
        "name": "",
        "pauseType": "delay",
        "timeout": "29",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1210,
        "y": 260,
        "wires": [
            [
                "de5162f3.fd9808"
            ]
        ]
    },
    {
        "id": "e6174385.18e6c",
        "type": "inject",
        "z": "24aabfeb.a5fbb8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"previousEntity\":{\"contactId\":366411,\"lastUpdatedTimestamp\":\"2020-07-31T09:35:37.974\",\"lastUpdated\":\"2020-07-31T09:35:37.974\",\"lastUpdatedByUserId\":\"APE\",\"created\":\"2019-10-02T09:34:30.92\",\"createdByUserId\":\"APE\",\"systemObjectsKey\":\"366411\",\"authority\":null,\"epMailFlag\":null,\"epFaxFlag\":null,\"epEmailFlag\":0,\"epOptIn\":null,\"epSwapMailFalg\":null,\"standardTextField1\":null,\"standardTextField2\":null,\"standardTextField3\":null,\"standardTextField4\":null,\"standardTextField5\":null,\"standardTextField6\":null,\"standardTextField7\":null,\"standardTextField8\":null,\"standardTextField9\":null,\"standardTextField10\":null,\"standardDecimalField1\":null,\"standardDecimalField2\":null,\"standardDecimalField3\":null,\"standardDecimalField4\":null,\"standardDecimalField5\":null,\"standardDateField1\":null,\"standardDateField2\":null,\"standardDateField3\":null,\"standardDateField4\":null,\"standardDateField5\":null,\"standardFlagField1\":null,\"standardFlagField2\":null,\"standardFlagField3\":null,\"standardFlagField4\":null,\"standardFlagField5\":null,\"standardMemoField1\":null,\"standardMemoField2\":null,\"standardMemoField3\":null,\"standardMemoField4\":null,\"standardMemoField5\":null,\"standardSearchTextField1\":null,\"standardSearchTextField2\":null,\"standardSearchTextField3\":null},\"updatedEntity\":{\"contactId\":366411,\"lastUpdatedTimestamp\":\"2020-07-31T09:35:37.974\",\"lastUpdated\":\"2020-07-31T09:35:37.974\",\"lastUpdatedByUserId\":\"APE\",\"created\":\"2019-10-02T09:34:30.92\",\"createdByUserId\":\"APE\",\"systemObjectsKey\":\"366411\",\"authority\":null,\"epMailFlag\":null,\"epFaxFlag\":null,\"epEmailFlag\":1,\"epOptIn\":null,\"epSwapMailFalg\":null,\"standardTextField1\":null,\"standardTextField2\":null,\"standardTextField3\":null,\"standardTextField4\":null,\"standardTextField5\":null,\"standardTextField6\":null,\"standardTextField7\":null,\"standardTextField8\":null,\"standardTextField9\":null,\"standardTextField10\":null,\"standardDecimalField1\":null,\"standardDecimalField2\":null,\"standardDecimalField3\":null,\"standardDecimalField4\":null,\"standardDecimalField5\":null,\"standardDateField1\":null,\"standardDateField2\":null,\"standardDateField3\":null,\"standardDateField4\":null,\"standardDateField5\":null,\"standardFlagField1\":null,\"standardFlagField2\":null,\"standardFlagField3\":null,\"standardFlagField4\":null,\"standardFlagField5\":null,\"standardMemoField1\":null,\"standardMemoField2\":null,\"standardMemoField3\":null,\"standardMemoField4\":null,\"standardMemoField5\":null,\"standardSearchTextField1\":null,\"standardSearchTextField2\":null,\"standardSearchTextField3\":null},\"updatedFields\":[\"EPEmailFlag\"],\"action\":\"entityUpdated\",\"happenedAtUtc\":\"2020-08-03T11:13:41.9042955Z\",\"triggeredByUser\":{\"id\":315328,\"name\":\"Alex Perjescu\",\"email\":\"alex.perjescu@expressoplus.com\",\"userCode\":\"APE\"},\"entityType\":\"ContactXtra\",\"entityIdProperties\":[\"ContactId\"],\"entityODataLink\":\"https://api-v1.prospect365.com/ContactXtras(ContactId=366411)\"}",
        "payloadType": "json",
        "x": 110,
        "y": 600,
        "wires": [
            [
                "656488c5.6efae8"
            ]
        ]
    },
    {
        "id": "5de060c1.6995c",
        "type": "switch",
        "z": "24aabfeb.a5fbb8",
        "name": "Check if Contact exists in Sendinblue",
        "property": "payload.message",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Contact does not exist",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 760,
        "wires": [
            [
                "38173afc.f8019e"
            ]
        ]
    },
    {
        "id": "38173afc.f8019e",
        "type": "function",
        "z": "24aabfeb.a5fbb8",
        "name": "Sendinblue: Create contact",
        "func": "var email = global.get([\"email\"]);\nvar FIRSTNAME = global.get([\"firstName\"]);\nvar LASTNAME = global.get([\"lastName\"]);\nvar COMPANY = global.get([\"companyName\"]);\nmsg.headers = {};\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"api-key\"] = \"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\";\nmsg.url = \"https://api.sendinblue.com/v3/contacts/\";\nmsg.method = \"POST\";\nmsg.payload = '{\"attributes\":{\"FIRSTNAME\":\"'+ FIRSTNAME +'\",\"LASTNAME\":\"'+ LASTNAME +'\",\"COMPANY\":\"'+ COMPANY +'\",\"TAGS\":\"ProspectSoft Update\"},\"updateEnabled\":true,\"email\":\"'+ email +'\",\"listIds\":[4]}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 880,
        "y": 760,
        "wires": [
            [
                "172c0222.d04d0e"
            ]
        ]
    },
    {
        "id": "172c0222.d04d0e",
        "type": "http request",
        "z": "24aabfeb.a5fbb8",
        "name": "Sendinblue: Create Contact",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1160,
        "y": 760,
        "wires": [
            [
                "22a11941.38e21e"
            ]
        ]
    },
    {
        "id": "587b6da8.c69b54",
        "type": "change",
        "z": "db823d6a.3762f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "firstName",
                "pt": "global",
                "to": "payload.value[0].Forename",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "lastName",
                "pt": "global",
                "to": "payload.value[0].Surname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "companyName",
                "pt": "global",
                "to": "payload.value[0].Division.Name",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "encodedEmail",
                "pt": "global",
                "to": "payload.email",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "email",
                "pt": "global",
                "to": "payload.value[0].Email",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "5beb589b.9abcb8",
        "type": "http response",
        "z": "81053105.60e14",
        "name": "Send http response",
        "statusCode": "200",
        "headers": {},
        "x": 650,
        "y": 60,
        "wires": []
    },
    {
        "id": "8cb09d4.17a5de",
        "type": "http in",
        "z": "81053105.60e14",
        "name": "Receive New Visit Report",
        "url": "/new_visit_report",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 410,
        "y": 60,
        "wires": [
            [
                "5beb589b.9abcb8",
                "638f2202.d40f24"
            ]
        ]
    },
    {
        "id": "4e58bb34.031fa4",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "Check data",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 190,
        "y": 220,
        "wires": []
    },
    {
        "id": "a5dd65d6.a54438",
        "type": "function",
        "z": "b6f41f64.a726c",
        "name": "Build http request",
        "func": "var reportAddress = flow.get([\"reportURL\"]);\nvar machineType = flow.get([\"machineType\"]);\nvar machineCleanliness = flow.get([\"machineCleanliness\"]);\nvar posCondition = flow.get([\"posCondition\"]);\nvar signoffSheets = flow.get([\"signoffSheets\"]);\nvar trainingRequired = flow.get([\"trainingRequired\"]);\nvar operatingManual = flow.get([\"operatingManual\"]);\nvar author = flow.get([\"author\"]);\nvar site = flow.get([\"site\"]);\nvar reportWebLink = flow.get([\"reportWebLink\"]);\nvar visitScore = flow.get([\"visitScore\"]).toString().slice(0, 5);\nvar serialNo = flow.get([\"serialNo\"]);\nvar date_completed = flow.get([\"date_completed\"]);\nvar dateCompleted = flow.get([\"date_completed\"]).toString().slice(0, 10);\nvar timeCompleted = flow.get([\"date_completed\"]).toString().slice(11, 19);\nvar rawFeedback = flow.get([\"feedback\"]);\nvar visitStatus = flow.get([\"visitStatus\"]);\nvar storeNumber = flow.get([\"storeNumber\"]);\nvar feedback = rawFeedback.toString().replace(/(\\r\\n|\\n|\\r)/gm, \" \");\nmsg.headers = {};\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"api-key\"] = \"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\";\nmsg.url = \"https://api.sendinblue.com/v3/smtp/email\";\nmsg.method = \"POST\";\nmsg.payload= '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"epteam@expressoplus.com\",\"name\":\"eP Team\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"templateId\":22,\"subject\":\"'+ storeNumber +' '+ site +' | '+ visitStatus +' '+ visitScore +'%\",\"params\":{\"site\":\"' + site + '\",\"machineType\":\"' + machineType + '\",\"score\":\"' + visitScore +'\",\"posCondition\":\"' + posCondition +'\",\"machineCleanliness\":\"'+ machineCleanliness +'\",\"operatingManual\":\"' + operatingManual + '\",\"signoffSheets\":\"' + signoffSheets + '\",\"trainingRequired\":\"' + trainingRequired + '\",\"author\":\"' + author +'\",\"reportWebLink\":\"' + reportWebLink + '\",\"serialNo\":\"' + serialNo + '\",\"date_completed\":\"'+ dateCompleted +'\",\"time_completed\":\"'+ timeCompleted +'\",\"feedback\":\"'+ feedback +'\",\"visitStatus\":\"'+ visitStatus +'\",\"storeNumber\":\"'+ storeNumber +'\"}}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 360,
        "wires": [
            [
                "24e5fbd8.ce01ec",
                "e5e7fc01.57be28"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "f06e9db9.960308",
        "type": "function",
        "z": "b6f41f64.a726c",
        "name": "Filter info for email",
        "func": "msg.payload.machineType = msg.payload.header_items.filter(el => el.label.includes(\"Machine Type\"));\nmsg.payload.storeNumber = msg.payload.header_items.filter(el => el.label.includes(\"Store Number\"));\nmsg.payload.posCondition = msg.payload.items.filter(el => el.label.includes(\"point of sale is in good condition\"));\nmsg.payload.operatingManual = msg.payload.items.filter(el => el.label.includes(\"has an Operating Manual\"));\nmsg.payload.trainingRequired = msg.payload.items.filter(el => el.label.includes(\"Has additional training been arranged?\"));\nmsg.payload.serialNo = msg.payload.header_items.filter(el => el.label.includes(\"Machine Serial Number\"));\nmsg.payload.machineCleanliness = msg.payload.items.filter(el => el.label.includes(\"What is the state of the machine's cleanliness\"));\nmsg.payload.feedback = msg.payload.items.filter(el => el.label.includes(\"Please detail all feedback\"));\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 930,
        "y": 80,
        "wires": [
            [
                "7f59c24e.63e3bc"
            ]
        ]
    },
    {
        "id": "24e5fbd8.ce01ec",
        "type": "http request",
        "z": "b6f41f64.a726c",
        "name": "Send email via Sendinblue",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 640,
        "y": 360,
        "wires": [
            [
                "a26a3468.ff3e4"
            ]
        ]
    },
    {
        "id": "f5cee338.2854d8",
        "type": "change",
        "z": "b6f41f64.a726c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reportURL",
                "pt": "flow",
                "to": "payload.url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 360,
        "wires": [
            [
                "a5dd65d6.a54438",
                "47cbc6a9.b4866"
            ]
        ]
    },
    {
        "id": "7f59c24e.63e3bc",
        "type": "change",
        "z": "b6f41f64.a726c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machineType",
                "pt": "flow",
                "to": "payload.machineType[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "posCondition",
                "pt": "flow",
                "to": "payload.posCondition[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "operatingManual",
                "pt": "flow",
                "to": "payload.operatingManual[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "trainingRequired",
                "pt": "flow",
                "to": "payload.trainingRequired[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "author",
                "pt": "flow",
                "to": "payload.audit_data.authorship.owner",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "site",
                "pt": "flow",
                "to": "payload.audit_data.site.name",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "auditID",
                "pt": "flow",
                "to": "payload.audit_id",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "visitScore",
                "pt": "flow",
                "to": "payload.audit_data.score_percentage",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "machineCleanliness",
                "pt": "flow",
                "to": "payload.machineCleanliness[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "signoffSheets",
                "pt": "flow",
                "to": "payload.trainingRequired[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "date_completed",
                "pt": "flow",
                "to": "payload.audit_data.date_completed",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "serialNo",
                "pt": "flow",
                "to": "payload.serialNo[0].responses.text",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "feedback",
                "pt": "flow",
                "to": "payload.feedback[0].responses.text",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "storeNumber",
                "pt": "flow",
                "to": "payload.storeNumber[0].responses.text",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 180,
        "wires": [
            [
                "4e58bb34.031fa4",
                "2673b4d5.63857c"
            ]
        ]
    },
    {
        "id": "159aa705.b6b809",
        "type": "http request",
        "z": "b6f41f64.a726c",
        "name": "Request audit data",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 730,
        "y": 80,
        "wires": [
            [
                "f06e9db9.960308"
            ]
        ]
    },
    {
        "id": "195e6733.ed6759",
        "type": "function",
        "z": "b6f41f64.a726c",
        "name": "Get full audit",
        "func": "var auditID = msg.payload.data.audit.audit_id;\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 550,
        "y": 80,
        "wires": [
            [
                "159aa705.b6b809"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "8421691a.0ccb88",
        "type": "switch",
        "z": "b6f41f64.a726c",
        "name": "",
        "property": "payload.data.template.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Audit",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 410,
        "y": 80,
        "wires": [
            [
                "195e6733.ed6759"
            ]
        ]
    },
    {
        "id": "cb6d7b6c.86cbd",
        "type": "change",
        "z": "b6f41f64.a726c",
        "name": "Fail",
        "rules": [
            {
                "t": "set",
                "p": "visitStatus",
                "pt": "flow",
                "to": "Fail",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 200,
        "wires": [
            [
                "1776eefd.670291"
            ]
        ]
    },
    {
        "id": "3ad45c82.a5fde4",
        "type": "change",
        "z": "b6f41f64.a726c",
        "name": "Pass",
        "rules": [
            {
                "t": "set",
                "p": "visitStatus",
                "pt": "flow",
                "to": "Pass",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 160,
        "wires": [
            [
                "1776eefd.670291"
            ]
        ]
    },
    {
        "id": "2673b4d5.63857c",
        "type": "switch",
        "z": "b6f41f64.a726c",
        "name": "",
        "property": "visitScore",
        "propertyType": "flow",
        "rules": [
            {
                "t": "gte",
                "v": "70",
                "vt": "str"
            },
            {
                "t": "lt",
                "v": "70",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 390,
        "y": 180,
        "wires": [
            [
                "3ad45c82.a5fde4"
            ],
            [
                "cb6d7b6c.86cbd"
            ]
        ]
    },
    {
        "id": "a26a3468.ff3e4",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "Report email status",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 400,
        "wires": []
    },
    {
        "id": "1776eefd.670291",
        "type": "function",
        "z": "b6f41f64.a726c",
        "name": "Get report web link",
        "func": "var auditID = flow.get([\"auditID\"]);\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/web_report_link';\nmsg.method = 'GET';\nmsg.payload = '';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 210,
        "y": 300,
        "wires": [
            [
                "d73b5479.5bea9",
                "f50a9c2f.43cf1"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "d73b5479.5bea9",
        "type": "http request",
        "z": "b6f41f64.a726c",
        "name": "Request report web link",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 430,
        "y": 300,
        "wires": [
            [
                "3ce7d82c.85ed88"
            ]
        ]
    },
    {
        "id": "3ce7d82c.85ed88",
        "type": "change",
        "z": "b6f41f64.a726c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reportWebLink",
                "pt": "flow",
                "to": "payload.url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 300,
        "wires": [
            [
                "f5cee338.2854d8",
                "100b1d5.ed72f63"
            ]
        ]
    },
    {
        "id": "22fc4e9a.40e8f2",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 190,
        "y": 120,
        "wires": []
    },
    {
        "id": "e5e7fc01.57be28",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 410,
        "y": 400,
        "wires": []
    },
    {
        "id": "e6be7649.01e178",
        "type": "function",
        "z": "2d331bcf.10f214",
        "name": "Build http request",
        "func": "var reportAddress = flow.get([\"reportURL\"]);\nvar machineType = flow.get([\"machineType\"]);\nvar machineCleanliness = flow.get([\"machineCleanliness\"]);\nvar posCondition = flow.get([\"posCondition\"]);\nvar signoffSheets = flow.get([\"signoffSheets\"]);\nvar trainingRequired = flow.get([\"trainingRequired\"]);\nvar operatingManual = flow.get([\"operatingManual\"]);\nvar author = flow.get([\"author\"]);\nvar site = flow.get([\"site\"]);\nvar reportWebLink = flow.get([\"reportWebLink\"]);\nvar visitScore = flow.get([\"visitScore\"]).toString().slice(0, 5);\nvar serialNo = flow.get([\"serialNo\"]);\nvar date_completed = flow.get([\"date_completed\"]);\nvar dateCompleted = flow.get([\"date_completed\"]).toString().slice(0, 10);\nvar timeCompleted = flow.get([\"date_completed\"]).toString().slice(11, 19);\nvar rawFeedback = flow.get([\"feedback\"]);\nvar visitStatus = flow.get([\"visitStatus\"]);\nvar storeNumber = flow.get([\"storeNumber\"]);\nvar score = flow.get([\"score\"]);\nvar maxScore = flow.get([\"maxScore\"]);\nvar feedback = rawFeedback.toString().replace(/(\\r\\n|\\n|\\r)/gm, \" \");\nmsg.headers = {};\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"api-key\"] = \"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\";\nmsg.url = \"https://api.sendinblue.com/v3/smtp/email\";\nmsg.method = \"POST\";\nmsg.payload= '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"alex.perjescu@expressoplus.com\",\"name\":\"eP Team\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"templateId\":25,\"subject\":\"DEV: '+ storeNumber +' '+ site +' | '+ visitStatus +' '+ visitScore +'%\",\"params\":{\"site\":\"' + site + '\",\"machineType\":\"' + machineType + '\",\"visitScore\":\"' + visitScore +'\",\"posCondition\":\"' + posCondition +'\",\"machineCleanliness\":\"'+ machineCleanliness +'\",\"operatingManual\":\"' + operatingManual + '\",\"signoffSheets\":\"' + signoffSheets + '\",\"trainingRequired\":\"' + trainingRequired + '\",\"author\":\"' + author +'\",\"reportWebLink\":\"' + reportWebLink + '\",\"serialNo\":\"' + serialNo + '\",\"date_completed\":\"'+ dateCompleted +'\",\"time_completed\":\"'+ timeCompleted +'\",\"feedback\":\"'+ feedback +'\",\"visitStatus\":\"'+ visitStatus +'\",\"storeNumber\":\"'+ storeNumber +'\",\"score\":\"'+ score +'\",\"maxScore\":\"'+ maxScore +'\"}}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 430,
        "y": 440,
        "wires": [
            [
                "892efbc6.dde8e"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "d5aca29b.7b3aa8",
        "type": "function",
        "z": "2d331bcf.10f214",
        "name": "Filter info for email",
        "func": "msg.payload.machineType = msg.payload.header_items.filter(el => el.label.includes(\"Machine Type\"));\nmsg.payload.storeNumber = msg.payload.header_items.filter(el => el.label.includes(\"Store Number\"));\nmsg.payload.posCondition = msg.payload.items.filter(el => el.label.includes(\"point of sale is in good condition\"));\nmsg.payload.operatingManual = msg.payload.items.filter(el => el.label.includes(\"has an Operating Manual\"));\nmsg.payload.trainingRequired = msg.payload.items.filter(el => el.label.includes(\"Has additional training been arranged?\"));\nmsg.payload.serialNo = msg.payload.header_items.filter(el => el.label.includes(\"Machine Serial Number\"));\nmsg.payload.machineCleanliness = msg.payload.items.filter(el => el.label.includes(\"What is the state of the machine's cleanliness\"));\nmsg.payload.feedback = msg.payload.items.filter(el => el.label.includes(\"Please detail all feedback\"));\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 830,
        "y": 260,
        "wires": [
            [
                "79e3d2ac.5cf6e4"
            ]
        ]
    },
    {
        "id": "12d18f0.5b78d71",
        "type": "change",
        "z": "2d331bcf.10f214",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reportURL",
                "pt": "flow",
                "to": "payload.url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 230,
        "y": 440,
        "wires": [
            [
                "e6be7649.01e178"
            ]
        ]
    },
    {
        "id": "79e3d2ac.5cf6e4",
        "type": "change",
        "z": "2d331bcf.10f214",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machineType",
                "pt": "flow",
                "to": "payload.machineType[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "posCondition",
                "pt": "flow",
                "to": "payload.posCondition[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "operatingManual",
                "pt": "flow",
                "to": "payload.operatingManual[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "trainingRequired",
                "pt": "flow",
                "to": "payload.trainingRequired[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "author",
                "pt": "flow",
                "to": "payload.audit_data.authorship.owner",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "site",
                "pt": "flow",
                "to": "payload.audit_data.site.name",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "auditID",
                "pt": "flow",
                "to": "payload.audit_id",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "visitScore",
                "pt": "flow",
                "to": "payload.audit_data.score_percentage",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "machineCleanliness",
                "pt": "flow",
                "to": "payload.machineCleanliness[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "signoffSheets",
                "pt": "flow",
                "to": "payload.trainingRequired[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "date_completed",
                "pt": "flow",
                "to": "payload.audit_data.date_completed",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "serialNo",
                "pt": "flow",
                "to": "payload.serialNo[0].responses.text",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "feedback",
                "pt": "flow",
                "to": "payload.feedback[0].responses.text",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "storeNumber",
                "pt": "flow",
                "to": "payload.storeNumber[0].responses.text",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "score",
                "pt": "flow",
                "to": "payload.audit_data.score",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "maxScore",
                "pt": "flow",
                "to": "payload.audit_data.total_score",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 230,
        "y": 300,
        "wires": [
            [
                "6523e4ba.8b642c"
            ]
        ]
    },
    {
        "id": "890bee1.157bb1",
        "type": "change",
        "z": "2d331bcf.10f214",
        "name": "Fail",
        "rules": [
            {
                "t": "set",
                "p": "visitStatus",
                "pt": "flow",
                "to": "Fail",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 320,
        "wires": [
            [
                "4e80dbd8.5cdd64"
            ]
        ]
    },
    {
        "id": "ddd25ad7.dbab48",
        "type": "change",
        "z": "2d331bcf.10f214",
        "name": "Pass",
        "rules": [
            {
                "t": "set",
                "p": "visitStatus",
                "pt": "flow",
                "to": "Pass",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 280,
        "wires": [
            [
                "4e80dbd8.5cdd64"
            ]
        ]
    },
    {
        "id": "6523e4ba.8b642c",
        "type": "switch",
        "z": "2d331bcf.10f214",
        "name": "",
        "property": "visitScore",
        "propertyType": "flow",
        "rules": [
            {
                "t": "gte",
                "v": "70",
                "vt": "str"
            },
            {
                "t": "lt",
                "v": "70",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 410,
        "y": 300,
        "wires": [
            [
                "ddd25ad7.dbab48"
            ],
            [
                "890bee1.157bb1"
            ]
        ]
    },
    {
        "id": "e9b1fc27.f1962",
        "type": "debug",
        "z": "2d331bcf.10f214",
        "name": "Report email status",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 320,
        "wires": []
    },
    {
        "id": "4e80dbd8.5cdd64",
        "type": "function",
        "z": "2d331bcf.10f214",
        "name": "Get report web link",
        "func": "var auditID = flow.get([\"auditID\"]);\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/web_report_link';\nmsg.method = 'GET';\nmsg.payload = '';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 230,
        "y": 380,
        "wires": [
            [
                "70e7101d.ef5258"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "70e7101d.ef5258",
        "type": "http request",
        "z": "2d331bcf.10f214",
        "name": "Request report web link",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 450,
        "y": 380,
        "wires": [
            [
                "150660bd.13c507"
            ]
        ]
    },
    {
        "id": "150660bd.13c507",
        "type": "change",
        "z": "2d331bcf.10f214",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reportWebLink",
                "pt": "flow",
                "to": "payload.url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 380,
        "wires": [
            [
                "12d18f0.5b78d71"
            ]
        ]
    },
    {
        "id": "892efbc6.dde8e",
        "type": "http request",
        "z": "2d331bcf.10f214",
        "name": "Send email via Sendinblue",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 720,
        "y": 440,
        "wires": [
            [
                "e9b1fc27.f1962"
            ]
        ]
    },
    {
        "id": "8705a784.51e7b8",
        "type": "function",
        "z": "2d331bcf.10f214",
        "name": "Search audits",
        "func": "var lastHour = flow.get([\"timeSince\"]);\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/search?field=audit_id&field=modified_at&modified_after='+ lastHour +'';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 460,
        "y": 140,
        "wires": [
            [
                "aaf14768.ae697"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "aaf14768.ae697",
        "type": "http request",
        "z": "2d331bcf.10f214",
        "name": "Request audit data",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 470,
        "y": 180,
        "wires": [
            [
                "52b9c4f7.7129dc",
                "8b7bb3da.e1622"
            ]
        ]
    },
    {
        "id": "cda9e3cb.27115",
        "type": "debug",
        "z": "2d331bcf.10f214",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 140,
        "wires": []
    },
    {
        "id": "c288d2f5.6b4548",
        "type": "moment",
        "z": "2d331bcf.10f214",
        "name": "",
        "topic": "",
        "input": "payload",
        "inputType": "msg",
        "inTz": "Europe/London",
        "adjAmount": "2",
        "adjType": "hours",
        "adjDir": "subtract",
        "format": "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]",
        "locale": "en_US",
        "output": "timeSince",
        "outputType": "flow",
        "outTz": "Europe/London",
        "x": 220,
        "y": 140,
        "wires": [
            [
                "8705a784.51e7b8",
                "90b88843.b3c6a8"
            ]
        ]
    },
    {
        "id": "52b9c4f7.7129dc",
        "type": "bigsplitter",
        "z": "2d331bcf.10f214",
        "name": "Split Array",
        "property": "payload.audits",
        "x": 670,
        "y": 160,
        "wires": [
            [
                "9e522239.c578d8",
                "cda9e3cb.27115"
            ],
            []
        ]
    },
    {
        "id": "9e522239.c578d8",
        "type": "delay",
        "z": "2d331bcf.10f214",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "10",
        "randomLast": "10",
        "randomUnits": "seconds",
        "drop": false,
        "x": 840,
        "y": 180,
        "wires": [
            [
                "c88a3638.4d7f7"
            ]
        ]
    },
    {
        "id": "c88a3638.4d7f7",
        "type": "function",
        "z": "2d331bcf.10f214",
        "name": "Get full audit",
        "func": "var auditID = msg.payload.audit_id;\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 210,
        "y": 240,
        "wires": [
            [
                "82eec10d.5cae2"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "82eec10d.5cae2",
        "type": "http request",
        "z": "2d331bcf.10f214",
        "name": "Request audit data",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 410,
        "y": 240,
        "wires": [
            [
                "b238c6d7.9f615"
            ]
        ]
    },
    {
        "id": "4e98048d.78e934",
        "type": "debug",
        "z": "2d331bcf.10f214",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 220,
        "wires": []
    },
    {
        "id": "b238c6d7.9f615",
        "type": "switch",
        "z": "2d331bcf.10f214",
        "name": "",
        "property": "payload.template_data.metadata.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Audit",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 610,
        "y": 240,
        "wires": [
            [
                "4e98048d.78e934",
                "d5aca29b.7b3aa8"
            ]
        ]
    },
    {
        "id": "8b7bb3da.e1622",
        "type": "debug",
        "z": "2d331bcf.10f214",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 100,
        "wires": []
    },
    {
        "id": "d47ce1a4.77006",
        "type": "inject",
        "z": "2d331bcf.10f214",
        "d": true,
        "name": "Hourly trigger",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "7200",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 80,
        "wires": [
            [
                "c288d2f5.6b4548",
                "90b88843.b3c6a8"
            ]
        ]
    },
    {
        "id": "90b88843.b3c6a8",
        "type": "debug",
        "z": "2d331bcf.10f214",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 190,
        "y": 180,
        "wires": []
    },
    {
        "id": "f50a9c2f.43cf1",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 840,
        "y": 240,
        "wires": []
    },
    {
        "id": "100b1d5.ed72f63",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1020,
        "y": 300,
        "wires": []
    },
    {
        "id": "47cbc6a9.b4866",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 210,
        "y": 400,
        "wires": []
    },
    {
        "id": "638f2202.d40f24",
        "type": "delay",
        "z": "81053105.60e14",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 360,
        "y": 120,
        "wires": [
            [
                "c2427095.5e56d"
            ]
        ]
    },
    {
        "id": "c2427095.5e56d",
        "type": "switch",
        "z": "81053105.60e14",
        "name": "",
        "property": "payload.data.template.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Audit",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "Coffee Machine Training Record",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "Site Survey",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 610,
        "y": 120,
        "wires": [
            [
                "5cc10794.e50aa8",
                "2ee838f7.5afa8"
            ],
            [
                "fff45cc.09a992"
            ],
            [
                "dc521f41.5e3f78"
            ]
        ]
    },
    {
        "id": "5cc10794.e50aa8",
        "type": "function",
        "z": "81053105.60e14",
        "name": "Get full audit",
        "func": "var auditID = msg.payload.data.audit.audit_id;\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 200,
        "wires": [
            [
                "5837cb59.e7c0a4"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "5837cb59.e7c0a4",
        "type": "http request",
        "z": "81053105.60e14",
        "name": "Request audit data",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 590,
        "y": 200,
        "wires": [
            [
                "4055406f.c132c",
                "54774b36.ae78f4"
            ]
        ]
    },
    {
        "id": "4055406f.c132c",
        "type": "function",
        "z": "81053105.60e14",
        "name": "Filter info for email",
        "func": "msg.payload.machineType = msg.payload.header_items.filter(el => el.label.includes(\"Machine Type\"));\nmsg.payload.storeNumber = msg.payload.header_items.filter(el => el.label.includes(\"Store Number\"));\nmsg.payload.posCondition = msg.payload.items.filter(el => el.label.includes(\"point of sale is in good condition\"));\nmsg.payload.operatingManual = msg.payload.items.filter(el => el.label.includes(\"has an Operating Manual\"));\nmsg.payload.trainingRequired = msg.payload.items.filter(el => el.label.includes(\"Has additional training been arranged?\"));\nmsg.payload.serialNo = msg.payload.header_items.filter(el => el.label.includes(\"Machine Serial Number\"));\nmsg.payload.machineCleanliness = msg.payload.items.filter(el => el.label.includes(\"What is the state of the machine's cleanliness\"));\nmsg.payload.feedback = msg.payload.items.filter(el => el.label.includes(\"Please detail all feedback\"));\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 810,
        "y": 200,
        "wires": [
            [
                "4f39c730.47d5f",
                "7c847c3a.2e0464"
            ]
        ]
    },
    {
        "id": "4f39c730.47d5f",
        "type": "debug",
        "z": "81053105.60e14",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 200,
        "wires": []
    },
    {
        "id": "7c847c3a.2e0464",
        "type": "switch",
        "z": "81053105.60e14",
        "name": "",
        "property": "payload.audit_data.score_percentage",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "70",
                "vt": "str"
            },
            {
                "t": "lt",
                "v": "70",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 390,
        "y": 260,
        "wires": [
            [
                "3a3c1db1.7e2272"
            ],
            [
                "b16043d6.01d04"
            ]
        ]
    },
    {
        "id": "3a3c1db1.7e2272",
        "type": "change",
        "z": "81053105.60e14",
        "name": "Pass",
        "rules": [
            {
                "t": "set",
                "p": "payload.visitStatus",
                "pt": "msg",
                "to": "Pass",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 240,
        "wires": [
            [
                "20dbb4cc.4ce884"
            ]
        ]
    },
    {
        "id": "b16043d6.01d04",
        "type": "change",
        "z": "81053105.60e14",
        "name": "Fail",
        "rules": [
            {
                "t": "set",
                "p": "payload.visitStatus",
                "pt": "msg",
                "to": "Fail",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 280,
        "wires": [
            [
                "20dbb4cc.4ce884"
            ]
        ]
    },
    {
        "id": "2ee838f7.5afa8",
        "type": "function",
        "z": "81053105.60e14",
        "name": "Get report web link",
        "func": "var auditID = msg.payload.data.audit.audit_id;\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/web_report_link';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 300,
        "wires": [
            [
                "9f50c618.dec928"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "9f50c618.dec928",
        "type": "http request",
        "z": "81053105.60e14",
        "name": "Request report web link",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 390,
        "y": 340,
        "wires": [
            [
                "f15175ff.8b0de"
            ]
        ]
    },
    {
        "id": "f15175ff.8b0de",
        "type": "change",
        "z": "81053105.60e14",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reportWebLink",
                "pt": "msg",
                "to": "payload.url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 380,
        "wires": [
            [
                "32f1516b.be04be"
            ]
        ]
    },
    {
        "id": "25238c81.fe3d14",
        "type": "function",
        "z": "81053105.60e14",
        "name": "Build http request",
        "func": "var machineType = msg.payload[1].machineType[0].responses.selected[0].label;\nvar machineCleanliness = msg.payload[1].machineCleanliness[0].responses.selected[0].label;\nvar posCondition = msg.payload[1].posCondition[0].responses.selected[0].label;\nvar signoffSheets = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar trainingRequired = msg.payload[1].trainingRequired[0].responses.selected[0].label;\nvar operatingManual = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar author = msg.payload[1].audit_data.authorship.owner;\nvar site = msg.payload[1].audit_data.site.name;\nvar reportWebLink = msg.payload[0].url;\nvar visitScore = msg.payload[1].audit_data.score_percentage.toString().slice(0, 5);\nvar serialNo = msg.payload[1].serialNo[0].responses.text;\nvar date_completed = msg.payload[1].audit_data.date_completed;\nvar dateCompleted = msg.payload[1].audit_data.date_completed.toString().slice(0, 10);\nvar timeCompleted = msg.payload[1].audit_data.date_completed.toString().slice(11, 19);\nvar rawFeedback = msg.payload[1].feedback[0].responses.text;\nvar visitStatus = msg.payload[1].visitStatus;\nvar storeNumber = msg.payload[1].storeNumber[0].responses.text;\nvar score = msg.payload[1].audit_data.score;\nvar maxScore = msg.payload[1].audit_data.total_score;\nvar feedback = rawFeedback.toString().replace(/(\\r\\n|\\n|\\r|[\"'])/gm, \" \");\nmsg.headers = {};\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"api-key\"] = \"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\";\nmsg.url = \"https://api.sendinblue.com/v3/smtp/email\";\nmsg.method = \"POST\";\nmsg.payload= '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"epteam@expressoplus.com\",\"name\":\"eP Team\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"templateId\":25,\"subject\":\"'+ storeNumber +' '+ site +' | '+ visitStatus +' '+ visitScore +'%\",\"params\":{\"site\":\"' + site + '\",\"machineType\":\"' + machineType + '\",\"visitScore\":\"' + visitScore + '\",\"posCondition\":\"' + posCondition +'\",\"machineCleanliness\":\"'+ machineCleanliness +'\",\"operatingManual\":\"' + operatingManual + '\",\"signoffSheets\":\"' + signoffSheets + '\",\"trainingRequired\":\"' + trainingRequired + '\",\"author\":\"' + author +'\",\"reportWebLink\":\"' + reportWebLink + '\",\"serialNo\":\"' + serialNo + '\",\"date_completed\":\"'+ dateCompleted +'\",\"time_completed\":\"'+ timeCompleted +'\",\"feedback\":\"'+ feedback +'\",\"visitStatus\":\"'+ visitStatus +'\",\"storeNumber\":\"'+ storeNumber +'\",\"score\":\"'+ score +'\",\"maxScore\":\"'+ maxScore +'\"}}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1510,
        "y": 220,
        "wires": [
            [
                "17eaa715.367969"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "17eaa715.367969",
        "type": "http request",
        "z": "81053105.60e14",
        "name": "Send email via Sendinblue",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1740,
        "y": 220,
        "wires": [
            [
                "ced1f65a.0ed248"
            ]
        ]
    },
    {
        "id": "32f1516b.be04be",
        "type": "join",
        "z": "81053105.60e14",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 890,
        "y": 260,
        "wires": [
            [
                "6fa29011.760758",
                "459d120a.d330ac",
                "4e9b018d.a76058"
            ]
        ]
    },
    {
        "id": "6fa29011.760758",
        "type": "debug",
        "z": "81053105.60e14",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1070,
        "y": 260,
        "wires": []
    },
    {
        "id": "ced1f65a.0ed248",
        "type": "debug",
        "z": "81053105.60e14",
        "name": "Report email status",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1970,
        "y": 220,
        "wires": []
    },
    {
        "id": "a33a0eb2.21fc08",
        "type": "subflow:b6f41f64.a726c",
        "z": "81053105.60e14",
        "name": "v1",
        "env": [],
        "x": 1450,
        "y": 80,
        "wires": []
    },
    {
        "id": "a87e1db1.9abc9",
        "type": "subflow:2d331bcf.10f214",
        "z": "81053105.60e14",
        "name": "v2 - hourly check",
        "env": [],
        "x": 1420,
        "y": 140,
        "wires": []
    },
    {
        "id": "358825b6.2ac2ca",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "Check data",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 170,
        "y": 760,
        "wires": []
    },
    {
        "id": "b6d42c71.d73b88",
        "type": "function",
        "z": "b6f41f64.a726c",
        "name": "Build http request",
        "func": "var reportAddress = msg.payload.reportURL;\nvar machineType = msg.payload.machineType;\nvar machineCleanliness = msg.payload.machineCleanliness;\nvar posCondition = msg.payload.posCondition;\nvar signoffSheets = msg.payload.signoffSheets;\nvar trainingRequired = msg.payload.trainingRequired;\nvar operatingManual = msg.payload.operatingManual;\nvar author = msg.payload.author;\nvar site = msg.payload.site;\nvar reportWebLink = msg.payload.reportWebLink;\nvar visitScore = msg.payload.visitScore.toString().slice(0, 5);\nvar serialNo = msg.payload.serialNo;\nvar date_completed = msg.payload.date_completed;\nvar dateCompleted = msg.payload.date_completed.toString().slice(0, 10);\nvar timeCompleted = msg.payload.date_completed.toString().slice(11, 19);\nvar rawFeedback = msg.payload.feedback;\nvar visitStatus = msg.payload.visitStatus;\nvar storeNumber = msg.payload.storeNumber;\nvar feedback = rawFeedback.toString().replace(/(\\r\\n|\\n|\\r)/gm, \" \");\nmsg.headers = {};\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"api-key\"] = \"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\";\nmsg.url = \"https://api.sendinblue.com/v3/smtp/email\";\nmsg.method = \"POST\";\nmsg.payload= '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"alex.perjescu@expressoplus.com\",\"name\":\"eP Team\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"templateId\":25,\"subject\":\"'+ storeNumber +' '+ site +' | '+ visitStatus +' '+ visitScore +'%\",\"params\":{\"site\":\"' + site + '\",\"machineType\":\"' + machineType + '\",\"score\":\"' + visitScore +'\",\"posCondition\":\"' + posCondition +'\",\"machineCleanliness\":\"'+ machineCleanliness +'\",\"operatingManual\":\"' + operatingManual + '\",\"signoffSheets\":\"' + signoffSheets + '\",\"trainingRequired\":\"' + trainingRequired + '\",\"author\":\"' + author +'\",\"reportWebLink\":\"' + reportWebLink + '\",\"serialNo\":\"' + serialNo + '\",\"date_completed\":\"'+ dateCompleted +'\",\"time_completed\":\"'+ timeCompleted +'\",\"feedback\":\"'+ feedback +'\",\"visitStatus\":\"'+ visitStatus +'\",\"storeNumber\":\"'+ storeNumber +'\"}}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 900,
        "wires": [
            [
                "89e9a385.301c6",
                "7b64d933.feecf8"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "c808073b.0ba808",
        "type": "function",
        "z": "b6f41f64.a726c",
        "name": "Filter info for email",
        "func": "msg.payload.machineType = msg.payload.header_items.filter(el => el.label.includes(\"Machine Type\"));\nmsg.payload.storeNumber = msg.payload.header_items.filter(el => el.label.includes(\"Store Number\"));\nmsg.payload.posCondition = msg.payload.items.filter(el => el.label.includes(\"point of sale is in good condition\"));\nmsg.payload.operatingManual = msg.payload.items.filter(el => el.label.includes(\"has an Operating Manual\"));\nmsg.payload.trainingRequired = msg.payload.items.filter(el => el.label.includes(\"Has additional training been arranged?\"));\nmsg.payload.serialNo = msg.payload.header_items.filter(el => el.label.includes(\"Machine Serial Number\"));\nmsg.payload.machineCleanliness = msg.payload.items.filter(el => el.label.includes(\"What is the state of the machine's cleanliness\"));\nmsg.payload.feedback = msg.payload.items.filter(el => el.label.includes(\"Please detail all feedback\"));\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 910,
        "y": 620,
        "wires": [
            [
                "7918e3d9.45130c",
                "2e58bec.c1c0042"
            ]
        ]
    },
    {
        "id": "89e9a385.301c6",
        "type": "http request",
        "z": "b6f41f64.a726c",
        "name": "Send email via Sendinblue",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 620,
        "y": 900,
        "wires": [
            [
                "9dcb2a9a.fabf8"
            ]
        ]
    },
    {
        "id": "21c50fa5.3a62a8",
        "type": "change",
        "z": "b6f41f64.a726c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reportURL",
                "pt": "msg",
                "to": "payload.url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 900,
        "wires": [
            [
                "b6d42c71.d73b88",
                "f123887.64bc1f8"
            ]
        ]
    },
    {
        "id": "7918e3d9.45130c",
        "type": "change",
        "z": "b6f41f64.a726c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machineType",
                "pt": "msg",
                "to": "payload.machineType[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "posCondition",
                "pt": "msg",
                "to": "payload.posCondition[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "operatingManual",
                "pt": "msg",
                "to": "payload.operatingManual[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "trainingRequired",
                "pt": "msg",
                "to": "payload.trainingRequired[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "author",
                "pt": "msg",
                "to": "payload.audit_data.authorship.owner",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "site",
                "pt": "msg",
                "to": "payload.audit_data.site.name",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "auditID",
                "pt": "msg",
                "to": "payload.audit_id",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "visitScore",
                "pt": "msg",
                "to": "payload.audit_data.score_percentage",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "machineCleanliness",
                "pt": "msg",
                "to": "payload.machineCleanliness[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "signoffSheets",
                "pt": "msg",
                "to": "payload.trainingRequired[0].responses.selected[0].label",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "date_completed",
                "pt": "msg",
                "to": "payload.audit_data.date_completed",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "serialNo",
                "pt": "msg",
                "to": "payload.serialNo[0].responses.text",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "feedback",
                "pt": "msg",
                "to": "payload.feedback[0].responses.text",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "storeNumber",
                "pt": "msg",
                "to": "payload.storeNumber[0].responses.text",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 720,
        "wires": [
            [
                "358825b6.2ac2ca",
                "6c61a777.cd795"
            ]
        ]
    },
    {
        "id": "873c73c6.af1d48",
        "type": "http request",
        "z": "b6f41f64.a726c",
        "name": "Request audit data",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 710,
        "y": 620,
        "wires": [
            [
                "c808073b.0ba808"
            ]
        ]
    },
    {
        "id": "3014dfb9.35d768",
        "type": "function",
        "z": "b6f41f64.a726c",
        "name": "Get full audit",
        "func": "var auditID = msg.payload.data.audit.audit_id;\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 530,
        "y": 620,
        "wires": [
            [
                "873c73c6.af1d48"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "8282228d.d43428",
        "type": "switch",
        "z": "b6f41f64.a726c",
        "name": "",
        "property": "payload.data.template.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Audit",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 390,
        "y": 620,
        "wires": [
            [
                "3014dfb9.35d768"
            ]
        ]
    },
    {
        "id": "70a062ca.d48f54",
        "type": "change",
        "z": "b6f41f64.a726c",
        "name": "Fail",
        "rules": [
            {
                "t": "set",
                "p": "visitStatus",
                "pt": "msg",
                "to": "Fail",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 740,
        "wires": [
            [
                "f620d6a1.2fb5c",
                "cbb7b211.1850e"
            ]
        ]
    },
    {
        "id": "c6ffebec.1bcce8",
        "type": "change",
        "z": "b6f41f64.a726c",
        "name": "Pass",
        "rules": [
            {
                "t": "set",
                "p": "visitStatus",
                "pt": "msg",
                "to": "Pass",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 700,
        "wires": [
            [
                "f620d6a1.2fb5c",
                "cbb7b211.1850e"
            ]
        ]
    },
    {
        "id": "6c61a777.cd795",
        "type": "switch",
        "z": "b6f41f64.a726c",
        "name": "",
        "property": "visitScore",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "70",
                "vt": "str"
            },
            {
                "t": "lt",
                "v": "70",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 720,
        "wires": [
            [
                "c6ffebec.1bcce8"
            ],
            [
                "70a062ca.d48f54"
            ]
        ]
    },
    {
        "id": "9dcb2a9a.fabf8",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "Report email status",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 940,
        "wires": []
    },
    {
        "id": "f620d6a1.2fb5c",
        "type": "function",
        "z": "b6f41f64.a726c",
        "name": "Get report web link",
        "func": "var auditID = msg.payload.audit_id;\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/web_report_link';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 190,
        "y": 840,
        "wires": [
            [
                "933fd49.31e26a8",
                "6f3a3ece.283f08"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "933fd49.31e26a8",
        "type": "http request",
        "z": "b6f41f64.a726c",
        "name": "Request report web link",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 410,
        "y": 840,
        "wires": [
            [
                "e22febaf.933678"
            ]
        ]
    },
    {
        "id": "e22febaf.933678",
        "type": "change",
        "z": "b6f41f64.a726c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reportWebLink",
                "pt": "msg",
                "to": "payload.url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 840,
        "wires": [
            [
                "21c50fa5.3a62a8",
                "9753296e.144b5"
            ]
        ]
    },
    {
        "id": "7b64d933.feecf8",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 390,
        "y": 940,
        "wires": []
    },
    {
        "id": "6f3a3ece.283f08",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 820,
        "y": 780,
        "wires": []
    },
    {
        "id": "9753296e.144b5",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 840,
        "wires": []
    },
    {
        "id": "f123887.64bc1f8",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 190,
        "y": 940,
        "wires": []
    },
    {
        "id": "1ec7ea32.91f13e",
        "type": "delay",
        "z": "b6f41f64.a726c",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 240,
        "y": 620,
        "wires": [
            [
                "8282228d.d43428"
            ]
        ]
    },
    {
        "id": "cbb7b211.1850e",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 800,
        "y": 720,
        "wires": []
    },
    {
        "id": "2e58bec.c1c0042",
        "type": "debug",
        "z": "b6f41f64.a726c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1180,
        "y": 620,
        "wires": []
    },
    {
        "id": "238eaf56.c09c48",
        "type": "function",
        "z": "5f5d909a.167008",
        "name": "Filter counter readings",
        "func": "msg.payload.serialNoRaw = msg.payload.header_items.filter(el => el.label.includes(\"Machine Serial Number\"));\nmsg.payload.serialNo = msg.payload.serialNoRaw[0].responses.text;\nmsg.payload.storeNumberRaw = msg.payload.header_items.filter(el => el.label.includes(\"Store Number\"));\nmsg.payload.storeNumber = msg.payload.storeNumberRaw[0].responses.text;\nvar timeCompleted = msg.payload.created_at.toString().slice(0, 19);\nmsg.payload.dateTime = timeCompleted;\n\nmsg.payload.cappuccinoSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Cappuccino Drink Sales\"));\nif (msg.payload.cappuccinoSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.cappuccinoSales12 = msg.payload.cappuccinoSales12Raw[0].responses.text;\ndelete msg.payload.cappuccinoSales12Raw;\n}\nelse {\n    delete msg.payload.cappuccinoSales12Raw;\n}\nmsg.payload.latteSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Latte Drink Sales\"));\nif (msg.payload.latteSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.latteSales12 = msg.payload.latteSales12Raw[0].responses.text;\ndelete msg.payload.latteSales12Raw;\n}\nelse {\n    delete msg.payload.latteSales12Raw;\n}\nmsg.payload.whiteCoffeeSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz White Coffee Drink Sales\"));\nif (msg.payload.whiteCoffeeSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.whiteCoffeeSales12 = msg.payload.whiteCoffeeSales12Raw[0].responses.text;\ndelete msg.payload.whiteCoffeeSales12Raw;\n}\nelse {\n    delete msg.payload.whiteCoffeeSales12Raw;\n}\nmsg.payload.americanoSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Americano Drink Sales\"));\nif (msg.payload.americanoSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.americanoSales12 = msg.payload.americanoSales12Raw[0].responses.text;\ndelete msg.payload.americanoSales12Raw;\n}\nelse {\n    delete msg.payload.americanoSales12Raw;\n}\nmsg.payload.flatWhiteSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Flat White Drink Sales\"));\nif (msg.payload.flatWhiteSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.flatWhiteSales12 = msg.payload.flatWhiteSales12Raw[0].responses.text;\ndelete msg.payload.flatWhiteSales12Raw;\n}\nelse {\n    delete msg.payload.flatWhiteSales12Raw;\n}\nmsg.payload.doubleEspressoSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Double Espresso Drink Sales\"));\nif (msg.payload.doubleEspressoSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.doubleEspressoSales12 = msg.payload.doubleEspressoSales12Raw[0].responses.text;\ndelete msg.payload.doubleEspressoSales12Raw;\n}\nelse {\n    delete msg.payload.doubleEspressoSales12Raw;\n}\nmsg.payload.mochaSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Mocha Drink Sales\"));\nif (msg.payload.mochaSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.mochaSales12 = msg.payload.mochaSales12Raw[0].responses.text;\ndelete msg.payload.mochaSales12Raw;\n}\nelse {\n    delete msg.payload.mochaSales12Raw;\n}\nmsg.payload.hotChocolateSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Hot Chocolate Drink Sales\"));\nif (msg.payload.hotChocolateSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.hotChocolateSales12 = msg.payload.hotChocolateSales12Raw[0].responses.text;\ndelete msg.payload.hotChocolateSales12Raw;\n}\nelse {\n    delete msg.payload.hotChocolateSales12Raw;\n}\nmsg.payload.blackTeaSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Black Tea Drink Sales\"));\nif (msg.payload.blackTeaSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.blackTeaSales12 = msg.payload.blackTeaSales12Raw[0].responses.text;\ndelete msg.payload.blackTeaSales12Raw;\n}\nelse {\n    delete msg.payload.blackTeaSales12Raw;\n}\nmsg.payload.whiteTeaSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz White Tea Drink Sales\"));\nif (msg.payload.whiteTeaSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.whiteTeaSales12 = msg.payload.whiteTeaSales12Raw[0].responses.text;\ndelete msg.payload.whiteTeaSales12Raw;\n}\nelse {\n    delete msg.payload.whiteTeaSales12Raw;\n}\nmsg.payload.tomatoSoupSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Tomato Soup Drink Sales\"));\nif (msg.payload.tomatoSoupSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.tomatoSoupSales12 = msg.payload.tomatoSoupSales12Raw[0].responses.text;\ndelete msg.payload.tomatoSoupSales12Raw;\n}\nelse {\n    delete msg.payload.tomatoSoupSales12Raw;\n}\nmsg.payload.caramelSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Caramel Syrup Drink Sales\"));\nif (msg.payload.caramelSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.caramelSales12 = msg.payload.caramelSales12Raw[0].responses.text;\ndelete msg.payload.caramelSales12Raw;\n}\nelse {\n    delete msg.payload.caramelSales12Raw;\n}\nmsg.payload.vanillaSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Vanilla Syrup Drink Sales\"));\nif (msg.payload.vanillaSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.vanillaSales12 = msg.payload.vanillaSales12Raw[0].responses.text;\ndelete msg.payload.vanillaSales12Raw;\n}\nelse {\n    delete msg.payload.vanillaSales12Raw;\n}\nmsg.payload.hazelnutSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Hazelnut Syrup Drink Sales\"));\nif (msg.payload.hazelnutSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.hazelnutSales12 = msg.payload.hazelnutSales12Raw[0].responses.text;\ndelete msg.payload.hazelnutSales12Raw;\n}\nelse {\n    delete msg.payload.hazelnutSales12Raw;\n}\nmsg.payload.hotWaterSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Hot Water For Tea Drink Sales\"));\nif (msg.payload.hotWaterSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.hotWaterSales12 = msg.payload.hotWaterSales12Raw[0].responses.text;\ndelete msg.payload.hotWaterSales12Raw;\n}\nelse {\n    delete msg.payload.hotWaterSales12Raw;\n}\nmsg.payload.dashMilkSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Dash Of Milk Drink Sales\"));\nif (msg.payload.dashMilkSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.dashMilkSales12 = msg.payload.dashMilkSales12Raw[0].responses.text;\ndelete msg.payload.dashMilkSales12Raw;\n}\nelse {\n    delete msg.payload.dashMilkSales12Raw;\n}\nmsg.payload.espressoSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Espresso Drink Sales\"));\nif (msg.payload.espressoSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.espressoSales12 = msg.payload.espressoSales12Raw[0].responses.text;\ndelete msg.payload.espressoSales12Raw;\n}\nelse {\n    delete msg.payload.espressoSales12Raw;\n}\nmsg.payload.teaDrinkSales12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Tea Drink Sales\"));\nif (msg.payload.teaDrinkSales12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.teaDrinkSales12 = msg.payload.teaDrinkSales12Raw[0].responses.text;\ndelete msg.payload.teaDrinkSales12Raw;\n}\nelse {\n    delete msg.payload.teaDrinkSales12Raw;\n}\nmsg.payload.cappuccinoSales16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Cappuccino Drink Sales\"));\nif (msg.payload.cappuccinoSales16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.cappuccinoSales16 = msg.payload.cappuccinoSales16Raw[0].responses.text;\ndelete msg.payload.cappuccinoSales16Raw;\n}\nelse {\n    delete msg.payload.cappuccinoSales16Raw;\n}\nmsg.payload.americanoSales16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Americano Drink Sales\"));\nif (msg.payload.americanoSales16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.americanoSales16 = msg.payload.americanoSales16Raw[0].responses.text;\ndelete msg.payload.americanoSales16Raw;\n}\nelse {\n    delete msg.payload.americanoSales16Raw;\n}\nmsg.payload.latteSales16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Latte Drink Sales\"));\nif (msg.payload.latteSales16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.latteSales16 = msg.payload.latteSales16Raw[0].responses.text;\ndelete msg.payload.latteSales16Raw;\n}\nelse {\n    delete msg.payload.latteSales16Raw;\n}\nmsg.payload.flatWhiteSales16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Flat White Drink Sales\"));\nif (msg.payload.flatWhiteSales16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.flatWhiteSales16 = msg.payload.flatWhiteSales16Raw[0].responses.text;\ndelete msg.payload.flatWhiteSales16Raw;\n}\nelse {\n    delete msg.payload.flatWhiteSales16Raw;\n}\nmsg.payload.hotChocolateSales16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Hot Chocolate Drink Sales\"));\nif (msg.payload.hotChocolateSales16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.hotChocolateSales16 = msg.payload.hotChocolateSales16Raw[0].responses.text;\ndelete msg.payload.hotChocolateSales16Raw;\n}\nelse {\n    delete msg.payload.hotChocolateSales16Raw;\n}\nmsg.payload.mochaSales16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Mocha Drink Sales\"));\nif (msg.payload.mochaSales16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.mochaSales16 = msg.payload.mochaSales16Raw[0].responses.text;\ndelete msg.payload.mochaSales16Raw;\n}\nelse {\n    delete msg.payload.mochaSales16Raw;\n}\nmsg.payload.teaDrinkSales16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Tea Drink Sales\"));\nif (msg.payload.teaDrinkSales16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.teaDrinkSales16 = msg.payload.teaDrinkSales16Raw[0].responses.text;\ndelete msg.payload.teaDrinkSales16Raw;\n}\nelse {\n    delete msg.payload.teaDrinkSales16Raw;\n}\nmsg.payload.cappuccinoTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Cappuccino Test Vends\"));\nif (msg.payload.cappuccinoTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.cappuccinoTest12 = msg.payload.cappuccinoTest12Raw[0].responses.text;\ndelete msg.payload.cappuccinoTest12Raw;\n}\nelse {\n    delete msg.payload.cappuccinoTest12Raw;\n}\nmsg.payload.latteTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Latte Test Vends\"));\nif (msg.payload.latteTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.latteTest12 = msg.payload.latteTest12Raw[0].responses.text;\ndelete msg.payload.latteTest12Raw;\n}\nelse {\n    delete msg.payload.latteTest12Raw;\n}\nmsg.payload.whiteCoffeeTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz White Coffee Test Vends\"));\nif (msg.payload.whiteCoffeeTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.whiteCoffeeTest12 = msg.payload.whiteCoffeeTest12Raw[0].responses.text;\ndelete msg.payload.whiteCoffeeTest12Raw;\n}\nelse {\n    delete msg.payload.whiteCoffeeTest12Raw;\n}\nmsg.payload.americanoTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Americano Test Vends\"));\nif (msg.payload.americanoTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.americanoTest12 = msg.payload.americanoTest12Raw[0].responses.text;\ndelete msg.payload.americanoTest12Raw;\n}\nelse {\n    delete msg.payload.americanoTest12Raw;\n}\nmsg.payload.flatWhiteTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Flat White Test Vends\"));\nif (msg.payload.flatWhiteTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.flatWhiteTest12 = msg.payload.flatWhiteTest12Raw[0].responses.text;\ndelete msg.payload.flatWhiteTest12Raw;\n}\nelse {\n    delete msg.payload.flatWhiteTest12Raw;\n}\nmsg.payload.doubleEspressoTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Double Espresso Test Vends\"));\nif (msg.payload.doubleEspressoTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.doubleEspressoTest12 = msg.payload.doubleEspressoTest12Raw[0].responses.text;\ndelete msg.payload.doubleEspressoTest12Raw;\n}\nelse {\n    delete msg.payload.doubleEspressoTest12Raw;\n}\nmsg.payload.mochaTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Mocha Test Vends\"));\nif (msg.payload.mochaTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.mochaTest12 = msg.payload.mochaTest12Raw[0].responses.text;\ndelete msg.payload.mochaTest12Raw;\n}\nelse {\n    delete msg.payload.mochaTest12Raw;\n}\nmsg.payload.hotChocolateTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Hot Chocolate Test Vends\"));\nif (msg.payload.hotChocolateTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.hotChocolateTest12 = msg.payload.hotChocolateTest12Raw[0].responses.text;\ndelete msg.payload.hotChocolateTest12Raw;\n}\nelse {\n    delete msg.payload.hotChocolateTest12Raw;\n}\nmsg.payload.blackTeaTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Black Tea Test Vends\"));\nif (msg.payload.blackTeaTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.blackTeaTest12 = msg.payload.blackTeaTest12Raw[0].responses.text;\ndelete msg.payload.blackTeaTest12Raw;\n}\nelse {\n    delete msg.payload.blackTeaTest12Raw;\n}\nmsg.payload.whiteTeaTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz White Tea Test Vends\"));\nif (msg.payload.whiteTeaTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.whiteTeaTest12 = msg.payload.whiteTeaTest12Raw[0].responses.text;\ndelete msg.payload.whiteTeaTest12Raw;\n}\nelse {\n    delete msg.payload.whiteTeaTest12Raw;\n}\nmsg.payload.tomatoSoupTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Tomato Soup Test Vends\"));\nif (msg.payload.tomatoSoupTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.tomatoSoupTest12 = msg.payload.tomatoSoupTest12Raw[0].responses.text;\ndelete msg.payload.tomatoSoupTest12Raw;\n}\nelse {\n    delete msg.payload.tomatoSoupTest12Raw;\n}\nmsg.payload.caramelTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Caramel Syrup Test Vends\"));\nif (msg.payload.caramelTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.caramelTest12 = msg.payload.caramelTest12Raw[0].responses.text;\ndelete msg.payload.caramelTest12Raw;\n}\nelse {\n    delete msg.payload.caramelTest12Raw;\n}\nmsg.payload.vanillaTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Vanilla Syrup Test Vends\"));\nif (msg.payload.vanillaTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.vanillaTest12 = msg.payload.vanillaTest12Raw[0].responses.text;\ndelete msg.payload.vanillaTest12Raw;\n}\nelse {\n    delete msg.payload.vanillaTest12Raw;\n}\nmsg.payload.hazelnutTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Hazelnut Syrup Test Vends\"));\nif (msg.payload.hazelnutTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.hazelnutTest12 = msg.payload.hazelnutTest12Raw[0].responses.text;\ndelete msg.payload.hazelnutTest12Raw;\n}\nelse {\n    delete msg.payload.hazelnutTest12Raw;\n}\nmsg.payload.hotWaterTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Hot Water For Tea Test Vends\"));\nif (msg.payload.hotWaterTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.hotWaterTest12 = msg.payload.hotWaterTest12Raw[0].responses.text;\ndelete msg.payload.hotWaterTest12Raw;\n}\nelse {\n    delete msg.payload.hotWaterTest12Raw;\n}\nmsg.payload.dashMilkTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Dash Of Milk Test Vends\"));\nif (msg.payload.dashMilkTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.dashMilkTest12 = msg.payload.dashMilkTest12Raw[0].responses.text;\ndelete msg.payload.dashMilkTest12Raw;\n}\nelse {\n    delete msg.payload.dashMilkTest12Raw;\n}\nmsg.payload.espressoTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Espresso Test Vends\"));\nif (msg.payload.espressoTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.espressoTest12 = msg.payload.espressoTest12Raw[0].responses.text;\ndelete msg.payload.espressoTest12Raw;\n}\nelse {\n    delete msg.payload.espressoTest12Raw;\n}\nmsg.payload.teaDrinkTest12Raw = msg.payload.items.filter (el => el.label.includes (\"12oz Tea Test Vends\"));\nif (msg.payload.teaDrinkTest12Raw.hasOwnProperty(\"0\")) {\nmsg.payload.teaDrinkTest12 = msg.payload.teaDrinkTest12Raw[0].responses.text;\ndelete msg.payload.teaDrinkTest12Raw;\n}\nelse {\n    delete msg.payload.teaDrinkTest12Raw;\n}\nmsg.payload.cappuccinoTest16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Cappuccino Test Vends\"));\nif (msg.payload.cappuccinoTest16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.cappuccinoTest16 = msg.payload.cappuccinoTest16Raw[0].responses.text;\ndelete msg.payload.cappuccinoTest16Raw;\n}\nelse {\n    delete msg.payload.cappuccinoTest16Raw;\n}\nmsg.payload.americanoTest16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Americano Test Vends\"));\nif (msg.payload.americanoTest16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.americanoTest16 = msg.payload.americanoTest16Raw[0].responses.text;\ndelete msg.payload.americanoTest16Raw;\n}\nelse {\n    delete msg.payload.americanoTest16Raw;\n}\nmsg.payload.latteTest16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Latte Test Vends\"));\nif (msg.payload.latteTest16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.latteTest16 = msg.payload.latteTest16Raw[0].responses.text;\ndelete msg.payload.latteTest16Raw;\n}\nelse {\n    delete msg.payload.latteTest16Raw;\n}\nmsg.payload.flatWhiteTest16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Flat White Test Vends\"));\nif (msg.payload.flatWhiteTest16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.flatWhiteTest16 = msg.payload.flatWhiteTest16Raw[0].responses.text;\ndelete msg.payload.flatWhiteTest16Raw;\n}\nelse {\n    delete msg.payload.flatWhiteTest16Raw;\n}\nmsg.payload.hotChocolateTest16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Hot Chocolate Test Vends\"));\nif (msg.payload.hotChocolateTest16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.hotChocolateTest16 = msg.payload.hotChocolateTest16Raw[0].responses.text;\ndelete msg.payload.hotChocolateTest16Raw;\n}\nelse {\n    delete msg.payload.hotChocolateTest16Raw;\n}\nmsg.payload.mochaTest16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Mocha Test Vends\"));\nif (msg.payload.mochaTest16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.mochaTest16 = msg.payload.mochaTest16Raw[0].responses.text;\ndelete msg.payload.mochaTest16Raw;\n}\nelse {\n    delete msg.payload.mochaTest16Raw;\n}\nmsg.payload.teaDrinkTest16Raw = msg.payload.items.filter (el => el.label.includes (\"16oz Tea Drink Test Vends\"));\nif (msg.payload.teaDrinkTest16Raw.hasOwnProperty(\"0\")) {\nmsg.payload.teaDrinkTest16 = msg.payload.teaDrinkTest16Raw[0].responses.text;\ndelete msg.payload.teaDrinkTest16Raw;\n}\nelse {\n    delete msg.payload.teaDrinkTest16Raw;\n}\n\ndelete msg.payload.template_id;\ndelete msg.payload.audit_id;\ndelete msg.payload.archived;\ndelete msg.payload.created_at;\ndelete msg.payload.modified_at;\ndelete msg.payload.audit_data;\ndelete msg.payload.template_data;\ndelete msg.payload.header_items;\ndelete msg.payload.items;\ndelete msg.payload.serialNoRaw;\ndelete msg.payload.storeNumberRaw;\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 200,
        "y": 80,
        "wires": [
            [
                "abd7b3bc.aa2c4",
                "251b0c03.b867cc"
            ]
        ]
    },
    {
        "id": "abd7b3bc.aa2c4",
        "type": "debug",
        "z": "5f5d909a.167008",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 410,
        "y": 140,
        "wires": []
    },
    {
        "id": "251b0c03.b867cc",
        "type": "bigquery insert",
        "z": "5f5d909a.167008",
        "bigquery": "e288eb3f.29a54",
        "dataset": "iAuditor_Counter_Readings",
        "table": "counterReadings",
        "name": "Write Data in BigQuery",
        "x": 450,
        "y": 80,
        "wires": []
    },
    {
        "id": "54774b36.ae78f4",
        "type": "subflow:5f5d909a.167008",
        "z": "81053105.60e14",
        "name": "Stream meter readings",
        "env": [],
        "x": 940,
        "y": 140,
        "wires": []
    },
    {
        "id": "d8b5e2c7.b68ae",
        "type": "http in",
        "z": "81053105.60e14",
        "name": "Receive New Visit Report",
        "url": "/new_visit_report_from_power_automate",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 1490,
        "y": 340,
        "wires": [
            [
                "8e49fdeb.74bc4",
                "bb1f64ec.cad0b"
            ]
        ]
    },
    {
        "id": "8e49fdeb.74bc4",
        "type": "debug",
        "z": "81053105.60e14",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1740,
        "y": 320,
        "wires": []
    },
    {
        "id": "bb1f64ec.cad0b",
        "type": "http response",
        "z": "81053105.60e14",
        "name": "Send http response",
        "statusCode": "200",
        "headers": {},
        "x": 1750,
        "y": 360,
        "wires": []
    },
    {
        "id": "459d120a.d330ac",
        "type": "switch",
        "z": "81053105.60e14",
        "name": "Site name filter",
        "property": "payload[1].audit_data.site.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Southern Co-Op ",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "McColl",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "Chelmsford",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 280,
        "y": 520,
        "wires": [
            [
                "3e2a2dfc.f375aa"
            ],
            [
                "90d97374.372c58"
            ],
            [
                "3a721fa7.4330d8"
            ]
        ]
    },
    {
        "id": "3e2a2dfc.f375aa",
        "type": "switch",
        "z": "81053105.60e14",
        "name": "Southern Co-op score filter",
        "property": "msg.payload[1].audit_data.score_percentage",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "70",
                "vt": "str"
            },
            {
                "t": "gt",
                "v": "70",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "100",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 560,
        "y": 480,
        "wires": [
            [
                "85591aa.686e668"
            ],
            [
                "4bab0e2a.cf785"
            ],
            [
                "3755d056.f63f7"
            ]
        ]
    },
    {
        "id": "85591aa.686e668",
        "type": "function",
        "z": "81053105.60e14",
        "name": "Below 70%",
        "func": "var machineType = msg.payload[1].machineType[0].responses.selected[0].label;\nvar machineCleanliness = msg.payload[1].machineCleanliness[0].responses.selected[0].label;\nvar posCondition = msg.payload[1].posCondition[0].responses.selected[0].label;\nvar signoffSheets = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar trainingRequired = msg.payload[1].trainingRequired[0].responses.selected[0].label;\nvar operatingManual = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar author = msg.payload[1].audit_data.authorship.owner;\nvar site = msg.payload[1].audit_data.site.name;\nvar reportWebLink = msg.payload[0].url;\nvar visitScore = msg.payload[1].audit_data.score_percentage.toString().slice(0, 5);\nvar serialNo = msg.payload[1].serialNo[0].responses.text;\nvar date_completed = msg.payload[1].audit_data.date_completed;\nvar dateCompleted = msg.payload[1].audit_data.date_completed.toString().slice(0, 10);\nvar timeCompleted = msg.payload[1].audit_data.date_completed.toString().slice(11, 19);\nvar rawFeedback = msg.payload[1].feedback[0].responses.text;\nvar visitStatus = msg.payload[1].visitStatus;\nvar storeNumber = msg.payload[1].storeNumber[0].responses.text;\nvar score = msg.payload[1].audit_data.score;\nvar maxScore = msg.payload[1].audit_data.total_score;\nvar feedback = rawFeedback.toString().replace(/(\\r\\n|\\n|\\r|[\"'])/gm, \" \");\nvar toEmail = \"ryan.rich@expressoplus.com\";\nvar toName = \"Ryan Rich\";\nmsg.headers = {};\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 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\";\nmsg.url = \"https://api.sendgrid.com/v3/mail/send\";\nmsg.method = \"POST\";\nmsg.payload= '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"alex.perjescu@expressoplus.com\",\"name\":\"eP Team\"},{\"email\":\"ryan.rich@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"templateId\":25,\"subject\":\"=?utf-8?Q?=F0=9F=94=B4?= Fail: '+ storeNumber +' '+ site +' | '+ visitStatus +' '+ visitScore +'%\",\"params\":{\"site\":\"' + site + '\",\"machineType\":\"' + machineType + '\",\"visitScore\":\"' + visitScore + '\",\"posCondition\":\"' + posCondition +'\",\"machineCleanliness\":\"'+ machineCleanliness +'\",\"operatingManual\":\"' + operatingManual + '\",\"signoffSheets\":\"' + signoffSheets + '\",\"trainingRequired\":\"' + trainingRequired + '\",\"author\":\"' + author +'\",\"reportWebLink\":\"' + reportWebLink + '\",\"serialNo\":\"' + serialNo + '\",\"date_completed\":\"'+ dateCompleted +'\",\"time_completed\":\"'+ timeCompleted +'\",\"feedback\":\"'+ feedback +'\",\"visitStatus\":\"'+ visitStatus +'\",\"storeNumber\":\"'+ storeNumber +'\",\"score\":\"'+ score +'\",\"maxScore\":\"'+ maxScore +'\"}}';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 830,
        "y": 440,
        "wires": [
            [
                "3568bef1.ee521a"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "f51f4d87.df92e",
        "type": "function",
        "z": "81053105.60e14",
        "name": "Amber Pass",
        "func": "var machineType = msg.payload[1].machineType[0].responses.selected[0].label;\nvar machineCleanliness = msg.payload[1].machineCleanliness[0].responses.selected[0].label;\nvar posCondition = msg.payload[1].posCondition[0].responses.selected[0].label;\nvar signoffSheets = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar trainingRequired = msg.payload[1].trainingRequired[0].responses.selected[0].label;\nvar operatingManual = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar author = msg.payload[1].audit_data.authorship.owner;\nvar site = msg.payload[1].audit_data.site.name;\nvar reportWebLink = msg.payload[0].url;\nvar visitScore = msg.payload[1].audit_data.score_percentage.toString().slice(0, 5);\nvar serialNo = msg.payload[1].serialNo[0].responses.text;\nvar date_completed = msg.payload[1].audit_data.date_completed;\nvar dateCompleted = msg.payload[1].audit_data.date_completed.toString().slice(0, 10);\nvar timeCompleted = msg.payload[1].audit_data.date_completed.toString().slice(11, 19);\nvar rawFeedback = msg.payload[1].feedback[0].responses.text;\nvar visitStatus = msg.payload[1].visitStatus;\nvar storeNumber = msg.payload[1].storeNumber[0].responses.text;\nvar score = msg.payload[1].audit_data.score;\nvar maxScore = msg.payload[1].audit_data.total_score;\nvar feedback = rawFeedback.toString().replace(/(\\r\\n|\\n|\\r|[\"'])/gm, \" \");\nvar toEmail = \"ryan.rich@expressoplus.com\";\nvar toName = \"Ryan Rich\";\nmsg.headers = {};\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 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\";\nmsg.url = \"https://api.sendgrid.com/v3/mail/send\";\nmsg.method = \"POST\";\nmsg.payload= '{ \"personalizations\": [ { \"to\": [ { \"email\": \"'+ toEmail +'\", \"name\": \"'+ toName +'\" } ], \"dynamic_template_data\": { \"site\": \"' + site + '\", \"machineType\": \"' + machineType + '\", \"visitScore\": \"' + visitScore + '\", \"posCondition\": \"' + posCondition +'\", \"machineCleanliness\": \"'+ machineCleanliness +'\", \"operatingManual\": \"' + operatingManual + '\", \"signoffSheets\": \"' + signoffSheets + '\", \"trainingRequired\": \"' + trainingRequired + '\", \"author\": \"' + author +'\", \"reportWebLink\": \"' + reportWebLink + '\", \"serialNo\": \"' + serialNo + '\", \"date_completed\": \"'+ dateCompleted +'\", \"time_completed\": \"'+ timeCompleted +'\", \"feedback\": \"'+ feedback +'\", \"visitStatus\": \"'+ visitStatus +'\", \"storeNumber\": \"'+ storeNumber +'\", \"score\": \"'+ score +'\", \"maxScore\": \"'+ maxScore +'\" }, \"subject\": \"Amber Pass: '+ storeNumber +' '+ site +' | '+ visitStatus +' '+ visitScore +'%\" } ], \"from\": { \"email\": \"robot@expressoplus.com\", \"name\": \"eP Robot\" }, \"reply_to\": { \"email\": \"transactional@expressoplus.com\", \"name\": \"eXpresso PLUS\" }, \"template_id\": \"d-bdf56e3665184f17ab53a512062ac3dc\" }';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1230,
        "y": 500,
        "wires": [
            [
                "3568bef1.ee521a"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "3755d056.f63f7",
        "type": "function",
        "z": "81053105.60e14",
        "name": "100%",
        "func": "var machineType = msg.payload[1].machineType[0].responses.selected[0].label;\nvar machineCleanliness = msg.payload[1].machineCleanliness[0].responses.selected[0].label;\nvar posCondition = msg.payload[1].posCondition[0].responses.selected[0].label;\nvar signoffSheets = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar trainingRequired = msg.payload[1].trainingRequired[0].responses.selected[0].label;\nvar operatingManual = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar author = msg.payload[1].audit_data.authorship.owner;\nvar site = msg.payload[1].audit_data.site.name;\nvar reportWebLink = msg.payload[0].url;\nvar visitScore = msg.payload[1].audit_data.score_percentage.toString().slice(0, 5);\nvar serialNo = msg.payload[1].serialNo[0].responses.text;\nvar date_completed = msg.payload[1].audit_data.date_completed;\nvar dateCompleted = msg.payload[1].audit_data.date_completed.toString().slice(0, 10);\nvar timeCompleted = msg.payload[1].audit_data.date_completed.toString().slice(11, 19);\nvar rawFeedback = msg.payload[1].feedback[0].responses.text;\nvar visitStatus = msg.payload[1].visitStatus;\nvar storeNumber = msg.payload[1].storeNumber[0].responses.text;\nvar score = msg.payload[1].audit_data.score;\nvar maxScore = msg.payload[1].audit_data.total_score;\nvar feedback = rawFeedback.toString().replace(/(\\r\\n|\\n|\\r|[\"'])/gm, \" \");\nvar toEmail = \"ryan.rich@expressoplus.com\";\nvar toName = \"Ryan Rich\";\nmsg.headers = {};\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 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\";\nmsg.url = \"https://api.sendgrid.com/v3/mail/send\";\nmsg.method = \"POST\";\nmsg.payload= '{ \"personalizations\": [ { \"to\": [ { \"email\": \"'+ toEmail +'\", \"name\": \"'+ toName +'\" } ], \"dynamic_template_data\": { \"site\": \"' + site + '\", \"machineType\": \"' + machineType + '\", \"visitScore\": \"' + visitScore + '\", \"posCondition\": \"' + posCondition +'\", \"machineCleanliness\": \"'+ machineCleanliness +'\", \"operatingManual\": \"' + operatingManual + '\", \"signoffSheets\": \"' + signoffSheets + '\", \"trainingRequired\": \"' + trainingRequired + '\", \"author\": \"' + author +'\", \"reportWebLink\": \"' + reportWebLink + '\", \"serialNo\": \"' + serialNo + '\", \"date_completed\": \"'+ dateCompleted +'\", \"time_completed\": \"'+ timeCompleted +'\", \"feedback\": \"'+ feedback +'\", \"visitStatus\": \"'+ visitStatus +'\", \"storeNumber\": \"'+ storeNumber +'\", \"score\": \"'+ score +'\", \"maxScore\": \"'+ maxScore +'\" }, \"subject\": \"100% Pass: '+ storeNumber +' '+ site +' | '+ visitStatus +' '+ visitScore +'%\" } ], \"from\": { \"email\": \"robot@expressoplus.com\", \"name\": \"eP Robot\" }, \"reply_to\": { \"email\": \"transactional@expressoplus.com\", \"name\": \"eXpresso PLUS\" }, \"template_id\": \"d-bdf56e3665184f17ab53a512062ac3dc\" }';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 810,
        "y": 520,
        "wires": [
            [
                "3568bef1.ee521a"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "3568bef1.ee521a",
        "type": "http request",
        "z": "81053105.60e14",
        "name": "Send email via Sendgrid",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1550,
        "y": 540,
        "wires": [
            [
                "42053acb.5a0d2c"
            ]
        ]
    },
    {
        "id": "42053acb.5a0d2c",
        "type": "debug",
        "z": "81053105.60e14",
        "name": "Report email status",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1770,
        "y": 540,
        "wires": []
    },
    {
        "id": "90d97374.372c58",
        "type": "function",
        "z": "81053105.60e14",
        "name": "McColl's",
        "func": "var machineType = msg.payload[1].machineType[0].responses.selected[0].label;\nvar machineCleanliness = msg.payload[1].machineCleanliness[0].responses.selected[0].label;\nvar posCondition = msg.payload[1].posCondition[0].responses.selected[0].label;\nvar signoffSheets = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar trainingRequired = msg.payload[1].trainingRequired[0].responses.selected[0].label;\nvar operatingManual = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar author = msg.payload[1].audit_data.authorship.owner;\nvar site = msg.payload[1].audit_data.site.name;\nvar reportWebLink = msg.payload[0].url;\nvar visitScore = msg.payload[1].audit_data.score_percentage.toString().slice(0, 5);\nvar serialNo = msg.payload[1].serialNo[0].responses.text;\nvar date_completed = msg.payload[1].audit_data.date_completed;\nvar dateCompleted = msg.payload[1].audit_data.date_completed.toString().slice(0, 10);\nvar timeCompleted = msg.payload[1].audit_data.date_completed.toString().slice(11, 19);\nvar rawFeedback = msg.payload[1].feedback[0].responses.text;\nvar visitStatus = msg.payload[1].visitStatus;\nvar storeNumber = msg.payload[1].storeNumber[0].responses.text;\nvar score = msg.payload[1].audit_data.score;\nvar maxScore = msg.payload[1].audit_data.total_score;\nvar feedback = rawFeedback.toString().replace(/(\\r\\n|\\n|\\r|[\"'])/gm, \" \");\nvar toEmail = \"ryan.rich@expressoplus.com\";\nvar toName = \"Ryan Rich\";\nvar toEmail2 = \"NBird@mccolls.co.uk\";\nvar toName2 = \"Nicole Bird\";\nmsg.headers = {};\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 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\";\nmsg.url = \"https://api.sendgrid.com/v3/mail/send\";\nmsg.method = \"POST\";\nmsg.payload= '{ \"personalizations\": [ { \"to\": [ { \"email\": \"'+ toEmail +'\", \"name\": \"'+ toName +'\" },{ \"email\": \"'+ toEmail2 +'\", \"name\": \"'+ toName2 +'\" } ], \"dynamic_template_data\": { \"site\": \"' + site + '\", \"machineType\": \"' + machineType + '\", \"visitScore\": \"' + visitScore + '\", \"posCondition\": \"' + posCondition +'\", \"machineCleanliness\": \"'+ machineCleanliness +'\", \"operatingManual\": \"' + operatingManual + '\", \"signoffSheets\": \"' + signoffSheets + '\", \"trainingRequired\": \"' + trainingRequired + '\", \"author\": \"' + author +'\", \"reportWebLink\": \"' + reportWebLink + '\", \"serialNo\": \"' + serialNo + '\", \"date_completed\": \"'+ dateCompleted +'\", \"time_completed\": \"'+ timeCompleted +'\", \"feedback\": \"'+ feedback +'\", \"visitStatus\": \"'+ visitStatus +'\", \"storeNumber\": \"'+ storeNumber +'\", \"score\": \"'+ score +'\", \"maxScore\": \"'+ maxScore +'\" }, \"subject\": \"'+ storeNumber +' '+ site +' | '+ visitStatus +' '+ visitScore +'%\" } ], \"from\": { \"email\": \"robot@expressoplus.com\", \"name\": \"eP Robot\" }, \"reply_to\": { \"email\": \"transactional@expressoplus.com\", \"name\": \"eXpresso PLUS\" }, \"template_id\": \"d-bdf56e3665184f17ab53a512062ac3dc\" }';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1220,
        "y": 560,
        "wires": [
            [
                "3568bef1.ee521a"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "3a721fa7.4330d8",
        "type": "function",
        "z": "81053105.60e14",
        "name": "Chelmsford Star",
        "func": "var machineType = msg.payload[1].machineType[0].responses.selected[0].label;\nvar machineCleanliness = msg.payload[1].machineCleanliness[0].responses.selected[0].label;\nvar posCondition = msg.payload[1].posCondition[0].responses.selected[0].label;\nvar signoffSheets = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar trainingRequired = msg.payload[1].trainingRequired[0].responses.selected[0].label;\nvar operatingManual = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar author = msg.payload[1].audit_data.authorship.owner;\nvar site = msg.payload[1].audit_data.site.name;\nvar reportWebLink = msg.payload[0].url;\nvar visitScore = msg.payload[1].audit_data.score_percentage.toString().slice(0, 5);\nvar serialNo = msg.payload[1].serialNo[0].responses.text;\nvar date_completed = msg.payload[1].audit_data.date_completed;\nvar dateCompleted = msg.payload[1].audit_data.date_completed.toString().slice(0, 10);\nvar timeCompleted = msg.payload[1].audit_data.date_completed.toString().slice(11, 19);\nvar rawFeedback = msg.payload[1].feedback[0].responses.text;\nvar visitStatus = msg.payload[1].visitStatus;\nvar storeNumber = msg.payload[1].storeNumber[0].responses.text;\nvar score = msg.payload[1].audit_data.score;\nvar maxScore = msg.payload[1].audit_data.total_score;\nvar feedback = rawFeedback.toString().replace(/(\\r\\n|\\n|\\r|[\"'])/gm, \" \");\nvar toEmail = \"ryan.rich@expressoplus.com\";\nvar toName = \"Ryan Rich\";\nvar toEmail2 = \"elainep@chelmsfordstar.coop\";\nvar toName2 = \"Elaine Parrot\";\nvar toEmail3 = \"stewartl@chelmsfordstar.coop\";\nvar toName3 = \"Stewart Linehan\";\nmsg.headers = {};\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 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\";\nmsg.url = \"https://api.sendgrid.com/v3/mail/send\";\nmsg.method = \"POST\";\nmsg.payload= '{ \"personalizations\": [ { \"to\": [ { \"email\": \"'+ toEmail +'\", \"name\": \"'+ toName +'\" },{ \"email\": \"'+ toEmail2 +'\", \"name\": \"'+ toName2 +'\" },{ \"email\": \"'+ toEmail3 +'\", \"name\": \"'+ toName3 +'\" } ], \"dynamic_template_data\": { \"site\": \"' + site + '\", \"machineType\": \"' + machineType + '\", \"visitScore\": \"' + visitScore + '\", \"posCondition\": \"' + posCondition +'\", \"machineCleanliness\": \"'+ machineCleanliness +'\", \"operatingManual\": \"' + operatingManual + '\", \"signoffSheets\": \"' + signoffSheets + '\", \"trainingRequired\": \"' + trainingRequired + '\", \"author\": \"' + author +'\", \"reportWebLink\": \"' + reportWebLink + '\", \"serialNo\": \"' + serialNo + '\", \"date_completed\": \"'+ dateCompleted +'\", \"time_completed\": \"'+ timeCompleted +'\", \"feedback\": \"'+ feedback +'\", \"visitStatus\": \"'+ visitStatus +'\", \"storeNumber\": \"'+ storeNumber +'\", \"score\": \"'+ score +'\", \"maxScore\": \"'+ maxScore +'\" }, \"subject\": \"'+ storeNumber +' '+ site +' | '+ visitStatus +' '+ visitScore +'%\" } ], \"from\": { \"email\": \"robot@expressoplus.com\", \"name\": \"eP Robot\" }, \"reply_to\": { \"email\": \"transactional@expressoplus.com\", \"name\": \"eXpresso PLUS\" }, \"template_id\": \"d-bdf56e3665184f17ab53a512062ac3dc\" }';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1240,
        "y": 600,
        "wires": [
            [
                "3568bef1.ee521a"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "65ffe76e.7dc0a8",
        "type": "inject",
        "z": "81053105.60e14",
        "name": "Inject training record",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"version\":\"1.0.0\",\"workflow_id\":\"workflow_3bfe6e653104444297770cc1d2a590e4\",\"event\":{\"date_triggered\":\"2020-10-09T08:53:55.321Z\",\"event_types\":[\"audit_completed\"],\"triggered_by\":{\"type\":\"user\",\"user\":\"user_efa9765283cf4b3e83a1528deda41f23\",\"name\":\"Alex Perjescu\"}},\"data\":{\"audit\":{\"template_id\":\"template_aac36ab20dd74ff68e90f42d88d348f9\",\"audit_id\":\"audit_b69495b3f6ac4555b8eae08ec0aed209\",\"archived\":false,\"created_at\":\"2020-10-08T15:59:58.388Z\",\"modified_at\":\"2020-10-09T08:53:55.301Z\",\"audit_data\":{\"score\":26,\"total_score\":26,\"score_percentage\":100,\"name\":\"Chelmsford Star Co-Op - Duke Street\",\"duration\":97,\"location\":{\"started\":{\"accuracy\":31,\"geometry\":{\"type\":\"Point\",\"coordinates\":[0.4666569,51.737827]}},\"completed\":{\"accuracy\":13.682,\"geometry\":{\"type\":\"Point\",\"coordinates\":[0.4670353,51.7368424]}}},\"authorship\":{\"device_id\":\"8b0b3889698f6a25\",\"owner\":\"Matthew Mason\",\"owner_id\":\"user_664af4d7d7dd425699d5b290f2806e13\",\"author\":\"Alex Perjescu\",\"author_id\":\"user_efa9765283cf4b3e83a1528deda41f23\"},\"date_completed\":\"2020-10-09T08:53:39.000Z\",\"date_modified\":null,\"date_started\":\"2020-10-08T12:48:15.000Z\"},\"template_data\":{\"authorship\":{\"device_id\":\"user_cf5fe8763cde4ff8b42d364eca4e8d7a\",\"owner\":\"Thomas Bennett\",\"owner_id\":\"user_cf5fe8763cde4ff8b42d364eca4e8d7a\",\"author\":\"Ryan Rich\",\"author_id\":\"user_2ec914e33a3546a3aeeb50721e7a41ac\"},\"metadata\":{\"description\":\"To be signed by any staff member trained on an eXpresso PLUS coffee machine. \",\"name\":\"Coffee Machine Training Record\"}},\"header_items\":[{\"item_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"label\":\"Title Page\",\"type\":\"section\",\"scoring\":{\"combined_max_score\":1,\"combined_score\":1,\"combined_score_percentage\":100},\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"5c448aaf-ebcb-4c21-9e8d-b659c6b159d1\",\"e1e1a467-6885-447b-bdc8-565d32dd9b0f\",\"e0b33c9c-6853-42f1-adac-7d9ea2a20b4c\",\"b492538f-2b6d-44e4-b7d1-476951e33648\",\"43c2ab9a-f53b-4047-ad7c-1db05f324349\"]},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"5c448aaf-ebcb-4c21-9e8d-b659c6b159d1\",\"label\":\"Machine Type \",\"type\":\"list\",\"scoring\":{\"max_score\":1,\"score\":1,\"score_percentage\":100},\"options\":{\"weighting\":1,\"response_set\":\"responseset_d783549105814f3a96dfd85b3f601374\",\"is_mandatory\":true,\"multiple_selection\":false},\"responses\":{\"text\":\"\",\"selected\":[\"fd56779e-442b-41a7-bf32-76d2705aabf7\"]}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"e1e1a467-6885-447b-bdc8-565d32dd9b0f\",\"label\":\"Conducted On\",\"type\":\"datetime\",\"options\":{\"weighting\":1,\"is_mandatory\":true,\"enable_date\":true,\"enable_time\":true},\"responses\":{\"datetime\":\"2020-10-08T13:00:37.000Z\"}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"e0b33c9c-6853-42f1-adac-7d9ea2a20b4c\",\"label\":\"Location\",\"type\":\"address\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"location_text\":\"CM1 1JA\"}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"b492538f-2b6d-44e4-b7d1-476951e33648\",\"label\":\"Store Number\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"43c2ab9a-f53b-4047-ad7c-1db05f324349\",\"label\":\"Staff Member Name\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"Nathan \"}}]},\"template\":{\"template_id\":\"template_aac36ab20dd74ff68e90f42d88d348f9\",\"name\":\"Coffee Machine Training Record\"}}}",
        "payloadType": "json",
        "x": 190,
        "y": 180,
        "wires": [
            [
                "638f2202.d40f24"
            ]
        ]
    },
    {
        "id": "99b0d2ca.166168",
        "type": "function",
        "z": "95b26777.8ffd9",
        "name": "Initiate Inspection Export",
        "func": "var auditID = msg.payload.data.audit.audit_id;\nflow.set = ('auditID', auditID);\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/report';\nmsg.method = 'POST';\nmsg.payload = {\n  \"format\": \"PDF\"\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 310,
        "y": 40,
        "wires": [
            [
                "1f5d9cde.fc1213"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "1f5d9cde.fc1213",
        "type": "http request",
        "z": "95b26777.8ffd9",
        "name": "Request PDF generation",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 550,
        "y": 40,
        "wires": [
            [
                "69b6e385.1c8504"
            ]
        ]
    },
    {
        "id": "1d4d87e2.736af",
        "type": "function",
        "z": "95b26777.8ffd9",
        "name": "Generate PDF",
        "func": "var auditID = msg.payload[0].data.audit.audit_id;\nvar exportID = msg.payload[1].messageId;\nmsg.headers = {};\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/report/' + exportID + '';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 440,
        "y": 120,
        "wires": [
            [
                "8cfed18c.3149f"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "8cfed18c.3149f",
        "type": "http request",
        "z": "95b26777.8ffd9",
        "name": "Generate PDF",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 640,
        "y": 120,
        "wires": [
            [
                "dbc89f6e.18c338"
            ]
        ]
    },
    {
        "id": "ad56a94c.c2ca3",
        "type": "join",
        "z": "95b26777.8ffd9",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "3",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 870,
        "y": 260,
        "wires": [
            [
                "2eae9acb.d5b396",
                "be982d18.e8b498"
            ]
        ]
    },
    {
        "id": "dbc89f6e.18c338",
        "type": "switch",
        "z": "95b26777.8ffd9",
        "name": "",
        "property": "payload.status",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SUCCESS",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "IN_PROGRESS",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "FAILED",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 270,
        "y": 200,
        "wires": [
            [
                "30905c34.7f0a84"
            ],
            [
                "f228bd4d.76c948"
            ],
            []
        ]
    },
    {
        "id": "be982d18.e8b498",
        "type": "function",
        "z": "95b26777.8ffd9",
        "name": "Build http request",
        "func": "var pdfURL = msg.payload[2].url;\nvar author = msg.payload[0].audit_data.authorship.owner;\nvar location = msg.payload[0].audit_data.name;\nvar date = msg.payload[0].audit_data.date_completed;\nvar weblink = msg.payload[1].url;\nvar toEmail = \"ryan.rich@expressoplus.com\";\nvar toName = \"Ryan Rich\";\nmsg.headers = {};\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 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\";\nmsg.url = \"https://api.sendgrid.com/v3/mail/send\";\nmsg.method = \"POST\";\nmsg.payload= '{ \"personalizations\": [ { \"to\": [ { \"email\": \"'+ toEmail +'\", \"name\": \"'+ toName +'\" } ], \"dynamic_template_data\": { \"site\": \"' + location + '\", \"author\": \"' + author + '\", \"date\": \"' + date + '\", \"reportWebLink\": \"' + weblink + '\" }, \"subject\": \"'+ location +' | Training Record Sheet\" } ], \"from\": { \"email\": \"robot@expressoplus.com\", \"name\": \"eP Robot\" }, \"reply_to\": { \"email\": \"transactional@expressoplus.com\", \"name\": \"eXpresso PLUS\" }, \"template_id\": \"d-d7c3b6188d254e5ba8753c5998016795\" }';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 270,
        "y": 420,
        "wires": [
            [
                "1821ce4d.4ca7f2"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "1821ce4d.4ca7f2",
        "type": "http request",
        "z": "95b26777.8ffd9",
        "name": "Send email via Sendinblue",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 500,
        "y": 420,
        "wires": [
            [
                "ad782140.3611b8"
            ]
        ]
    },
    {
        "id": "ad782140.3611b8",
        "type": "debug",
        "z": "95b26777.8ffd9",
        "name": "Report email status",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 420,
        "wires": []
    },
    {
        "id": "b902b781.c6413",
        "type": "function",
        "z": "95b26777.8ffd9",
        "name": "Get full audit",
        "func": "var auditID = msg.payload.data.audit.audit_id;\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 250,
        "y": 260,
        "wires": [
            [
                "6c89762d.b2ba18"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "6c89762d.b2ba18",
        "type": "http request",
        "z": "95b26777.8ffd9",
        "name": "Request audit data",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 430,
        "y": 260,
        "wires": [
            [
                "f581fafc.459c78"
            ]
        ]
    },
    {
        "id": "f581fafc.459c78",
        "type": "function",
        "z": "95b26777.8ffd9",
        "name": "Filter info for email",
        "func": "msg.payload.machineType = msg.payload.header_items.filter(el => el.label.includes(\"Machine Type\"));\nmsg.payload.storeNumber = msg.payload.header_items.filter(el => el.label.includes(\"Store Number\"));\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 630,
        "y": 260,
        "wires": [
            [
                "ad56a94c.c2ca3"
            ]
        ]
    },
    {
        "id": "92ee47.deead9b8",
        "type": "http request",
        "z": "95b26777.8ffd9",
        "name": "Request report web link",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 490,
        "y": 320,
        "wires": [
            [
                "ad56a94c.c2ca3"
            ]
        ]
    },
    {
        "id": "3ed7be2c.4ef91a",
        "type": "function",
        "z": "95b26777.8ffd9",
        "name": "Get report web link",
        "func": "var auditID = msg.payload.data.audit.audit_id;\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/web_report_link';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 270,
        "y": 320,
        "wires": [
            [
                "92ee47.deead9b8"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "fff45cc.09a992",
        "type": "subflow:95b26777.8ffd9",
        "z": "81053105.60e14",
        "name": "",
        "env": [],
        "x": 880,
        "y": 60,
        "wires": []
    },
    {
        "id": "30905c34.7f0a84",
        "type": "change",
        "z": "95b26777.8ffd9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.pdfURL",
                "pt": "msg",
                "to": "payload.url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 180,
        "wires": [
            [
                "ad56a94c.c2ca3"
            ]
        ]
    },
    {
        "id": "2eae9acb.d5b396",
        "type": "debug",
        "z": "95b26777.8ffd9",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1120,
        "y": 240,
        "wires": []
    },
    {
        "id": "69b6e385.1c8504",
        "type": "join",
        "z": "95b26777.8ffd9",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "trainingSheet",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 250,
        "y": 80,
        "wires": [
            [
                "f228bd4d.76c948"
            ]
        ]
    },
    {
        "id": "f228bd4d.76c948",
        "type": "delay",
        "z": "95b26777.8ffd9",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 260,
        "y": 120,
        "wires": [
            [
                "1d4d87e2.736af"
            ]
        ]
    },
    {
        "id": "d510e6c3.fbb4c8",
        "type": "delay",
        "z": "95b26777.8ffd9",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 100,
        "y": 320,
        "wires": [
            [
                "3ed7be2c.4ef91a"
            ]
        ]
    },
    {
        "id": "4bab0e2a.cf785",
        "type": "switch",
        "z": "81053105.60e14",
        "name": "not 100%",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "100",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 820,
        "y": 480,
        "wires": [
            [
                "fc1c48a3.262a38"
            ]
        ]
    },
    {
        "id": "c8fdf3c3.a2bfe",
        "type": "function",
        "z": "8f4437ce.91766",
        "name": "Initiate Inspection Export",
        "func": "var auditID = msg.payload.data.audit.audit_id;\nflow.set = ('auditID', auditID);\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/report';\nmsg.method = 'POST';\nmsg.payload = {\n  \"format\": \"PDF\"\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 330,
        "y": 40,
        "wires": [
            [
                "651e3265.e0e0d4"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "651e3265.e0e0d4",
        "type": "http request",
        "z": "8f4437ce.91766",
        "name": "Request PDF generation",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 570,
        "y": 40,
        "wires": [
            [
                "45c0c0b5.52b2d8"
            ]
        ]
    },
    {
        "id": "70ccc48d.9b9424",
        "type": "function",
        "z": "8f4437ce.91766",
        "name": "Generate PDF",
        "func": "var auditID = msg.payload[0].data.audit.audit_id;\nvar exportID = msg.payload[1].messageId;\nmsg.headers = {};\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/report/' + exportID + '';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 460,
        "y": 120,
        "wires": [
            [
                "f6384786.03e9d8"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "f6384786.03e9d8",
        "type": "http request",
        "z": "8f4437ce.91766",
        "name": "Generate PDF",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 660,
        "y": 120,
        "wires": [
            [
                "151d1093.87310f"
            ]
        ]
    },
    {
        "id": "4f6dd0be.86c998",
        "type": "join",
        "z": "8f4437ce.91766",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "3",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 890,
        "y": 260,
        "wires": [
            [
                "d5c00a4d.92576",
                "6508df39.f7d4b8"
            ]
        ]
    },
    {
        "id": "151d1093.87310f",
        "type": "switch",
        "z": "8f4437ce.91766",
        "name": "",
        "property": "payload.status",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SUCCESS",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "IN_PROGRESS",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "FAILED",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 290,
        "y": 200,
        "wires": [
            [
                "41cf5323.a00234"
            ],
            [
                "93b5b8ee.2714d8"
            ],
            []
        ]
    },
    {
        "id": "6508df39.f7d4b8",
        "type": "function",
        "z": "8f4437ce.91766",
        "name": "Build http request",
        "func": "var pdfURL = msg.payload[2].url;\nvar author = msg.payload[0].audit_data.authorship.owner;\nvar location = msg.payload[0].audit_data.name;\nvar date = msg.payload[0].audit_data.date_completed;\nvar weblink = msg.payload[1].url;\nvar surveyLocation = msg.payload[0].surveyLocation[0].responses.location.postal_code;\nvar toEmail = \"ryan.rich@expressoplus.com\";\nvar toName = \"Ryan Rich\";\nmsg.headers = {};\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 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\";\nmsg.url = \"https://api.sendgrid.com/v3/mail/send\";\nmsg.method = \"POST\";\nmsg.payload= '{ \"personalizations\": [ { \"to\": [ { \"email\": \"'+ toEmail +'\", \"name\": \"'+ toName +'\" } ], \"dynamic_template_data\": { \"surveyLocation\": \"' + surveyLocation + '\", \"author\": \"' + author + '\", \"date\": \"' + date + '\", \"reportWebLink\": \"' + weblink + '\" }, \"subject\": \"'+ surveyLocation +' | Site Survey\" } ], \"from\": { \"email\": \"robot@expressoplus.com\", \"name\": \"eP Robot\" }, \"reply_to\": { \"email\": \"transactional@expressoplus.com\", \"name\": \"eXpresso PLUS\" }, \"template_id\": \"d-d7c3b6188d254e5ba8753c5998016795\" }';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 290,
        "y": 420,
        "wires": [
            [
                "bdf6393b.d8acb"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "bdf6393b.d8acb",
        "type": "http request",
        "z": "8f4437ce.91766",
        "name": "Send email via Sendgrid",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 510,
        "y": 420,
        "wires": [
            [
                "3545b835.bdd748"
            ]
        ]
    },
    {
        "id": "3545b835.bdd748",
        "type": "debug",
        "z": "8f4437ce.91766",
        "name": "Report email status",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 420,
        "wires": []
    },
    {
        "id": "53c6fa4e.69a044",
        "type": "function",
        "z": "8f4437ce.91766",
        "name": "Get full audit",
        "func": "var auditID = msg.payload.data.audit.audit_id;\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 270,
        "y": 260,
        "wires": [
            [
                "3d1e0478.294d34"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "3d1e0478.294d34",
        "type": "http request",
        "z": "8f4437ce.91766",
        "name": "Request audit data",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 450,
        "y": 260,
        "wires": [
            [
                "4250e20d.401bbc"
            ]
        ]
    },
    {
        "id": "4250e20d.401bbc",
        "type": "function",
        "z": "8f4437ce.91766",
        "name": "Filter info for email",
        "func": "msg.payload.machineType = msg.payload.header_items.filter(el => el.label.includes(\"Machine Type\"));\nmsg.payload.storeNumber = msg.payload.header_items.filter(el => el.label.includes(\"Store Number\"));\nmsg.payload.surveyLocation = msg.payload.header_items.filter(el => el.label.includes(\"Location\"));\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 650,
        "y": 260,
        "wires": [
            [
                "4f6dd0be.86c998"
            ]
        ]
    },
    {
        "id": "48bedb11.1f8c44",
        "type": "http request",
        "z": "8f4437ce.91766",
        "name": "Request report web link",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 510,
        "y": 320,
        "wires": [
            [
                "4f6dd0be.86c998"
            ]
        ]
    },
    {
        "id": "10ad65bc.0b56c2",
        "type": "function",
        "z": "8f4437ce.91766",
        "name": "Get report web link",
        "func": "var auditID = msg.payload.data.audit.audit_id;\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 9b5db6aa75fe53d7a63c24e5974fcb82128b837eb2dbe43499ce4fdd4f6189ae\";\nmsg.url = 'https://api.safetyculture.io/audits/' + auditID + '/web_report_link';\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 290,
        "y": 320,
        "wires": [
            [
                "48bedb11.1f8c44"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "41cf5323.a00234",
        "type": "change",
        "z": "8f4437ce.91766",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.pdfURL",
                "pt": "msg",
                "to": "payload.url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 180,
        "wires": [
            [
                "4f6dd0be.86c998"
            ]
        ]
    },
    {
        "id": "d5c00a4d.92576",
        "type": "debug",
        "z": "8f4437ce.91766",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1140,
        "y": 240,
        "wires": []
    },
    {
        "id": "45c0c0b5.52b2d8",
        "type": "join",
        "z": "8f4437ce.91766",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "trainingSheet",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 270,
        "y": 80,
        "wires": [
            [
                "93b5b8ee.2714d8"
            ]
        ]
    },
    {
        "id": "93b5b8ee.2714d8",
        "type": "delay",
        "z": "8f4437ce.91766",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 280,
        "y": 120,
        "wires": [
            [
                "70ccc48d.9b9424"
            ]
        ]
    },
    {
        "id": "a6c84aa2.a97f68",
        "type": "delay",
        "z": "8f4437ce.91766",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 120,
        "y": 320,
        "wires": [
            [
                "10ad65bc.0b56c2"
            ]
        ]
    },
    {
        "id": "e6489b71.7ab328",
        "type": "inject",
        "z": "81053105.60e14",
        "name": "Inject site survey",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"version\":\"1.0.0\",\"workflow_id\":\"workflow_3bfe6e653104444297770cc1d2a590e4\",\"event\":{\"date_triggered\":\"2020-12-18T13:46:56.767Z\",\"event_types\":[\"audit_completed\"],\"triggered_by\":{\"type\":\"user\",\"user\":\"user_664af4d7d7dd425699d5b290f2806e13\",\"name\":\"Matthew Mason\"}},\"data\":{\"audit\":{\"template_id\":\"template_036cd16c817d40d28e58c4f5fb04bd00\",\"audit_id\":\"audit_bba27bcf5d5f4d9ebea331f57bb4b791\",\"archived\":false,\"created_at\":\"2020-12-18T13:46:56.669Z\",\"modified_at\":\"2020-12-18T13:46:56.669Z\",\"audit_data\":{\"score\":94,\"total_score\":111,\"score_percentage\":84.685,\"name\":\"18 Dec 2020\",\"duration\":972,\"location\":{\"started\":{\"accuracy\":1000,\"geometry\":{\"type\":\"Point\",\"coordinates\":[0.5188627,52.3493913]}}},\"authorship\":{\"device_id\":\"8b0b3889698f6a25\",\"owner\":\"Matthew Mason\",\"owner_id\":\"user_664af4d7d7dd425699d5b290f2806e13\",\"author\":\"Matthew Mason\",\"author_id\":\"user_664af4d7d7dd425699d5b290f2806e13\"},\"date_completed\":\"2020-12-18T13:46:50.000Z\",\"date_modified\":\"2020-12-18T13:46:50.000Z\",\"date_started\":\"2020-12-18T13:30:30.000Z\"},\"template_data\":{\"authorship\":{\"device_id\":\"user_cf5fe8763cde4ff8b42d364eca4e8d7a\",\"owner\":\"Thomas Bennett\",\"owner_id\":\"user_cf5fe8763cde4ff8b42d364eca4e8d7a\",\"author\":\"Ryan Rich\",\"author_id\":\"user_2ec914e33a3546a3aeeb50721e7a41ac\"},\"metadata\":{\"description\":\"Futuro P Coffee Machine Audit\",\"name\":\"Futuro P Audit\",\"image\":{\"media_id\":\"5d00d70e-a447-4fbc-a2b9-46a3fe7b8752\",\"href\":\"https://api.safetyculture.io/audits/audit_5c7e4567f4a74206bf8e39ceb19edf8f/media/5d00d70e-a447-4fbc-a2b9-46a3fe7b8752\"}}},\"header_items\":[{\"item_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"label\":\"Title Page\",\"type\":\"section\",\"scoring\":{\"combined_score\":1,\"combined_max_score\":1,\"combined_score_percentage\":100},\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"f3245d46-ea77-11e1-aff1-0800200c9a66\",\"1133e9e7-e6eb-46db-be55-6667f556d884\",\"a98b2744-78e8-4b1f-a0e3-75a9f774ea3f\",\"f3245d42-ea77-11e1-aff1-0800200c9a66\",\"f3245d43-ea77-11e1-aff1-0800200c9a66\",\"bd2fe589-9796-4793-9fee-07748de26dd5\",\"f3245d44-ea77-11e1-aff1-0800200c9a66\",\"a075513e-21e8-41d2-bc12-750ba1dfe10d\"]},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"f3245d46-ea77-11e1-aff1-0800200c9a66\",\"label\":\"Document Number\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"FP000049\"}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"1133e9e7-e6eb-46db-be55-6667f556d884\",\"label\":\"Machine Type\",\"type\":\"list\",\"scoring\":{\"score\":1,\"max_score\":1,\"score_percentage\":100},\"options\":{\"weighting\":1,\"response_set\":\"responseset_d783549105814f3a96dfd85b3f601374\",\"is_mandatory\":true,\"multiple_selection\":false},\"responses\":{\"text\":\"\",\"selected\":[\"f250a327-f0af-44cf-b1f1-401c7bdd0d9d\"]}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"a98b2744-78e8-4b1f-a0e3-75a9f774ea3f\",\"label\":\"Machine Serial Number\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"3593\"}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"f3245d42-ea77-11e1-aff1-0800200c9a66\",\"label\":\"Conducted On\",\"type\":\"datetime\",\"options\":{\"weighting\":1,\"is_mandatory\":true,\"enable_date\":true,\"enable_time\":true},\"responses\":{\"datetime\":\"2020-12-18T13:30:30.000Z\"}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"f3245d43-ea77-11e1-aff1-0800200c9a66\",\"label\":\"Prepared By\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"Matthew Mason\"}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"bd2fe589-9796-4793-9fee-07748de26dd5\",\"label\":\"Site Contact\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"Nicola \"}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"f3245d44-ea77-11e1-aff1-0800200c9a66\",\"label\":\"Location\",\"type\":\"address\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"location_text\":\"98 Emmanuel Cl, Mildenhall, Bury Saint Edmunds IP28 7PF, UK\\n(52.348914099999995, 0.5183208)\",\"location\":{\"country\":\"United Kingdom\",\"sub_locality\":null,\"sub_administrative_area\":\"Suffolk\",\"iso_country_code\":\"GB\",\"locality\":\"Mildenhall\",\"name\":\"98\",\"administrative_area\":\"England\",\"postal_code\":\"IP28 7PF\",\"thoroughfare\":\"Emmanuel Close\",\"sub_thoroughfare\":\"98\",\"geometry\":{\"type\":\"Point\",\"coordinates\":[0.5183208,52.348914099999995]}}}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"a075513e-21e8-41d2-bc12-750ba1dfe10d\",\"label\":\"Store Number\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"6491\"}}]},\"template\":{\"template_id\":\"template_036cd16c817d40d28e58c4f5fb04bd00\",\"name\":\"Futuro P Audit\"}}}",
        "payloadType": "json",
        "x": 180,
        "y": 220,
        "wires": [
            [
                "638f2202.d40f24"
            ]
        ]
    },
    {
        "id": "dc521f41.5e3f78",
        "type": "subflow:8f4437ce.91766",
        "z": "81053105.60e14",
        "name": "",
        "env": [],
        "x": 870,
        "y": 100,
        "wires": []
    },
    {
        "id": "20dbb4cc.4ce884",
        "type": "delay",
        "z": "81053105.60e14",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 720,
        "y": 260,
        "wires": [
            [
                "32f1516b.be04be"
            ]
        ]
    },
    {
        "id": "fc1c48a3.262a38",
        "type": "switch",
        "z": "81053105.60e14",
        "name": "Filter by Operating Manual",
        "property": "payload[1].operatingManual[0].responses.selected[0].label",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Present & Filled In",
                "vt": "str"
            },
            {
                "t": "neq",
                "v": "Present & Filled In",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1020,
        "y": 480,
        "wires": [
            [
                "220131e1.352fce"
            ],
            [
                "f51f4d87.df92e"
            ]
        ]
    },
    {
        "id": "cb3147d0.2595d",
        "type": "inject",
        "z": "81053105.60e14",
        "name": "Inject site audit",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"template_id\":\"template_0ab45897e28c45f78dbc8065976ea6ee\",\"audit_id\":\"audit_fb100ee6fb5c48acb754b2c5535af9f9\",\"archived\":false,\"created_at\":\"2020-11-04T18:13:57.371Z\",\"modified_at\":\"2020-11-05T08:03:30.032Z\",\"audit_data\":{\"score\":118,\"total_score\":131,\"score_percentage\":90.076,\"name\":\"Southern Co-Op - Bognor Regis, Hawthorne Road\",\"duration\":3156,\"location\":{\"started\":{\"accuracy\":17.763,\"geometry\":{\"type\":\"Point\",\"coordinates\":[-0.6862722,50.789852]}},\"completed\":{\"accuracy\":13.245,\"geometry\":{\"type\":\"Point\",\"coordinates\":[-0.6861463,50.7897552]}}},\"authorship\":{\"device_id\":\"8b0b3889698f6a25\",\"owner\":\"Matthew Mason\",\"owner_id\":\"user_664af4d7d7dd425699d5b290f2806e13\",\"author\":\"Matthew Mason\",\"author_id\":\"user_664af4d7d7dd425699d5b290f2806e13\"},\"date_completed\":\"2020-11-04T18:13:46.000Z\",\"date_modified\":\"2020-11-04T18:13:46.000Z\",\"date_started\":\"2020-11-04T16:42:59.000Z\",\"site\":{\"name\":\"Southern Co-Op - Bognor Regis, Hawthorne Road\",\"area\":{\"name\":\"PO21 2UR\"},\"region\":{\"name\":\"England\"}}},\"template_data\":{\"authorship\":{\"device_id\":\"user_efa9765283cf4b3e83a1528deda41f23\",\"owner\":\"Alex Perjescu\",\"owner_id\":\"user_efa9765283cf4b3e83a1528deda41f23\",\"author\":\"Ryan Rich\",\"author_id\":\"user_2ec914e33a3546a3aeeb50721e7a41ac\"},\"metadata\":{\"description\":\"Lavazza Lusso Coffee Machine Audit\",\"name\":\"Lavazza Lusso Audit\",\"image\":{\"date_created\":\"2020-07-06T09:18:04.000Z\",\"file_ext\":\"png\",\"label\":\"Lusso.PNG\",\"media_id\":\"074047e9-ddb7-4708-897d-52826e963b46\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/074047e9-ddb7-4708-897d-52826e963b46\"}},\"response_sets\":{\"0acb7300-4d76-46ce-85ac-43c62afbddf1\":{\"id\":\"0acb7300-4d76-46ce-85ac-43c62afbddf1\",\"type\":\"question\",\"responses\":[{\"id\":\"9db6ab0b-6c94-4cc9-9881-b226c8a4090f\",\"label\":\"Very Good\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"1afa6f06-07e5-421a-a5db-4eb4810ad53f\",\"label\":\"Good\",\"colour\":\"129,181,50\",\"score\":1,\"enable_score\":false},{\"id\":\"f1c8f8ed-70d7-4f5c-a5bb-551d54dd5810\",\"label\":\"Satisfactory\",\"colour\":\"255,176,0\",\"score\":1,\"enable_score\":false},{\"id\":\"08f494d8-a40f-4108-8bb0-9339111629e4\",\"label\":\"Poor\",\"colour\":\"254,133,0\",\"score\":1,\"enable_score\":false},{\"id\":\"8b6ecf16-8db0-45de-acae-036da2021182\",\"label\":\"Very Poor\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false}]},\"234faa20-40fb-40fc-932b-bc3d5833d00b\":{\"id\":\"234faa20-40fb-40fc-932b-bc3d5833d00b\",\"type\":\"question\",\"responses\":[{\"id\":\"448d804d-bd38-4fcb-9414-3b5b0194baa2\",\"label\":\"Present & Filled In\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"d2cea458-28c7-4924-ac9e-478added11fa\",\"label\":\"Present & Not Filled In\",\"colour\":\"255,176,0\",\"score\":1,\"enable_score\":false},{\"id\":\"a20d6264-c4fa-4adb-8cd1-4023dec45a15\",\"label\":\"Not Present\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false},{\"id\":\"39e23975-c94e-4047-92a0-f824ce7ce57e\",\"label\":\"Other\",\"colour\":\"112,112,112\",\"score\":1,\"enable_score\":false}]},\"264cf413-24d4-4299-8d10-9178feb0731a\":{\"id\":\"264cf413-24d4-4299-8d10-9178feb0731a\",\"type\":\"question\",\"responses\":[{\"id\":\"b4f6ea38-7f10-4d96-b35b-f6911bbf0c09\",\"label\":\"Required\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false},{\"id\":\"057e5c1c-f332-4a5b-9a05-404d03d4adeb\",\"label\":\"Not required\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"3d7b9677-7f87-4452-a6bd-2209085cf4d1\":{\"id\":\"3d7b9677-7f87-4452-a6bd-2209085cf4d1\",\"type\":\"question\",\"responses\":[{\"id\":\"db32aa1b-6cb6-4bd2-8cfa-d78aa63b662c\",\"label\":\"Present\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"16d754bb-2885-49df-9a04-015488f51f64\",\"label\":\"Not Present\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false}]},\"4728b690-6be3-4c45-83bd-02b0718e3404\":{\"id\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"type\":\"question\",\"responses\":[{\"id\":\"3634cb99-09d4-479f-9ae5-7366431aae38\",\"label\":\"Good\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"label\":\"Satisfactory\",\"colour\":\"255,176,0\",\"score\":1,\"enable_score\":false},{\"id\":\"c3c234aa-9cd4-4002-bf6d-8337362dae24\",\"label\":\"Poor\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false},{\"id\":\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\",\"label\":\"N/A\",\"colour\":\"112,112,112\",\"score\":1,\"enable_score\":false}]},\"5b69aee5-0532-46a4-b2f5-d020d4d5381d\":{\"id\":\"5b69aee5-0532-46a4-b2f5-d020d4d5381d\",\"type\":\"question\",\"responses\":[{\"id\":\"ef4abf51-3361-46f5-ba04-70c23c85ca20\",\"label\":\"Good\",\"colour\":\"19,133,95\",\"score\":10,\"enable_score\":true},{\"id\":\"ef4abf51-3361-46f5-ba04-70c23c85ca21\",\"label\":\"Satisfactory\",\"colour\":\"129,181,50\",\"score\":7,\"enable_score\":true},{\"id\":\"ef4abf51-3361-46f5-ba04-70c23c85ca22\",\"label\":\"Poor\",\"colour\":\"254,133,0\",\"score\":5,\"failed\":true,\"enable_score\":true},{\"id\":\"d53a801d-3985-4b0b-a4f9-1dd3bf56c381\",\"label\":\"Very poor\",\"colour\":\"198,0,34\",\"score\":2,\"failed\":true,\"enable_score\":true}]},\"5f785d00-1b76-4d56-84f8-6d0f52caa884\":{\"id\":\"5f785d00-1b76-4d56-84f8-6d0f52caa884\",\"type\":\"question\",\"responses\":[{\"id\":\"2062ef4f-8d36-43c7-96a8-ec901556c047\",\"label\":\"Information is Known\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"3ad7fa81-4376-4ab1-b51e-217428b633a3\",\"label\":\"Information Explained\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"6909bc0b-27b2-470d-b4ab-fbd1ac2928f3\":{\"id\":\"6909bc0b-27b2-470d-b4ab-fbd1ac2928f3\",\"type\":\"question\",\"responses\":[{\"id\":\"3c7c1b75-c740-4572-a736-1739b2659855\",\"label\":\"Issued\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"167a3672-d076-46c1-826b-066a101a0042\",\"label\":\"Not Issued\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false}]},\"74cce119-02cc-4ab3-9d69-47c379857cbb\":{\"id\":\"74cce119-02cc-4ab3-9d69-47c379857cbb\",\"type\":\"question\",\"responses\":[{\"id\":\"9b1a9789-1956-4aee-8aef-019badce6cf0\",\"label\":\"Present & up to date\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"95d6f951-3f60-402a-a791-bfe84c4e9dfa\",\"label\":\"Present & not up to date\",\"colour\":\"254,133,0\",\"score\":0,\"failed\":true,\"enable_score\":false},{\"id\":\"4eedb162-c048-4b79-b895-4672dd0d0697\",\"label\":\"Not present\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false}]},\"7601fb75-80ae-4409-b31a-9acd58d45445\":{\"id\":\"7601fb75-80ae-4409-b31a-9acd58d45445\",\"type\":\"question\",\"responses\":[{\"id\":\"af89ffa0-5db2-4a49-93e5-7dd392ab8f10\",\"label\":\"Full\",\"colour\":\"19,133,95\",\"score\":10,\"enable_score\":true},{\"id\":\"af89ffa1-5db2-4a49-93e5-7dd392ab8f10\",\"label\":\"Satisfactory\",\"colour\":\"129,181,50\",\"score\":7,\"failed\":false,\"enable_score\":true},{\"id\":\"af89ffa2-5db2-4a49-93e5-7dd392ab8f10\",\"label\":\"Below required level\",\"colour\":\"255,176,0\",\"score\":5,\"failed\":true,\"enable_score\":true},{\"id\":\"f65439a8-28e4-423b-a7e4-3610dcf71f42\",\"label\":\"Nearly Empty\",\"colour\":\"254,133,0\",\"score\":2,\"failed\":true,\"enable_score\":true},{\"id\":\"27501c84-03fc-4c98-8710-fede05b8f21c\",\"label\":\"Empty\",\"colour\":\"198,0,34\",\"score\":0,\"failed\":true,\"enable_score\":true}]},\"770e09c4-9acf-4b51-b2d4-9212a4a47901\":{\"id\":\"770e09c4-9acf-4b51-b2d4-9212a4a47901\",\"type\":\"question\",\"responses\":[{\"id\":\"1b2907a4-9ec2-4f72-8007-ccd356ce4458\",\"label\":\"Present\",\"colour\":\"112,112,112\",\"score\":0,\"enable_score\":false},{\"id\":\"de6e4f46-a930-410b-be7d-628d0d651b0a\",\"label\":\"Not Present\",\"colour\":\"112,112,112\",\"score\":0,\"enable_score\":false}]},\"7ffeab79-fe0e-4d10-8efd-1dce74198762\":{\"id\":\"7ffeab79-fe0e-4d10-8efd-1dce74198762\",\"type\":\"question\",\"responses\":[{\"id\":\"de43b084-c86e-41a3-a2ef-50c4db81e4aa\",\"label\":\"Present & up to date\",\"colour\":\"19,133,95\",\"score\":10,\"enable_score\":true},{\"id\":\"d9d28ebf-852c-48f6-a94d-e8b83c3e343b\",\"label\":\"Present & not up to date\",\"colour\":\"254,133,0\",\"score\":5,\"failed\":true,\"enable_score\":true},{\"id\":\"472ccff5-3c74-482f-95ba-a327661bd0bf\",\"label\":\"No present\",\"colour\":\"198,0,34\",\"score\":0,\"failed\":true,\"enable_score\":true}]},\"93a855ae-871c-4337-b0ee-c221428e1631\":{\"id\":\"93a855ae-871c-4337-b0ee-c221428e1631\",\"type\":\"question\",\"responses\":[{\"id\":\"75ae8a50-78ba-4a5b-bed7-5115b2ceeef0\",\"label\":\"Yes\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"fc83abca-96fe-4ddc-bd46-d7fa5e76f34f\",\"label\":\"To Be Arranged\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"df808f99-7e10-4658-92b3-edb4e71ebb08\",\"label\":\"No\",\"colour\":\"112,112,112\",\"score\":1,\"enable_score\":false}]},\"ad3a43b5-cf17-48cb-a515-a3c433021ea8\":{\"id\":\"ad3a43b5-cf17-48cb-a515-a3c433021ea8\",\"type\":\"question\",\"responses\":[{\"id\":\"3f2120b7-d9d6-4196-9ce7-5f7689a1031c\",\"label\":\"Changed\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"1a715901-2f0a-47a6-9481-7ab44adad917\",\"label\":\"Not Changed\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false}]},\"b52a8b4c-048b-4f7d-99b9-c6b9680be5ed\":{\"id\":\"b52a8b4c-048b-4f7d-99b9-c6b9680be5ed\",\"type\":\"question\",\"responses\":[{\"id\":\"2a2b8507-c53d-4d0e-83ec-164cb179b6a0\",\"label\":\"Pass\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":true},{\"id\":\"2a2b8507-c53d-4d0e-83ec-164cb179b6a1\",\"label\":\"Fail\",\"colour\":\"198,0,34\",\"score\":0,\"failed\":true,\"enable_score\":true},{\"id\":\"2a2b8507-c53d-4d0e-83ec-164cb179b6a2\",\"label\":\"N/A\",\"colour\":\"112,112,112\",\"score\":1,\"enable_score\":false}]},\"b5774aac-4e98-4ddf-af0d-2d402a2f98f2\":{\"id\":\"b5774aac-4e98-4ddf-af0d-2d402a2f98f2\",\"type\":\"question\",\"responses\":[{\"id\":\"3ae94c5e-a833-4b67-9193-c77d027521c5\",\"label\":\"Swapped\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"feb27b4c-13bd-49aa-84e7-1a9593cc27b2\",\"label\":\"Not Swapped\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false}]},\"b786ea78-79a4-4b60-97ba-ae0ef2ec50ff\":{\"id\":\"b786ea78-79a4-4b60-97ba-ae0ef2ec50ff\",\"type\":\"question\",\"responses\":[{\"id\":\"fc739d28-112c-40b5-9a99-d0d76f8e2e50\",\"label\":\"Applied\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"18a4c9bd-074c-431d-951c-badd32bce52e\",\"label\":\"Not Applied\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false}]},\"be33de9d-7db6-45eb-a9d5-65986b351b0a\":{\"id\":\"be33de9d-7db6-45eb-a9d5-65986b351b0a\",\"type\":\"question\",\"responses\":[{\"id\":\"0ae07391-98fb-4fa2-8300-bb1db973132c\",\"label\":\"Replenished\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"a49ff74f-e77e-4a07-a3f1-66f455f350d0\",\"label\":\"Not Replenished\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false},{\"id\":\"647cf616-97cc-4492-8b55-0353b957aa94\",\"label\":\"N/A\",\"colour\":\"112,112,112\",\"score\":1,\"enable_score\":false}]},\"c361e12b-ebc9-4755-9cb0-ca656a6471a0\":{\"id\":\"c361e12b-ebc9-4755-9cb0-ca656a6471a0\",\"type\":\"question\",\"responses\":[{\"id\":\"08719a65-0562-47ad-97ce-574604fae8e3\",\"label\":\"Good\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"24052431-602d-4103-866f-7437f49cd0e4\",\"label\":\"Satisfactory\",\"colour\":\"129,181,50\",\"score\":1,\"enable_score\":false},{\"id\":\"5c8439e1-1226-44ed-979a-56e74254307f\",\"label\":\"Poor\",\"colour\":\"254,133,0\",\"score\":1,\"enable_score\":false},{\"id\":\"7881f618-c835-45a1-86d3-569ae13e3808\",\"label\":\"Very Poor\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false},{\"id\":\"a3ddd1ff-b4c1-4990-b1a6-ef33554101d4\",\"label\":\"N/A\",\"colour\":\"112,112,112\",\"score\":1,\"enable_score\":false}]},\"c6c011ed-4ade-460d-a04b-da730834b667\":{\"id\":\"c6c011ed-4ade-460d-a04b-da730834b667\",\"type\":\"question\",\"responses\":[{\"id\":\"060ace00-1f61-468e-9c42-918fa93badcf\",\"label\":\"Good condition\",\"colour\":\"19,133,95\",\"score\":0,\"enable_score\":false},{\"id\":\"060ace01-1f61-468e-9c42-918fa93badcf\",\"label\":\"Bad condition\",\"colour\":\"198,0,34\",\"score\":1,\"failed\":false,\"enable_score\":false},{\"id\":\"060ace02-1f61-468e-9c42-918fa93badcf\",\"label\":\"No POS\",\"colour\":\"112,112,112\",\"score\":1,\"enable_score\":false}]},\"d743f356-a147-472c-a790-0c46a187de92\":{\"id\":\"d743f356-a147-472c-a790-0c46a187de92\",\"type\":\"question\",\"responses\":[{\"id\":\"6bb1beb4-494e-4a17-bff7-bed8a6fcd3d0\",\"label\":\"Working\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"6bb1beb4-494e-4a17-bff7-bed8a6fcd3d1\",\"label\":\"Not Working\",\"colour\":\"198,0,34\",\"score\":0,\"failed\":false,\"enable_score\":false}]},\"e786f03e-806f-4f18-815a-cae696fa017d\":{\"id\":\"e786f03e-806f-4f18-815a-cae696fa017d\",\"type\":\"question\",\"responses\":[{\"id\":\"3508f4c7-79d3-45fe-ae90-e4fd149bfceb\",\"label\":\"Provided\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"496d7c26-b988-46f0-b75e-2cbfb8d6aebf\",\"label\":\"Not provided\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false}]},\"ea34ce11-c71a-4bc8-9902-b4e39fceadd2\":{\"id\":\"ea34ce11-c71a-4bc8-9902-b4e39fceadd2\",\"type\":\"question\",\"responses\":[{\"id\":\"20c4b731-70ee-46c9-a00f-814f6d785482\",\"label\":\"Correct\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"20253f5a-e498-492e-ac6b-7904af23c8f1\",\"label\":\"Incorrect\",\"colour\":\"198,0,34\",\"score\":0,\"failed\":true,\"enable_score\":false}]},\"f3932779-5f6f-49fb-8ea7-321e975d3782\":{\"id\":\"f3932779-5f6f-49fb-8ea7-321e975d3782\",\"type\":\"question\",\"responses\":[{\"id\":\"900eb300-2779-45a9-aef9-a4a5d6113734\",\"label\":\"Set\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false},{\"id\":\"f53979dc-8253-4984-a5a5-ab90671a9c90\",\"label\":\"Not Set\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false}]},\"responseset_d783549105814f3a96dfd85b3f601374\":{\"id\":\"responseset_d783549105814f3a96dfd85b3f601374\",\"type\":\"list\",\"responses\":[{\"id\":\"0f035478-4cd2-4e7a-b97f-89aeebb09eef\",\"label\":\"Futuro E\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"f250a327-f0af-44cf-b1f1-401c7bdd0d9d\",\"label\":\"Futuro P\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"c3ed4fd1-dab8-4393-8e94-4e00bea12383\",\"label\":\"Lavazza Eleganza 12oz\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"408daa51-3f8c-4cc1-b63e-e4560eebdd86\",\"label\":\"Lavazza Eleganza 12oz & 16oz\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"7a4e8257-496d-4ed1-b36d-15d3d929c33e\",\"label\":\"Prontissimo Pisa\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"26db4bd4-4aaf-48bf-b23a-29fda0a3bbe7\",\"label\":\"Canto Touch\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"1c528606-08ca-4327-8f1f-1d8a85ceca29\",\"label\":\"Piccolo Espresso\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"43a5b4c4-43f3-4e4d-a52e-8eba29c97720\",\"label\":\"Piccolo P\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"fd2923c3-306c-4e17-ad27-08d0f37850e1\",\"label\":\"Yorkshire Tea 2Go\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"49d06b23-b67f-4512-a1a5-06b587cdccac\",\"label\":\"Sienna Prontissimo & Tea\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"0dafa855-689c-4744-acce-b09172eb468e\",\"label\":\"Sienna Prontissimo\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"78870b60-b225-4d1f-99fe-0c8baa999dbe\",\"label\":\"Sienna Espresso\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"db628f01-b940-4a39-8ac3-1a381db3a924\",\"label\":\"Sienna Espresso & Tea\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"2b7c7c5d-3e5f-4081-a0a9-ac902984696c\",\"label\":\"PG2GO\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"47afb524-8825-4a9b-829d-19608f9599bd\",\"label\":\"Nano A Microground\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"fd56779e-442b-41a7-bf32-76d2705aabf7\",\"label\":\"Lavazza Lusso\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"ee74229e-478d-4c93-b765-28294849d596\",\"label\":\"Nano A Beans\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"562f1862-8dc9-4c18-b9de-11cd72a3db1d\",\"label\":\"Micro P\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"ea83dde3-5397-4999-90f4-826149c350e3\",\"label\":\"Micro Espresso\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"1bc4bb46-9159-4010-9348-35f108ac1847\",\"label\":\"Micro A Microground\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"1e6a23ef-2b6d-45c9-b97a-37bb7931f192\",\"label\":\"Micro A Beans\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"a6c846b4-63a8-42c9-bac2-40c8df4469b6\",\"label\":\"Nescafe & Go\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"dbf03f35-473c-4f6b-9026-fbb98e516b18\",\"label\":\"Nescafe Alegria\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"13242f34-6c37-4396-a5e3-7ca4cfe6630f\",\"label\":\"Nano P\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true},{\"id\":\"a38acc46-c17f-4d06-86ba-894b2312940b\",\"label\":\"Nano E\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true}]}}},\"header_items\":[{\"item_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"label\":\"Title Page\",\"type\":\"section\",\"scoring\":{\"combined_score\":1,\"combined_max_score\":1,\"combined_score_percentage\":100},\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"1e36c281-1f0b-475d-8812-b80e473b023d\",\"f3245d46-ea77-11e1-aff1-0800200c9a66\",\"f3245d42-ea77-11e1-aff1-0800200c9a66\",\"f3245d44-ea77-11e1-aff1-0800200c9a66\",\"22b72b8d-8fee-4a3f-8634-f93df1e787a9\",\"4ce40c05-2173-40a1-8645-929ae4a4f9d0\",\"fb739b87-c27a-461d-b29a-a962cd253af8\",\"5fa2777b-dfb8-4735-a434-38b0675104af\"]},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"1e36c281-1f0b-475d-8812-b80e473b023d\",\"label\":\"Machine Type \",\"type\":\"list\",\"scoring\":{\"score\":1,\"max_score\":1,\"score_percentage\":100},\"options\":{\"weighting\":1,\"response_set\":\"responseset_d783549105814f3a96dfd85b3f601374\",\"is_mandatory\":true,\"multiple_selection\":false},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"fd56779e-442b-41a7-bf32-76d2705aabf7\",\"label\":\"Lavazza Lusso\",\"colour\":\"250,250,250\",\"score\":1,\"short_label\":\"\",\"type\":\"unsupported_item\",\"failed\":false,\"enable_score\":true}]}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"f3245d46-ea77-11e1-aff1-0800200c9a66\",\"label\":\"Document Number\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"LUS000071\"}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"f3245d42-ea77-11e1-aff1-0800200c9a66\",\"label\":\"Conducted On\",\"type\":\"datetime\",\"options\":{\"weighting\":1,\"is_mandatory\":true,\"enable_date\":true,\"enable_time\":true},\"responses\":{\"datetime\":\"2020-11-04T16:42:59.000Z\"}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"f3245d44-ea77-11e1-aff1-0800200c9a66\",\"label\":\"Location\",\"type\":\"address\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"location_text\":\"156 Hawthorn Rd, Bognor Regis PO21 2UR, UK\\n(50.7897665, -0.6861345)\",\"location\":{\"name\":\"156\",\"country\":\"United Kingdom\",\"geometry\":{\"type\":\"Point\",\"coordinates\":[-0.6861345,50.7897665]},\"locality\":null,\"postal_code\":\"PO21 2UR\",\"sub_locality\":null,\"thoroughfare\":\"Hawthorn Road\",\"iso_country_code\":\"GB\",\"sub_thoroughfare\":\"156\",\"administrative_area\":\"England\",\"sub_administrative_area\":\"West Sussex\"}}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"22b72b8d-8fee-4a3f-8634-f93df1e787a9\",\"label\":\"Store Number\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"88\"}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"4ce40c05-2173-40a1-8645-929ae4a4f9d0\",\"label\":\"Name of Site Contact\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"Louise \"}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"fb739b87-c27a-461d-b29a-a962cd253af8\",\"label\":\"Machine Serial Number\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"60043670\"}},{\"parent_id\":\"f3245d39-ea77-11e1-aff1-0800200c9a66\",\"item_id\":\"5fa2777b-dfb8-4735-a434-38b0675104af\",\"label\":\"Telemetry Serial Number\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"176643\"}}],\"items\":[{\"item_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"label\":\"Audit Scores\",\"type\":\"section\",\"scoring\":{\"combined_score\":117,\"combined_max_score\":130,\"combined_score_percentage\":90},\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"5de83cb2-6300-4733-9a82-1f5da6285e09\",\"e962af93-d383-4e74-8eec-6b3609199fad\",\"a69aa94d-246d-4e87-913b-7a4dadd87fcf\",\"cdb92e87-36f2-4316-9b99-f9ac9d593b02\",\"8f51b8b4-1152-487e-9336-bab5ecdbc966\",\"0b2edd77-d1c4-4eeb-9369-1718f7d86bee\",\"b642f9c9-0a17-44ea-af66-493561c60af0\",\"adaf952e-948f-4eb4-b407-7e9af8bfbcb6\",\"64aded88-f5bc-4a54-a4a0-df7c7587326f\",\"ff3ae517-f075-4443-bf5f-f0ee5b831ab2\",\"b9dceef0-63a0-4f1a-bdf4-37195fb79cc4\",\"94d9ec78-76ef-43d5-924c-142031e2ba4b\",\"262f55b0-1a38-484f-9f22-8011be09f620\"]},{\"parent_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"item_id\":\"5de83cb2-6300-4733-9a82-1f5da6285e09\",\"label\":\"Ingredient Levels\",\"type\":\"slider\",\"scoring\":{\"score\":10,\"max_score\":10,\"score_percentage\":100},\"options\":{\"weighting\":1,\"increment\":1,\"max\":10,\"min\":0,\"is_mandatory\":true},\"responses\":{\"value\":10},\"children\":[\"b400d324-01cd-4e90-ac9b-d20542e8c906\",\"02e2790f-e64e-4d37-b68a-3dbc934f361b\"]},{\"parent_id\":\"5de83cb2-6300-4733-9a82-1f5da6285e09\",\"item_id\":\"b400d324-01cd-4e90-ac9b-d20542e8c906\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"cda7c335-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"a04c5f26-36d6-4b7a-9b5e-0e8d5ac2177d\"]},{\"parent_id\":\"b400d324-01cd-4e90-ac9b-d20542e8c906\",\"item_id\":\"a04c5f26-36d6-4b7a-9b5e-0e8d5ac2177d\",\"label\":\"Please take a photo(s) of the area:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T16:51:10.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"16111ad9-41d1-42ba-94a9-4b2b7399f9bf\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/16111ad9-41d1-42ba-94a9-4b2b7399f9bf\"},{\"date_created\":\"2020-11-04T16:51:10.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"2551a463-71c0-4828-8b83-768da9ee33ba\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/2551a463-71c0-4828-8b83-768da9ee33ba\"}]},{\"parent_id\":\"5de83cb2-6300-4733-9a82-1f5da6285e09\",\"item_id\":\"02e2790f-e64e-4d37-b68a-3dbc934f361b\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"7\"],\"weighting\":1,\"condition\":\"cda7c330-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"4d109969-1627-47a9-b2c8-d28350badf14\"]},{\"parent_id\":\"02e2790f-e64e-4d37-b68a-3dbc934f361b\",\"item_id\":\"4d109969-1627-47a9-b2c8-d28350badf14\",\"label\":\"Please give a reason for this score:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"item_id\":\"e962af93-d383-4e74-8eec-6b3609199fad\",\"label\":\"Bowls & Pipes Cleanliness\",\"type\":\"slider\",\"scoring\":{\"score\":6,\"max_score\":10,\"score_percentage\":60},\"options\":{\"weighting\":1,\"increment\":1,\"max\":10,\"min\":0,\"is_mandatory\":true},\"responses\":{\"value\":6},\"children\":[\"d41696cd-0cc4-4cfa-b008-ff93935c8c2d\",\"cff76483-1e7f-49ad-b3c3-0b0e10ea568a\"]},{\"parent_id\":\"e962af93-d383-4e74-8eec-6b3609199fad\",\"item_id\":\"d41696cd-0cc4-4cfa-b008-ff93935c8c2d\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"7\"],\"weighting\":1,\"condition\":\"cda7c330-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"6e9ac2ca-cd69-4422-9d93-44d242f1a977\"]},{\"parent_id\":\"d41696cd-0cc4-4cfa-b008-ff93935c8c2d\",\"item_id\":\"6e9ac2ca-cd69-4422-9d93-44d242f1a977\",\"label\":\"Please give a reason for this score:\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"Very clean however whipper bowl 1 has accumulated some ingredient.\"}},{\"parent_id\":\"e962af93-d383-4e74-8eec-6b3609199fad\",\"item_id\":\"cff76483-1e7f-49ad-b3c3-0b0e10ea568a\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"cda7c334-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"299d406e-80c6-42fc-b3a2-fdd5cadcc668\"]},{\"parent_id\":\"cff76483-1e7f-49ad-b3c3-0b0e10ea568a\",\"item_id\":\"299d406e-80c6-42fc-b3a2-fdd5cadcc668\",\"label\":\"Please take a photo(s) of the area:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T16:51:10.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"45838a5e-e15d-485c-a6bc-1982f67664d4\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/45838a5e-e15d-485c-a6bc-1982f67664d4\"},{\"date_created\":\"2020-11-04T16:51:10.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"76a3b453-5567-48f4-87b7-0c6bced9d714\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/76a3b453-5567-48f4-87b7-0c6bced9d714\"},{\"date_created\":\"2020-11-04T16:51:10.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"b35c4e00-8d89-4b31-b940-2d3d803397f6\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/b35c4e00-8d89-4b31-b940-2d3d803397f6\"},{\"date_created\":\"2020-11-04T16:51:10.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"d292b482-3a3b-4dad-8ed1-907e678d0f70\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/d292b482-3a3b-4dad-8ed1-907e678d0f70\"},{\"date_created\":\"2020-11-04T16:51:10.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"6fd4fb6e-e025-4a76-aaf5-b22214d7996e\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/6fd4fb6e-e025-4a76-aaf5-b22214d7996e\"},{\"date_created\":\"2020-11-04T16:51:10.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"169e1a95-8dad-444f-b4d1-1fdf0b9065e3\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/169e1a95-8dad-444f-b4d1-1fdf0b9065e3\"},{\"date_created\":\"2020-11-04T16:51:10.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"9f1cf4c7-b4cf-413c-bd4a-6a6ec59db7df\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/9f1cf4c7-b4cf-413c-bd4a-6a6ec59db7df\"},{\"date_created\":\"2020-11-04T16:51:10.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"f43be8e2-5d52-419a-836c-a41f256ea6ea\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/f43be8e2-5d52-419a-836c-a41f256ea6ea\"},{\"date_created\":\"2020-11-04T16:51:10.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"8e25f5b7-17e7-4ca3-8e54-0a3bc3b8fc90\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/8e25f5b7-17e7-4ca3-8e54-0a3bc3b8fc90\"},{\"date_created\":\"2020-11-04T16:51:10.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"bc50592b-5149-404b-bc16-21ad612591b9\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/bc50592b-5149-404b-bc16-21ad612591b9\"},{\"date_created\":\"2020-11-04T16:51:10.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"c63c9ef0-f1d3-45ef-829c-7bd64f0e7970\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/c63c9ef0-f1d3-45ef-829c-7bd64f0e7970\"}]},{\"parent_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"item_id\":\"a69aa94d-246d-4e87-913b-7a4dadd87fcf\",\"label\":\"Dispense Heads Cleanliness\",\"type\":\"slider\",\"scoring\":{\"score\":9,\"max_score\":10,\"score_percentage\":90},\"options\":{\"weighting\":1,\"increment\":1,\"max\":10,\"min\":0,\"is_mandatory\":true},\"responses\":{\"value\":9},\"children\":[\"8c38e6e2-c8ed-4aa9-800a-80be25e41491\",\"ef20f89f-e7d1-47f4-abbe-4ea187b85c54\"]},{\"parent_id\":\"a69aa94d-246d-4e87-913b-7a4dadd87fcf\",\"item_id\":\"8c38e6e2-c8ed-4aa9-800a-80be25e41491\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"7\"],\"weighting\":1,\"condition\":\"cda7c330-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"e8ad3db3-9e9f-443d-824d-bd665485a2ed\"]},{\"parent_id\":\"8c38e6e2-c8ed-4aa9-800a-80be25e41491\",\"item_id\":\"e8ad3db3-9e9f-443d-824d-bd665485a2ed\",\"label\":\"Please give a reason for this score:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"a69aa94d-246d-4e87-913b-7a4dadd87fcf\",\"item_id\":\"ef20f89f-e7d1-47f4-abbe-4ea187b85c54\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"cda7c334-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"04babdc6-b70b-400a-8ad5-4cb3de16ce86\"]},{\"parent_id\":\"ef20f89f-e7d1-47f4-abbe-4ea187b85c54\",\"item_id\":\"04babdc6-b70b-400a-8ad5-4cb3de16ce86\",\"label\":\"Please take a photo(s) of the area:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T16:55:30.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"4e0fccd0-7285-46cc-b4e0-002842b7a8e6\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/4e0fccd0-7285-46cc-b4e0-002842b7a8e6\"},{\"date_created\":\"2020-11-04T16:55:30.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"41716565-f5b2-46e6-949f-4528442e03df\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/41716565-f5b2-46e6-949f-4528442e03df\"}]},{\"parent_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"item_id\":\"cdb92e87-36f2-4316-9b99-f9ac9d593b02\",\"label\":\"Machine Surfaces & Extraction Plates Cleanliness\",\"type\":\"slider\",\"scoring\":{\"score\":10,\"max_score\":10,\"score_percentage\":100},\"options\":{\"weighting\":1,\"increment\":1,\"max\":10,\"min\":0,\"is_mandatory\":true},\"responses\":{\"value\":10},\"children\":[\"5ef3342f-7b6a-4c68-946c-e6692443b1f8\",\"fe5c64d7-d149-4d03-96fa-594ac21b15ce\"]},{\"parent_id\":\"cdb92e87-36f2-4316-9b99-f9ac9d593b02\",\"item_id\":\"5ef3342f-7b6a-4c68-946c-e6692443b1f8\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"7\"],\"weighting\":1,\"condition\":\"cda7c330-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"5d9b3ccc-a4a0-42b1-9205-0bb989b81350\"]},{\"parent_id\":\"5ef3342f-7b6a-4c68-946c-e6692443b1f8\",\"item_id\":\"5d9b3ccc-a4a0-42b1-9205-0bb989b81350\",\"label\":\"Please give a reason for this score:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"cdb92e87-36f2-4316-9b99-f9ac9d593b02\",\"item_id\":\"fe5c64d7-d149-4d03-96fa-594ac21b15ce\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"cda7c334-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"e64b70c5-7abe-475c-b9bd-9294a5062de2\"]},{\"parent_id\":\"fe5c64d7-d149-4d03-96fa-594ac21b15ce\",\"item_id\":\"e64b70c5-7abe-475c-b9bd-9294a5062de2\",\"label\":\"Please take a photo(s) of the area:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T16:55:30.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"3ff88ec1-8492-469b-9f9a-ac76e325f324\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/3ff88ec1-8492-469b-9f9a-ac76e325f324\"},{\"date_created\":\"2020-11-04T16:55:30.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"770a77fa-a1bf-4f99-9f35-068c9b16c14e\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/770a77fa-a1bf-4f99-9f35-068c9b16c14e\"},{\"date_created\":\"2020-11-04T16:55:30.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"573da9f1-e29e-4a93-ac38-704a4eeda6b5\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/573da9f1-e29e-4a93-ac38-704a4eeda6b5\"},{\"date_created\":\"2020-11-04T16:55:30.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"6d604da4-df8e-4d6a-b94e-2b665f54572b\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/6d604da4-df8e-4d6a-b94e-2b665f54572b\"},{\"date_created\":\"2020-11-04T16:55:30.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"aa06b007-9211-4924-b035-1bc765243bce\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/aa06b007-9211-4924-b035-1bc765243bce\"},{\"date_created\":\"2020-11-04T16:55:30.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"01d8d5f3-a768-4fef-9f61-9b3932dee9ac\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/01d8d5f3-a768-4fef-9f61-9b3932dee9ac\"},{\"date_created\":\"2020-11-04T16:55:30.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"b7e31c89-b76d-4e29-896c-1344f1136a37\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/b7e31c89-b76d-4e29-896c-1344f1136a37\"},{\"date_created\":\"2020-11-04T16:55:30.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"954b2bdc-f5e0-43ed-ae4c-8a36e0c2121a\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/954b2bdc-f5e0-43ed-ae4c-8a36e0c2121a\"},{\"date_created\":\"2020-11-04T16:55:30.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"d3534bd8-8283-4612-90d2-62abb609e482\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/d3534bd8-8283-4612-90d2-62abb609e482\"}]},{\"parent_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"item_id\":\"8f51b8b4-1152-487e-9336-bab5ecdbc966\",\"label\":\"Coffee Brewer Cleanliness\",\"type\":\"slider\",\"scoring\":{\"score\":10,\"max_score\":10,\"score_percentage\":100},\"options\":{\"weighting\":1,\"increment\":1,\"max\":10,\"min\":0,\"is_mandatory\":true},\"responses\":{\"value\":10},\"children\":[\"d440ea98-440c-4ce5-8d64-27941400d804\",\"ab2389a8-a5c0-412a-8d40-814b56952ec3\"]},{\"parent_id\":\"8f51b8b4-1152-487e-9336-bab5ecdbc966\",\"item_id\":\"d440ea98-440c-4ce5-8d64-27941400d804\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"7\"],\"weighting\":1,\"condition\":\"cda7c330-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"0e4a80c5-3c87-4f3d-b08c-bcc7af1959b3\"]},{\"parent_id\":\"d440ea98-440c-4ce5-8d64-27941400d804\",\"item_id\":\"0e4a80c5-3c87-4f3d-b08c-bcc7af1959b3\",\"label\":\"Please give a reason for this score:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"8f51b8b4-1152-487e-9336-bab5ecdbc966\",\"item_id\":\"ab2389a8-a5c0-412a-8d40-814b56952ec3\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"cda7c334-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"feca5ba5-8fc1-4809-9b98-0df3a11c97e6\"]},{\"parent_id\":\"ab2389a8-a5c0-412a-8d40-814b56952ec3\",\"item_id\":\"feca5ba5-8fc1-4809-9b98-0df3a11c97e6\",\"label\":\"Please take a photo(s) of the area:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T16:57:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"c379c61f-2550-43a3-87cb-edcdba27e412\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/c379c61f-2550-43a3-87cb-edcdba27e412\"}]},{\"parent_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"item_id\":\"0b2edd77-d1c4-4eeb-9369-1718f7d86bee\",\"label\":\"Tea Brewer Cleanliness\",\"type\":\"slider\",\"scoring\":{\"score\":9,\"max_score\":10,\"score_percentage\":90},\"options\":{\"weighting\":1,\"increment\":1,\"max\":10,\"min\":0,\"is_mandatory\":true},\"responses\":{\"value\":9},\"children\":[\"60b6279e-80ec-4c78-baeb-bc1a50eee05e\",\"9efcca8e-411e-4176-9ed9-4425c9d337ac\"]},{\"parent_id\":\"0b2edd77-d1c4-4eeb-9369-1718f7d86bee\",\"item_id\":\"60b6279e-80ec-4c78-baeb-bc1a50eee05e\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"7\"],\"weighting\":1,\"condition\":\"cda7c330-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"c2f830d5-50ba-4c32-b2fc-377cc815c27c\"]},{\"parent_id\":\"60b6279e-80ec-4c78-baeb-bc1a50eee05e\",\"item_id\":\"c2f830d5-50ba-4c32-b2fc-377cc815c27c\",\"label\":\"Please give a reason for this score:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"0b2edd77-d1c4-4eeb-9369-1718f7d86bee\",\"item_id\":\"9efcca8e-411e-4176-9ed9-4425c9d337ac\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"cda7c334-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"29e021cb-3fb4-4a06-8669-624a91fc9461\"]},{\"parent_id\":\"9efcca8e-411e-4176-9ed9-4425c9d337ac\",\"item_id\":\"29e021cb-3fb4-4a06-8669-624a91fc9461\",\"label\":\"Please take a photo(s) of the area:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T16:57:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"33782e67-71f8-4bf1-8e72-54a608d54695\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/33782e67-71f8-4bf1-8e72-54a608d54695\"},{\"date_created\":\"2020-11-04T16:57:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"dc31e6a8-a677-46cf-9204-11d07d27b009\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/dc31e6a8-a677-46cf-9204-11d07d27b009\"},{\"date_created\":\"2020-11-04T16:57:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"65bf3221-0d2d-42ab-8f44-0c625360cb58\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/65bf3221-0d2d-42ab-8f44-0c625360cb58\"}]},{\"parent_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"item_id\":\"b642f9c9-0a17-44ea-af66-493561c60af0\",\"label\":\"Drip Tray & Dispense Area Cleanliness\",\"type\":\"slider\",\"scoring\":{\"score\":9,\"max_score\":10,\"score_percentage\":90},\"options\":{\"weighting\":1,\"increment\":1,\"max\":10,\"min\":0,\"is_mandatory\":true},\"responses\":{\"value\":9},\"children\":[\"b4688769-65e6-42e2-a0ca-d4564d2c5b52\",\"5741f24e-831e-4741-8729-13d2225a856f\"]},{\"parent_id\":\"b642f9c9-0a17-44ea-af66-493561c60af0\",\"item_id\":\"b4688769-65e6-42e2-a0ca-d4564d2c5b52\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"7\"],\"weighting\":1,\"condition\":\"cda7c330-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"d49eccf2-d6de-45c4-a4cb-365d59d7d4d5\"]},{\"parent_id\":\"b4688769-65e6-42e2-a0ca-d4564d2c5b52\",\"item_id\":\"d49eccf2-d6de-45c4-a4cb-365d59d7d4d5\",\"label\":\"Please give a reason for this score:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"b642f9c9-0a17-44ea-af66-493561c60af0\",\"item_id\":\"5741f24e-831e-4741-8729-13d2225a856f\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"cda7c334-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"e0260dd7-96ef-429b-8649-bcfcff5cd0fe\"]},{\"parent_id\":\"5741f24e-831e-4741-8729-13d2225a856f\",\"item_id\":\"e0260dd7-96ef-429b-8649-bcfcff5cd0fe\",\"label\":\"Please take a photo(s) of the area:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T16:57:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"b4db2186-08b5-4d69-8c3f-f55c539e11b9\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/b4db2186-08b5-4d69-8c3f-f55c539e11b9\"},{\"date_created\":\"2020-11-04T16:57:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"e6b7730b-ee7c-41ec-98a9-1d1430951d2d\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/e6b7730b-ee7c-41ec-98a9-1d1430951d2d\"},{\"date_created\":\"2020-11-04T16:57:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"8d01dc06-56b4-48f8-a51d-fe7a98fb452c\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/8d01dc06-56b4-48f8-a51d-fe7a98fb452c\"},{\"date_created\":\"2020-11-04T16:57:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"2dfc356b-f82f-489f-b080-34943af65c6e\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/2dfc356b-f82f-489f-b080-34943af65c6e\"}]},{\"parent_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"item_id\":\"adaf952e-948f-4eb4-b407-7e9af8bfbcb6\",\"label\":\"Machine Exterior Clean & Free From Smear Marks\",\"type\":\"slider\",\"scoring\":{\"score\":10,\"max_score\":10,\"score_percentage\":100},\"options\":{\"weighting\":1,\"increment\":1,\"max\":10,\"min\":0,\"is_mandatory\":true},\"responses\":{\"value\":10},\"children\":[\"fbcdf7a6-75f1-44e0-8c27-960e1cdca196\",\"68af21e8-c9c8-4094-80df-dc166f50991c\"]},{\"parent_id\":\"adaf952e-948f-4eb4-b407-7e9af8bfbcb6\",\"item_id\":\"fbcdf7a6-75f1-44e0-8c27-960e1cdca196\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"7\"],\"weighting\":1,\"condition\":\"cda7c330-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"fe574221-4df4-4893-a94a-9dc80372a846\"]},{\"parent_id\":\"fbcdf7a6-75f1-44e0-8c27-960e1cdca196\",\"item_id\":\"fe574221-4df4-4893-a94a-9dc80372a846\",\"label\":\"Please give a reason for this score:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"adaf952e-948f-4eb4-b407-7e9af8bfbcb6\",\"item_id\":\"68af21e8-c9c8-4094-80df-dc166f50991c\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"cda7c334-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"4d111475-10bb-4644-93ae-6430f194b930\"]},{\"parent_id\":\"68af21e8-c9c8-4094-80df-dc166f50991c\",\"item_id\":\"4d111475-10bb-4644-93ae-6430f194b930\",\"label\":\"Please take a photo(s) of the area:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T17:01:50.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"d8e599c5-82f4-4a66-a060-aa6b4082ba2f\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/d8e599c5-82f4-4a66-a060-aa6b4082ba2f\"},{\"date_created\":\"2020-11-04T17:01:50.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"c9522d57-29b9-4936-b562-009ef98d5472\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/c9522d57-29b9-4936-b562-009ef98d5472\"},{\"date_created\":\"2020-11-04T17:01:50.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"5528f57f-74f8-4422-b392-4c34f480d410\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/5528f57f-74f8-4422-b392-4c34f480d410\"}]},{\"parent_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"item_id\":\"64aded88-f5bc-4a54-a4a0-df7c7587326f\",\"label\":\"Bins Cleanliness\",\"type\":\"slider\",\"scoring\":{\"score\":8,\"max_score\":10,\"score_percentage\":80},\"options\":{\"weighting\":1,\"increment\":1,\"max\":10,\"min\":0,\"is_mandatory\":true},\"responses\":{\"value\":8},\"children\":[\"9a8733f9-6dfd-48f6-8201-9951b85aa012\",\"02d0013b-95b0-40b1-8fd8-e5a0e93baf3a\"]},{\"parent_id\":\"64aded88-f5bc-4a54-a4a0-df7c7587326f\",\"item_id\":\"9a8733f9-6dfd-48f6-8201-9951b85aa012\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"7\"],\"weighting\":1,\"condition\":\"cda7c330-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"5f70eeab-fe99-4942-b0b9-07062e485ed3\"]},{\"parent_id\":\"9a8733f9-6dfd-48f6-8201-9951b85aa012\",\"item_id\":\"5f70eeab-fe99-4942-b0b9-07062e485ed3\",\"label\":\"Please give a reason for this score:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"64aded88-f5bc-4a54-a4a0-df7c7587326f\",\"item_id\":\"02d0013b-95b0-40b1-8fd8-e5a0e93baf3a\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"cda7c334-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"17fb164c-d7c9-4417-a9dd-098f833f144e\"]},{\"parent_id\":\"02d0013b-95b0-40b1-8fd8-e5a0e93baf3a\",\"item_id\":\"17fb164c-d7c9-4417-a9dd-098f833f144e\",\"label\":\"Please take a photo(s) of the area:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T16:57:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"576e768c-272e-4e44-9b57-5b03c104b08f\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/576e768c-272e-4e44-9b57-5b03c104b08f\"},{\"date_created\":\"2020-11-04T16:57:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"5ba786c3-a332-423d-beea-e5a6a9c4bd3c\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/5ba786c3-a332-423d-beea-e5a6a9c4bd3c\"},{\"date_created\":\"2020-11-04T16:57:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"5f2e11e6-d02e-445e-9f58-14a4751332dd\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/5f2e11e6-d02e-445e-9f58-14a4751332dd\"}]},{\"parent_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"item_id\":\"ff3ae517-f075-4443-bf5f-f0ee5b831ab2\",\"label\":\"Floor Cleanliness\",\"type\":\"slider\",\"scoring\":{\"score\":9,\"max_score\":10,\"score_percentage\":90},\"options\":{\"weighting\":1,\"increment\":1,\"max\":10,\"min\":0,\"is_mandatory\":true},\"responses\":{\"value\":9},\"children\":[\"ac814cdd-957f-488f-8f82-41e89c2f2496\",\"0aa2504a-e078-4758-b490-72a98afe2ef4\"]},{\"parent_id\":\"ff3ae517-f075-4443-bf5f-f0ee5b831ab2\",\"item_id\":\"ac814cdd-957f-488f-8f82-41e89c2f2496\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"7\"],\"weighting\":1,\"condition\":\"cda7c330-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"8e5ecb33-05e3-43cd-b797-4cf5c27276d5\"]},{\"parent_id\":\"ac814cdd-957f-488f-8f82-41e89c2f2496\",\"item_id\":\"8e5ecb33-05e3-43cd-b797-4cf5c27276d5\",\"label\":\"Please give a reason for this score:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"ff3ae517-f075-4443-bf5f-f0ee5b831ab2\",\"item_id\":\"0aa2504a-e078-4758-b490-72a98afe2ef4\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"cda7c334-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"e9ad821c-2e63-49a9-b860-8cd405a77b04\"]},{\"parent_id\":\"0aa2504a-e078-4758-b490-72a98afe2ef4\",\"item_id\":\"e9ad821c-2e63-49a9-b860-8cd405a77b04\",\"label\":\"Please take a photo(s) of the area:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T17:01:50.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"6b5550ee-0f58-4f0d-b475-2c4617b641ab\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/6b5550ee-0f58-4f0d-b475-2c4617b641ab\"},{\"date_created\":\"2020-11-04T17:01:50.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"c05997f4-7973-4810-a7f4-6e368593fcb4\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/c05997f4-7973-4810-a7f4-6e368593fcb4\"}]},{\"parent_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"item_id\":\"b9dceef0-63a0-4f1a-bdf4-37195fb79cc4\",\"label\":\"Condiments / Cups / Lids Cleanliness\",\"type\":\"slider\",\"scoring\":{\"score\":10,\"max_score\":10,\"score_percentage\":100},\"options\":{\"weighting\":1,\"increment\":1,\"max\":10,\"min\":0,\"is_mandatory\":true},\"responses\":{\"value\":10},\"children\":[\"6868a54d-4db1-495d-bcbd-2965f9d0e272\",\"f1d54170-aa1d-4a38-85fe-1e34f7f619aa\"]},{\"parent_id\":\"b9dceef0-63a0-4f1a-bdf4-37195fb79cc4\",\"item_id\":\"6868a54d-4db1-495d-bcbd-2965f9d0e272\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"7\"],\"weighting\":1,\"condition\":\"cda7c330-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"b3649d6f-04ff-4d9a-8882-6450629da6f8\"]},{\"parent_id\":\"6868a54d-4db1-495d-bcbd-2965f9d0e272\",\"item_id\":\"b3649d6f-04ff-4d9a-8882-6450629da6f8\",\"label\":\"Please give a reason for this score:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"b9dceef0-63a0-4f1a-bdf4-37195fb79cc4\",\"item_id\":\"f1d54170-aa1d-4a38-85fe-1e34f7f619aa\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"cda7c334-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"cd370b4a-5d5c-4709-9a35-f6c347afe0ff\"]},{\"parent_id\":\"f1d54170-aa1d-4a38-85fe-1e34f7f619aa\",\"item_id\":\"cd370b4a-5d5c-4709-9a35-f6c347afe0ff\",\"label\":\"Please take a photo(s) of the area:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T16:59:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"268df0dd-79b3-416e-9ab4-9ee400df2d50\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/268df0dd-79b3-416e-9ab4-9ee400df2d50\"},{\"date_created\":\"2020-11-04T16:59:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"70bd4452-4701-457d-9f70-eaa04d2ca04d\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/70bd4452-4701-457d-9f70-eaa04d2ca04d\"}]},{\"parent_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"item_id\":\"94d9ec78-76ef-43d5-924c-142031e2ba4b\",\"label\":\"Condiments / Cups / Lids Fill Level\",\"type\":\"slider\",\"scoring\":{\"score\":7,\"max_score\":10,\"score_percentage\":70},\"options\":{\"weighting\":1,\"increment\":1,\"max\":10,\"min\":0,\"is_mandatory\":true},\"responses\":{\"value\":7},\"children\":[\"a452b991-d8b0-48da-93bd-f74b72266b77\",\"0e01e36d-b858-409e-9def-547552895854\"]},{\"parent_id\":\"94d9ec78-76ef-43d5-924c-142031e2ba4b\",\"item_id\":\"a452b991-d8b0-48da-93bd-f74b72266b77\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"7\"],\"weighting\":1,\"condition\":\"cda7c330-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"f64e30a4-97e8-4973-9d0f-0c6eed7e529d\"]},{\"parent_id\":\"a452b991-d8b0-48da-93bd-f74b72266b77\",\"item_id\":\"f64e30a4-97e8-4973-9d0f-0c6eed7e529d\",\"label\":\"Please give a reason for this score:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"94d9ec78-76ef-43d5-924c-142031e2ba4b\",\"item_id\":\"0e01e36d-b858-409e-9def-547552895854\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"cda7c334-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"6bef7f52-2eee-497b-957b-d587fbb1a964\"]},{\"parent_id\":\"0e01e36d-b858-409e-9def-547552895854\",\"item_id\":\"6bef7f52-2eee-497b-957b-d587fbb1a964\",\"label\":\"Please take a photo(s) of the area:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T17:01:50.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"3284aeb2-53f5-4756-9d78-aebd241e46fa\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/3284aeb2-53f5-4756-9d78-aebd241e46fa\"}]},{\"parent_id\":\"a1c3b0c6-b71f-4f3b-b4c7-46881b3ebdc9\",\"item_id\":\"262f55b0-1a38-484f-9f22-8011be09f620\",\"label\":\"Operating Manual Present & Cleaning Checklist Filled In\",\"type\":\"slider\",\"scoring\":{\"score\":10,\"max_score\":10,\"score_percentage\":100},\"options\":{\"weighting\":1,\"increment\":1,\"max\":10,\"min\":0,\"is_mandatory\":true},\"responses\":{\"value\":10},\"children\":[\"8c0f9f29-c3fa-4239-ba2c-449d965891eb\",\"bbc4b471-999e-48b2-832b-31fdc04f909e\"]},{\"parent_id\":\"262f55b0-1a38-484f-9f22-8011be09f620\",\"item_id\":\"8c0f9f29-c3fa-4239-ba2c-449d965891eb\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"7\"],\"weighting\":1,\"condition\":\"cda7c330-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"7faf3b3e-a6e4-4187-a7eb-3d719e328792\"]},{\"parent_id\":\"8c0f9f29-c3fa-4239-ba2c-449d965891eb\",\"item_id\":\"7faf3b3e-a6e4-4187-a7eb-3d719e328792\",\"label\":\"Please give a reason for this score:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"262f55b0-1a38-484f-9f22-8011be09f620\",\"item_id\":\"bbc4b471-999e-48b2-832b-31fdc04f909e\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"cda7c334-e500-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"c6650dec-92e0-4b61-b617-ad4e33b696f6\"]},{\"parent_id\":\"bbc4b471-999e-48b2-832b-31fdc04f909e\",\"item_id\":\"c6650dec-92e0-4b61-b617-ad4e33b696f6\",\"label\":\"Please take a photo(s) of the area:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T18:12:20.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"8b91d6ef-acf7-475f-89ce-4f03037c11b8\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/8b91d6ef-acf7-475f-89ce-4f03037c11b8\"}]},{\"item_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"label\":\"Visit Report\",\"type\":\"section\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"6dd94a1c-d02a-49b4-9224-0a0fb5cf2e07\",\"2d758316-ce20-4662-88d7-b5b8ffc508e0\",\"13f7fb17-72c2-4f44-8731-690293129ef9\",\"63ba1360-3874-4a58-892d-c69b3d274e39\",\"75962c61-fd19-4c35-8308-f5119f4e83c1\",\"98c69298-d093-4cb7-a666-6a7369d99f8c\",\"8866a17c-b4c9-4327-b3b1-80b4fdc10303\",\"45dc7f1e-ca9d-4f36-91a6-462c5cc82521\",\"c3cf85d2-b7f4-450a-87c3-0650f1cde03a\",\"1e91276d-2e17-4995-b508-4af9e4080a55\",\"291fa9cf-f685-44fc-9957-6efe2dcb97ed\",\"4aa986b3-212d-426f-a1e9-776207bd90f6\",\"f3d0030f-2dec-49bd-8c11-25f4a133c528\",\"30d07248-a3c0-4a34-827b-e30f92eb9372\"]},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"6dd94a1c-d02a-49b4-9224-0a0fb5cf2e07\",\"label\":\"Meet with the key contact on site (Coffee Champions) and obtain feedback on the general operation of the machine.\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"3634cb99-09d4-479f-9ae5-7366431aae38\",\"label\":\"Good\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"645976dd-3df0-4226-8406-2922b38e79e6\"]},{\"parent_id\":\"6dd94a1c-d02a-49b4-9224-0a0fb5cf2e07\",\"item_id\":\"645976dd-3df0-4226-8406-2922b38e79e6\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"weighting\":1,\"condition\":\"3f206180-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"7f45628d-ed29-4b42-836f-fd1001cd450e\"]},{\"parent_id\":\"645976dd-3df0-4226-8406-2922b38e79e6\",\"item_id\":\"7f45628d-ed29-4b42-836f-fd1001cd450e\",\"label\":\"Please detail all feedback:\",\"type\":\"text\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"No issues have been reported.\"}},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"2d758316-ce20-4662-88d7-b5b8ffc508e0\",\"label\":\"Perform a full site walk around checking all point of sale is in good condition and has the correct price point displayed. Replenish any items if necessary.\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"c6c011ed-4ade-460d-a04b-da730834b667\",\"is_mandatory\":true},\"responses\":{\"text\":\"X2 Thorntons stickers added to pavement sign, x1 Thorntons sticker added to machine, x1 bachelor's sticker added to machine.\\n\\nX2 dual branded hanging signs also issued to the key contact.\",\"selected\":[{\"id\":\"060ace00-1f61-468e-9c42-918fa93badcf\",\"label\":\"Good condition\",\"colour\":\"19,133,95\",\"score\":0,\"enable_score\":false}]},\"children\":[\"b3ad9267-549c-481a-af52-160518913a59\",\"a76d564d-fd38-47d6-902d-4d76b6223f8d\",\"0ac851c7-5814-4fe9-b982-1ef9376eed66\"]},{\"parent_id\":\"2d758316-ce20-4662-88d7-b5b8ffc508e0\",\"item_id\":\"b3ad9267-549c-481a-af52-160518913a59\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"060ace00-1f61-468e-9c42-918fa93badcf\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"2a6c20b1-18a3-417b-a95c-d02ecd7b0afd\"]},{\"parent_id\":\"b3ad9267-549c-481a-af52-160518913a59\",\"item_id\":\"2a6c20b1-18a3-417b-a95c-d02ecd7b0afd\",\"label\":\"Take pictures of all POS on site:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T17:59:30.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"438d735d-6f94-438e-8994-cd163b065d3b\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/438d735d-6f94-438e-8994-cd163b065d3b\"},{\"date_created\":\"2020-11-04T18:03:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"46e5715e-730f-4848-bd85-7002e22766c9\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/46e5715e-730f-4848-bd85-7002e22766c9\"},{\"date_created\":\"2020-11-04T18:03:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"65860ca3-7f56-48b3-a8ee-3a63d49440c8\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/65860ca3-7f56-48b3-a8ee-3a63d49440c8\"}]},{\"parent_id\":\"2d758316-ce20-4662-88d7-b5b8ffc508e0\",\"item_id\":\"a76d564d-fd38-47d6-902d-4d76b6223f8d\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"060ace01-1f61-468e-9c42-918fa93badcf\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"5c3af0c6-7715-4bc6-9a0d-8b389528d074\"]},{\"parent_id\":\"a76d564d-fd38-47d6-902d-4d76b6223f8d\",\"item_id\":\"5c3af0c6-7715-4bc6-9a0d-8b389528d074\",\"label\":\"Please replenish POS.\",\"type\":\"question\",\"inactive\":true,\"options\":{\"weighting\":1,\"response_set\":\"be33de9d-7db6-45eb-a9d5-65986b351b0a\",\"is_mandatory\":true},\"responses\":{\"text\":\"\"},\"children\":[\"0a1cd514-f882-4600-a591-399b8d056647\",\"99f7415a-b090-43ac-835c-4c492f10010e\"]},{\"parent_id\":\"5c3af0c6-7715-4bc6-9a0d-8b389528d074\",\"item_id\":\"0a1cd514-f882-4600-a591-399b8d056647\",\"label\":\"\",\"type\":\"smartfield\",\"inactive\":true,\"evaluation\":false,\"options\":{\"values\":[\"a49ff74f-e77e-4a07-a3f1-66f455f350d0\",\"647cf616-97cc-4492-8b55-0353b957aa94\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"eb697411-dc2b-4e6e-bf01-8475cd9b0fe0\"]},{\"parent_id\":\"0a1cd514-f882-4600-a591-399b8d056647\",\"item_id\":\"eb697411-dc2b-4e6e-bf01-8475cd9b0fe0\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"5c3af0c6-7715-4bc6-9a0d-8b389528d074\",\"item_id\":\"99f7415a-b090-43ac-835c-4c492f10010e\",\"label\":\"\",\"type\":\"smartfield\",\"inactive\":true,\"evaluation\":false,\"options\":{\"values\":[\"0ae07391-98fb-4fa2-8300-bb1db973132c\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"653ac709-f1c1-4811-925e-5522b676168f\"]},{\"parent_id\":\"99f7415a-b090-43ac-835c-4c492f10010e\",\"item_id\":\"653ac709-f1c1-4811-925e-5522b676168f\",\"label\":\"Take photos of all POS:\",\"type\":\"media\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"2d758316-ce20-4662-88d7-b5b8ffc508e0\",\"item_id\":\"0ac851c7-5814-4fe9-b982-1ef9376eed66\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"060ace02-1f61-468e-9c42-918fa93badcf\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"6aa2dcb4-5d04-44b8-9ad2-baaac817e7c0\"]},{\"parent_id\":\"0ac851c7-5814-4fe9-b982-1ef9376eed66\",\"item_id\":\"6aa2dcb4-5d04-44b8-9ad2-baaac817e7c0\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"13f7fb17-72c2-4f44-8731-690293129ef9\",\"label\":\"Ensure that the site has an Out Of Order sign.\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"3d7b9677-7f87-4452-a6bd-2209085cf4d1\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"16d754bb-2885-49df-9a04-015488f51f64\",\"label\":\"Not Present\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false}]},\"children\":[\"066bab22-732f-4906-bf08-9b251ed360cb\",\"c4c6ef9e-02e7-44b6-86e2-2382003fccdf\"]},{\"parent_id\":\"13f7fb17-72c2-4f44-8731-690293129ef9\",\"item_id\":\"066bab22-732f-4906-bf08-9b251ed360cb\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"16d754bb-2885-49df-9a04-015488f51f64\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"640bfd04-36d5-444b-a71a-0794b2cfb051\"]},{\"parent_id\":\"066bab22-732f-4906-bf08-9b251ed360cb\",\"item_id\":\"640bfd04-36d5-444b-a71a-0794b2cfb051\",\"label\":\"Issue the site with an Out Of Order sign.\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"6909bc0b-27b2-470d-b4ab-fbd1ac2928f3\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"167a3672-d076-46c1-826b-066a101a0042\",\"label\":\"Not Issued\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false}]},\"children\":[\"c863e3d9-c0b3-44e8-8a52-017c4a922b8e\",\"dde68e25-cda7-4999-a810-6f9fcd09bb28\"]},{\"parent_id\":\"640bfd04-36d5-444b-a71a-0794b2cfb051\",\"item_id\":\"c863e3d9-c0b3-44e8-8a52-017c4a922b8e\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"167a3672-d076-46c1-826b-066a101a0042\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"3dba15ce-83d8-4c8a-9dd0-d8ceef2a2af9\"]},{\"parent_id\":\"c863e3d9-c0b3-44e8-8a52-017c4a922b8e\",\"item_id\":\"3dba15ce-83d8-4c8a-9dd0-d8ceef2a2af9\",\"label\":\"What actions have been taken to rectify this?\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"New signs have been ordered - one will be issued during the next visit. \"}},{\"parent_id\":\"640bfd04-36d5-444b-a71a-0794b2cfb051\",\"item_id\":\"dde68e25-cda7-4999-a810-6f9fcd09bb28\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"3c7c1b75-c740-4572-a736-1739b2659855\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"b036df36-43ef-4c6d-b0f8-78b183ac97c1\"]},{\"parent_id\":\"dde68e25-cda7-4999-a810-6f9fcd09bb28\",\"item_id\":\"b036df36-43ef-4c6d-b0f8-78b183ac97c1\",\"label\":\"Take a photo of the Out Of Order sign:\",\"type\":\"media\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"13f7fb17-72c2-4f44-8731-690293129ef9\",\"item_id\":\"c4c6ef9e-02e7-44b6-86e2-2382003fccdf\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"db32aa1b-6cb6-4bd2-8cfa-d78aa63b662c\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"f2f36b6e-f3c5-42f2-a947-fc01a9066f91\"]},{\"parent_id\":\"c4c6ef9e-02e7-44b6-86e2-2382003fccdf\",\"item_id\":\"f2f36b6e-f3c5-42f2-a947-fc01a9066f91\",\"label\":\"Take a photo of the Out Of Order sign:\",\"type\":\"media\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"63ba1360-3874-4a58-892d-c69b3d274e39\",\"label\":\"Ensure the machine has correct Allergen Advice notice on clear display.\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"3d7b9677-7f87-4452-a6bd-2209085cf4d1\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"db32aa1b-6cb6-4bd2-8cfa-d78aa63b662c\",\"label\":\"Present\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"cca1855a-f551-4275-8fa9-e4ae86fdb564\",\"5027a558-4d87-4d48-b578-3d55a3a9351b\"]},{\"parent_id\":\"63ba1360-3874-4a58-892d-c69b3d274e39\",\"item_id\":\"cca1855a-f551-4275-8fa9-e4ae86fdb564\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"db32aa1b-6cb6-4bd2-8cfa-d78aa63b662c\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"702cc171-1eb3-466a-9cb0-d692121f7450\"]},{\"parent_id\":\"cca1855a-f551-4275-8fa9-e4ae86fdb564\",\"item_id\":\"702cc171-1eb3-466a-9cb0-d692121f7450\",\"label\":\"Take a photo of the Allergen Advice:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T17:12:30.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"778b8082-26da-44f6-b5a8-e6eb4a89bbfd\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/778b8082-26da-44f6-b5a8-e6eb4a89bbfd\"}]},{\"parent_id\":\"63ba1360-3874-4a58-892d-c69b3d274e39\",\"item_id\":\"5027a558-4d87-4d48-b578-3d55a3a9351b\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"16d754bb-2885-49df-9a04-015488f51f64\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"48a562b2-c34c-4f2c-88d2-3178b70a57a8\"]},{\"parent_id\":\"5027a558-4d87-4d48-b578-3d55a3a9351b\",\"item_id\":\"48a562b2-c34c-4f2c-88d2-3178b70a57a8\",\"label\":\"Apply Allergen Advice to the front of the machine.\",\"type\":\"question\",\"inactive\":true,\"options\":{\"weighting\":1,\"response_set\":\"b786ea78-79a4-4b60-97ba-ae0ef2ec50ff\",\"is_mandatory\":true},\"responses\":{\"text\":\"\"},\"children\":[\"c99a2050-d6d4-4611-8fd9-7366a7f8b421\",\"4b6c63c8-9a85-4f41-96cc-45ecd754faeb\"]},{\"parent_id\":\"48a562b2-c34c-4f2c-88d2-3178b70a57a8\",\"item_id\":\"c99a2050-d6d4-4611-8fd9-7366a7f8b421\",\"label\":\"\",\"type\":\"smartfield\",\"inactive\":true,\"evaluation\":false,\"options\":{\"values\":[\"18a4c9bd-074c-431d-951c-badd32bce52e\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"260fb4cf-46e3-4faa-94c4-1922560e2c36\"]},{\"parent_id\":\"c99a2050-d6d4-4611-8fd9-7366a7f8b421\",\"item_id\":\"260fb4cf-46e3-4faa-94c4-1922560e2c36\",\"label\":\"What steps have been taken to rectify this?\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"48a562b2-c34c-4f2c-88d2-3178b70a57a8\",\"item_id\":\"4b6c63c8-9a85-4f41-96cc-45ecd754faeb\",\"label\":\"\",\"type\":\"smartfield\",\"inactive\":true,\"evaluation\":false,\"options\":{\"values\":[\"fc739d28-112c-40b5-9a99-d0d76f8e2e50\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"b8a66b76-099e-442c-8428-0133ad9a8d25\"]},{\"parent_id\":\"4b6c63c8-9a85-4f41-96cc-45ecd754faeb\",\"item_id\":\"b8a66b76-099e-442c-8428-0133ad9a8d25\",\"label\":\"Take a photo of the Allergen Advice:\",\"type\":\"media\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"75962c61-fd19-4c35-8308-f5119f4e83c1\",\"label\":\"Ensure the machine has a hot water / safety caution sticker / label on clear display.\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"3d7b9677-7f87-4452-a6bd-2209085cf4d1\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"db32aa1b-6cb6-4bd2-8cfa-d78aa63b662c\",\"label\":\"Present\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"066a8f02-debe-40d2-b19a-9ec681dda82d\",\"3b3782bb-8075-4a19-901e-bf4c17a81779\"]},{\"parent_id\":\"75962c61-fd19-4c35-8308-f5119f4e83c1\",\"item_id\":\"066a8f02-debe-40d2-b19a-9ec681dda82d\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"16d754bb-2885-49df-9a04-015488f51f64\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"fd81b881-8cad-4219-b74c-1b7b3b8a22c9\"]},{\"parent_id\":\"066a8f02-debe-40d2-b19a-9ec681dda82d\",\"item_id\":\"fd81b881-8cad-4219-b74c-1b7b3b8a22c9\",\"label\":\"Apply a Caution Sticker to the front of the machine.\",\"type\":\"question\",\"inactive\":true,\"options\":{\"weighting\":1,\"response_set\":\"b786ea78-79a4-4b60-97ba-ae0ef2ec50ff\",\"is_mandatory\":true},\"responses\":{\"text\":\"\"},\"children\":[\"0c3170f2-9622-43ee-9f26-afd4f3b2e43f\",\"43b4f495-fd24-44eb-8445-3203c787458e\"]},{\"parent_id\":\"fd81b881-8cad-4219-b74c-1b7b3b8a22c9\",\"item_id\":\"0c3170f2-9622-43ee-9f26-afd4f3b2e43f\",\"label\":\"\",\"type\":\"smartfield\",\"inactive\":true,\"evaluation\":false,\"options\":{\"values\":[\"18a4c9bd-074c-431d-951c-badd32bce52e\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"21fa104d-d415-4c84-bbb2-0584ebf29c5f\"]},{\"parent_id\":\"0c3170f2-9622-43ee-9f26-afd4f3b2e43f\",\"item_id\":\"21fa104d-d415-4c84-bbb2-0584ebf29c5f\",\"label\":\"What steps have been taken to rectify this?\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"fd81b881-8cad-4219-b74c-1b7b3b8a22c9\",\"item_id\":\"43b4f495-fd24-44eb-8445-3203c787458e\",\"label\":\"\",\"type\":\"smartfield\",\"inactive\":true,\"evaluation\":false,\"options\":{\"values\":[\"fc739d28-112c-40b5-9a99-d0d76f8e2e50\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"e3eb4e3b-67b6-41f5-82a9-ca03bc64c678\"]},{\"parent_id\":\"43b4f495-fd24-44eb-8445-3203c787458e\",\"item_id\":\"e3eb4e3b-67b6-41f5-82a9-ca03bc64c678\",\"label\":\"Take a photo of the Caution Sticker:\",\"type\":\"media\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"75962c61-fd19-4c35-8308-f5119f4e83c1\",\"item_id\":\"3b3782bb-8075-4a19-901e-bf4c17a81779\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"db32aa1b-6cb6-4bd2-8cfa-d78aa63b662c\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"47c7ef5b-163a-4f3f-b75f-78a5ab8f1a7b\"]},{\"parent_id\":\"3b3782bb-8075-4a19-901e-bf4c17a81779\",\"item_id\":\"47c7ef5b-163a-4f3f-b75f-78a5ab8f1a7b\",\"label\":\"Take a photo of the Caution Label:\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T17:14:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"581e38a2-d5f8-484a-8b3a-d996db660313\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/581e38a2-d5f8-484a-8b3a-d996db660313\"}]},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"98c69298-d093-4cb7-a666-6a7369d99f8c\",\"label\":\"Check the date on the Water Filter and input the age of filter in months.\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"16\"},\"children\":[\"38900ab3-e6a8-467d-bcf2-8c788dbd98f2\"]},{\"parent_id\":\"98c69298-d093-4cb7-a666-6a7369d99f8c\",\"item_id\":\"38900ab3-e6a8-467d-bcf2-8c788dbd98f2\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"12\"],\"weighting\":1,\"condition\":\"f8b5db76-1941-444f-b14e-6f22109bb234\",\"is_mandatory\":false},\"children\":[\"eb42e760-dc52-4db2-88d7-18602d129e36\"]},{\"parent_id\":\"38900ab3-e6a8-467d-bcf2-8c788dbd98f2\",\"item_id\":\"eb42e760-dc52-4db2-88d7-18602d129e36\",\"label\":\"Please change the Water Filter.\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"ad3a43b5-cf17-48cb-a515-a3c433021ea8\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"1a715901-2f0a-47a6-9481-7ab44adad917\",\"label\":\"Not Changed\",\"colour\":\"198,0,34\",\"score\":1,\"enable_score\":false}]},\"children\":[\"40614226-2abf-449e-863a-da6cf32c38c8\"]},{\"parent_id\":\"eb42e760-dc52-4db2-88d7-18602d129e36\",\"item_id\":\"40614226-2abf-449e-863a-da6cf32c38c8\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"1a715901-2f0a-47a6-9481-7ab44adad917\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"579f27b6-aece-42f4-8e64-282737384731\"]},{\"parent_id\":\"40614226-2abf-449e-863a-da6cf32c38c8\",\"item_id\":\"579f27b6-aece-42f4-8e64-282737384731\",\"label\":\"What steps have been taken to rectify this?\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"New filters have been ordered- one will be installed at the next visit.\"}},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"8866a17c-b4c9-4327-b3b1-80b4fdc10303\",\"label\":\"Check the level of stock in the machine canisters, condiment holders and syrup bottles. Ensure that correct bean management is being used.\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"c361e12b-ebc9-4755-9cb0-ca656a6471a0\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"08719a65-0562-47ad-97ce-574604fae8e3\",\"label\":\"Good\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"ab38dabe-f53d-4938-9ed1-cee9359ad465\"]},{\"parent_id\":\"8866a17c-b4c9-4327-b3b1-80b4fdc10303\",\"item_id\":\"ab38dabe-f53d-4938-9ed1-cee9359ad465\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"5c8439e1-1226-44ed-979a-56e74254307f\",\"7881f618-c835-45a1-86d3-569ae13e3808\",\"a3ddd1ff-b4c1-4990-b1a6-ef33554101d4\",\"24052431-602d-4103-866f-7437f49cd0e4\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"982f2688-1420-413c-977d-92ae0d8d5304\"]},{\"parent_id\":\"ab38dabe-f53d-4938-9ed1-cee9359ad465\",\"item_id\":\"982f2688-1420-413c-977d-92ae0d8d5304\",\"label\":\"Provide a reason for your answer:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"45dc7f1e-ca9d-4f36-91a6-462c5cc82521\",\"label\":\"What is the state of the machine's cleanliness?\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"0acb7300-4d76-46ce-85ac-43c62afbddf1\",\"is_mandatory\":true},\"responses\":{\"text\":\"Whipper bowl 1 had an accumulation of ingredient but this is due to a low flow rate.  Flow rate improved during visit so it should no longer be an issue.\",\"selected\":[{\"id\":\"9db6ab0b-6c94-4cc9-9881-b226c8a4090f\",\"label\":\"Very Good\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"7dfe5660-d1f9-4a51-a862-7c367e353610\"]},{\"parent_id\":\"45dc7f1e-ca9d-4f36-91a6-462c5cc82521\",\"item_id\":\"7dfe5660-d1f9-4a51-a862-7c367e353610\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"f1c8f8ed-70d7-4f5c-a5bb-551d54dd5810\",\"08f494d8-a40f-4108-8bb0-9339111629e4\",\"8b6ecf16-8db0-45de-acae-036da2021182\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"1a7b3c90-b5d4-4695-9171-8a679409b1d2\"]},{\"parent_id\":\"7dfe5660-d1f9-4a51-a862-7c367e353610\",\"item_id\":\"1a7b3c90-b5d4-4695-9171-8a679409b1d2\",\"label\":\"Please provide additional details:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"c3cf85d2-b7f4-450a-87c3-0650f1cde03a\",\"label\":\"Check that the site has an Operating Manual and that the Daily Cleaning Sign Off Sheet is being filled in. \",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"234faa20-40fb-40fc-932b-bc3d5833d00b\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"448d804d-bd38-4fcb-9414-3b5b0194baa2\",\"label\":\"Present & Filled In\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"e4ba2b25-4c1f-4a31-b016-1473a5b8bbd1\"]},{\"parent_id\":\"c3cf85d2-b7f4-450a-87c3-0650f1cde03a\",\"item_id\":\"e4ba2b25-4c1f-4a31-b016-1473a5b8bbd1\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"a20d6264-c4fa-4adb-8cd1-4023dec45a15\",\"39e23975-c94e-4047-92a0-f824ce7ce57e\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"11d2cf4b-4e09-4fc1-ab79-553f4a3f6cee\"]},{\"parent_id\":\"e4ba2b25-4c1f-4a31-b016-1473a5b8bbd1\",\"item_id\":\"11d2cf4b-4e09-4fc1-ab79-553f4a3f6cee\",\"label\":\"Please provide additional details:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"1e91276d-2e17-4995-b508-4af9e4080a55\",\"label\":\"Ensure that the machine is setup to carry out an automatic Flush and Flush Brewers cycle every day between 05:00  06:00.\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"f3932779-5f6f-49fb-8ea7-321e975d3782\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"900eb300-2779-45a9-aef9-a4a5d6113734\",\"label\":\"Set\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"08181c0a-b3b2-46a8-8967-ca729f98986a\"]},{\"parent_id\":\"1e91276d-2e17-4995-b508-4af9e4080a55\",\"item_id\":\"08181c0a-b3b2-46a8-8967-ca729f98986a\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"f53979dc-8253-4984-a5a5-ab90671a9c90\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"872feb1b-eac6-4272-9522-542178938666\"]},{\"parent_id\":\"08181c0a-b3b2-46a8-8967-ca729f98986a\",\"item_id\":\"872feb1b-eac6-4272-9522-542178938666\",\"label\":\"Please set up the automatic flushes. \",\"type\":\"question\",\"inactive\":true,\"options\":{\"weighting\":1,\"response_set\":\"f3932779-5f6f-49fb-8ea7-321e975d3782\",\"is_mandatory\":true},\"responses\":{\"text\":\"\"},\"children\":[\"0f896cb7-f873-4ba1-a8c7-f02d18f3f8dc\"]},{\"parent_id\":\"872feb1b-eac6-4272-9522-542178938666\",\"item_id\":\"0f896cb7-f873-4ba1-a8c7-f02d18f3f8dc\",\"label\":\"\",\"type\":\"smartfield\",\"inactive\":true,\"evaluation\":false,\"options\":{\"values\":[\"f53979dc-8253-4984-a5a5-ab90671a9c90\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"7d125d8c-c6a3-460b-8267-6549992b912e\"]},{\"parent_id\":\"0f896cb7-f873-4ba1-a8c7-f02d18f3f8dc\",\"item_id\":\"7d125d8c-c6a3-460b-8267-6549992b912e\",\"label\":\"Why have the flushes not been set up?\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"291fa9cf-f685-44fc-9957-6efe2dcb97ed\",\"label\":\"Test that the machines telemetry and payment systems are working (if applicable) by sending a manual DEX on the Nayax AMIT Box and making a paid drink with card, cash and contactless methods of payment.\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"d743f356-a147-472c-a790-0c46a187de92\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"6bb1beb4-494e-4a17-bff7-bed8a6fcd3d0\",\"label\":\"Working\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"aa21508d-39b3-43ca-b84f-4525ca764927\",\"ade7218e-2e92-46b8-aad7-9e020b51fbcc\",\"bfb0dc90-b47d-4358-97c7-815ca34a901d\"]},{\"parent_id\":\"291fa9cf-f685-44fc-9957-6efe2dcb97ed\",\"item_id\":\"aa21508d-39b3-43ca-b84f-4525ca764927\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"6bb1beb4-494e-4a17-bff7-bed8a6fcd3d1\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"c8aebb6f-9e69-49d8-ac8d-3dba8b702d97\"]},{\"parent_id\":\"aa21508d-39b3-43ca-b84f-4525ca764927\",\"item_id\":\"c8aebb6f-9e69-49d8-ac8d-3dba8b702d97\",\"label\":\"Please contact technical support and troubleshoot the problem. \",\"type\":\"information\",\"inactive\":true,\"options\":{\"weighting\":1,\"type\":\"text\",\"is_mandatory\":false,\"visible_in_audit\":true,\"visible_in_report\":true}},{\"parent_id\":\"291fa9cf-f685-44fc-9957-6efe2dcb97ed\",\"item_id\":\"ade7218e-2e92-46b8-aad7-9e020b51fbcc\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"6bb1beb4-494e-4a17-bff7-bed8a6fcd3d0\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"b11f81e9-0928-4e53-bb3f-1f948567159a\"]},{\"parent_id\":\"ade7218e-2e92-46b8-aad7-9e020b51fbcc\",\"item_id\":\"b11f81e9-0928-4e53-bb3f-1f948567159a\",\"label\":\"What is the signal strength? \",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"22\"}},{\"parent_id\":\"291fa9cf-f685-44fc-9957-6efe2dcb97ed\",\"item_id\":\"bfb0dc90-b47d-4358-97c7-815ca34a901d\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"6bb1beb4-494e-4a17-bff7-bed8a6fcd3d1\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"c9bcd22e-c239-4524-87af-9e8501507aaa\"]},{\"parent_id\":\"bfb0dc90-b47d-4358-97c7-815ca34a901d\",\"item_id\":\"c9bcd22e-c239-4524-87af-9e8501507aaa\",\"label\":\"What is the signal strength?\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"4aa986b3-212d-426f-a1e9-776207bd90f6\",\"label\":\"Find out how many members of staff are trained on the machines daily, weekly and monthly cleaning procedures. Provide any additional training if required or schedule a session with the Store Manager.\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"5\"},\"children\":[\"bd180307-fd33-4c8d-8192-480bd61409f9\"]},{\"parent_id\":\"4aa986b3-212d-426f-a1e9-776207bd90f6\",\"item_id\":\"bd180307-fd33-4c8d-8192-480bd61409f9\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"0\"],\"weighting\":1,\"condition\":\"f8b5db76-1941-444f-b14e-6f22109bb234\",\"is_mandatory\":false},\"children\":[\"fd887de4-f96b-4f5f-8e2b-f8c9a73b0751\"]},{\"parent_id\":\"bd180307-fd33-4c8d-8192-480bd61409f9\",\"item_id\":\"fd887de4-f96b-4f5f-8e2b-f8c9a73b0751\",\"label\":\"Has additional training been arranged?\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"93a855ae-871c-4337-b0ee-c221428e1631\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"df808f99-7e10-4658-92b3-edb4e71ebb08\",\"label\":\"No\",\"colour\":\"112,112,112\",\"score\":1,\"enable_score\":false}]}},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"f3d0030f-2dec-49bd-8c11-25f4a133c528\",\"label\":\"Explain the call out procedure for any faults or breakdowns with the machine and run through all main contacts for stock ordering and general assistance. Ensure there is a copy of these details on site.\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"5f785d00-1b76-4d56-84f8-6d0f52caa884\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"2062ef4f-8d36-43c7-96a8-ec901556c047\",\"label\":\"Information is Known\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]}},{\"parent_id\":\"7673d3ae-d3dd-40fe-8076-88fbf769adb9\",\"item_id\":\"30d07248-a3c0-4a34-827b-e30f92eb9372\",\"label\":\"Please take any further pictures you think are required.\",\"type\":\"media\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{},\"media\":[{\"date_created\":\"2020-11-04T18:03:40.000Z\",\"file_ext\":\"jpg\",\"label\":\"0ab45897-e28c-45f7-8dbc-8065976ea6ee\",\"media_id\":\"2e265b94-1da1-46d9-8a02-dc79d49f0b8f\",\"href\":\"https://api.safetyculture.io/audits/audit_fb100ee6fb5c48acb754b2c5535af9f9/media/2e265b94-1da1-46d9-8a02-dc79d49f0b8f\"}]},{\"item_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"label\":\"Drink Testing\",\"type\":\"section\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"219e97aa-6fba-4266-a47c-cccd8541a58f\",\"3149d893-7d56-4b7d-b9d0-cb6dd75e437d\",\"9afb4991-60ac-43e6-a09b-c6f49aec19f6\",\"89edc221-8983-4aa6-b9b8-a003a6d33b87\",\"7a13b584-d054-49a6-baa3-fb2c6e737d66\",\"b422060c-d446-4cdf-bed0-394f37bf71c1\",\"6c5bb2e7-2bca-497c-b3fb-43e40fb915d5\",\"8a7944f2-238f-4681-a341-e669548315d8\",\"576270be-7f77-4382-ab40-f66d68c0731a\",\"72bd1ba1-212c-40bf-b9e3-c124cca8e47d\",\"87dedce5-a5ab-437d-b72e-5c26dd433947\",\"4900ace6-aaf2-44c3-8157-7ff56eec3bc8\",\"e367001f-b019-49e7-b7b7-d303c3080a35\"]},{\"parent_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"item_id\":\"219e97aa-6fba-4266-a47c-cccd8541a58f\",\"label\":\"Cappuccino\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"label\":\"Satisfactory\",\"colour\":\"255,176,0\",\"score\":1,\"enable_score\":false}]},\"children\":[\"9fc6ef08-8880-4f52-abe3-007c9a858db0\",\"83da38f6-5267-49c4-9cd1-3f14da48f20e\"]},{\"parent_id\":\"219e97aa-6fba-4266-a47c-cccd8541a58f\",\"item_id\":\"9fc6ef08-8880-4f52-abe3-007c9a858db0\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"7c50ae8c-610c-4636-b47c-8d92e6b9b780\"]},{\"parent_id\":\"9fc6ef08-8880-4f52-abe3-007c9a858db0\",\"item_id\":\"7c50ae8c-610c-4636-b47c-8d92e6b9b780\",\"label\":\"What adjustments have been made to improve this?\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"Loosened chocolate valve & reduced fill level.\"},\"children\":[\"4015cf2f-b8e3-4194-af5d-07ea7d94f82c\"]},{\"parent_id\":\"7c50ae8c-610c-4636-b47c-8d92e6b9b780\",\"item_id\":\"4015cf2f-b8e3-4194-af5d-07ea7d94f82c\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"\"],\"weighting\":1,\"condition\":\"6ff300f0-e501-11e1-aff1-0800200c9a66\",\"is_mandatory\":false}},{\"parent_id\":\"219e97aa-6fba-4266-a47c-cccd8541a58f\",\"item_id\":\"83da38f6-5267-49c4-9cd1-3f14da48f20e\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"420969b6-efa8-4937-9358-192031f76fea\"]},{\"parent_id\":\"83da38f6-5267-49c4-9cd1-3f14da48f20e\",\"item_id\":\"420969b6-efa8-4937-9358-192031f76fea\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"item_id\":\"3149d893-7d56-4b7d-b9d0-cb6dd75e437d\",\"label\":\"Latte\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"label\":\"Satisfactory\",\"colour\":\"255,176,0\",\"score\":1,\"enable_score\":false}]},\"children\":[\"7e209cc2-a21a-413d-ad04-afb75a6e8291\",\"3238bbca-a34e-4c8b-88a2-cab6fe86bd19\"]},{\"parent_id\":\"3149d893-7d56-4b7d-b9d0-cb6dd75e437d\",\"item_id\":\"7e209cc2-a21a-413d-ad04-afb75a6e8291\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"22f03606-1454-4d61-8313-711a2f234230\"]},{\"parent_id\":\"7e209cc2-a21a-413d-ad04-afb75a6e8291\",\"item_id\":\"22f03606-1454-4d61-8313-711a2f234230\",\"label\":\"What adjustments have been made to improve this?\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"Loosened chocolate valve & reduced fill level. \"},\"children\":[\"6d8dc350-a0f3-4d45-ba8d-41548e38fe8b\"]},{\"parent_id\":\"22f03606-1454-4d61-8313-711a2f234230\",\"item_id\":\"6d8dc350-a0f3-4d45-ba8d-41548e38fe8b\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"\"],\"weighting\":1,\"condition\":\"6ff300f0-e501-11e1-aff1-0800200c9a66\",\"is_mandatory\":false}},{\"parent_id\":\"3149d893-7d56-4b7d-b9d0-cb6dd75e437d\",\"item_id\":\"3238bbca-a34e-4c8b-88a2-cab6fe86bd19\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"b796a2bd-c750-4094-a674-fc3080c35cc5\"]},{\"parent_id\":\"3238bbca-a34e-4c8b-88a2-cab6fe86bd19\",\"item_id\":\"b796a2bd-c750-4094-a674-fc3080c35cc5\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"item_id\":\"9afb4991-60ac-43e6-a09b-c6f49aec19f6\",\"label\":\"White Coffee\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"label\":\"Satisfactory\",\"colour\":\"255,176,0\",\"score\":1,\"enable_score\":false}]},\"children\":[\"934dbf04-18ba-4283-a178-bdb8c5e21e79\",\"f14b3aff-0647-4365-b3cc-f4ddb9ecd7fe\"]},{\"parent_id\":\"9afb4991-60ac-43e6-a09b-c6f49aec19f6\",\"item_id\":\"934dbf04-18ba-4283-a178-bdb8c5e21e79\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"6ddf95df-53bd-4377-a6c0-9bb81a218ac5\"]},{\"parent_id\":\"934dbf04-18ba-4283-a178-bdb8c5e21e79\",\"item_id\":\"6ddf95df-53bd-4377-a6c0-9bb81a218ac5\",\"label\":\"What adjustments have been made to improve this?\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"Removed water shot time / reduced fill level \"},\"children\":[\"8b135513-ca25-47f8-832f-7e2e343346a7\"]},{\"parent_id\":\"6ddf95df-53bd-4377-a6c0-9bb81a218ac5\",\"item_id\":\"8b135513-ca25-47f8-832f-7e2e343346a7\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"\"],\"weighting\":1,\"condition\":\"6ff300f0-e501-11e1-aff1-0800200c9a66\",\"is_mandatory\":false}},{\"parent_id\":\"9afb4991-60ac-43e6-a09b-c6f49aec19f6\",\"item_id\":\"f14b3aff-0647-4365-b3cc-f4ddb9ecd7fe\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"2ec3be8f-8bab-4869-b0df-60c90a0fd2bb\"]},{\"parent_id\":\"f14b3aff-0647-4365-b3cc-f4ddb9ecd7fe\",\"item_id\":\"2ec3be8f-8bab-4869-b0df-60c90a0fd2bb\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"item_id\":\"89edc221-8983-4aa6-b9b8-a003a6d33b87\",\"label\":\"Americano\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"3634cb99-09d4-479f-9ae5-7366431aae38\",\"label\":\"Good\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"60c3dc32-5051-477a-b7da-4d7bdb080642\",\"39a3f89d-d1e4-4fd1-b2b3-61d1e1db2022\"]},{\"parent_id\":\"89edc221-8983-4aa6-b9b8-a003a6d33b87\",\"item_id\":\"60c3dc32-5051-477a-b7da-4d7bdb080642\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"e26c9760-d8ef-48ff-9b1b-18e95619b051\"]},{\"parent_id\":\"60c3dc32-5051-477a-b7da-4d7bdb080642\",\"item_id\":\"e26c9760-d8ef-48ff-9b1b-18e95619b051\",\"label\":\"What adjustments have been made to improve this?\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true},\"children\":[\"0c23512e-4df7-40ba-8f49-6492bbbc9085\"]},{\"parent_id\":\"e26c9760-d8ef-48ff-9b1b-18e95619b051\",\"item_id\":\"0c23512e-4df7-40ba-8f49-6492bbbc9085\",\"label\":\"\",\"type\":\"smartfield\",\"inactive\":true,\"evaluation\":true,\"options\":{\"values\":[\"\"],\"weighting\":1,\"condition\":\"6ff300f0-e501-11e1-aff1-0800200c9a66\",\"is_mandatory\":false}},{\"parent_id\":\"89edc221-8983-4aa6-b9b8-a003a6d33b87\",\"item_id\":\"39a3f89d-d1e4-4fd1-b2b3-61d1e1db2022\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"5ac77e86-57f5-4967-a101-e8fd519d0fcd\"]},{\"parent_id\":\"39a3f89d-d1e4-4fd1-b2b3-61d1e1db2022\",\"item_id\":\"5ac77e86-57f5-4967-a101-e8fd519d0fcd\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"item_id\":\"7a13b584-d054-49a6-baa3-fb2c6e737d66\",\"label\":\"Flat White\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"3634cb99-09d4-479f-9ae5-7366431aae38\",\"label\":\"Good\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"16cd90d4-512b-49ad-9f39-f559c55111ff\",\"449b30d2-7e10-43a5-84a2-7ac4aa4b09ff\"]},{\"parent_id\":\"7a13b584-d054-49a6-baa3-fb2c6e737d66\",\"item_id\":\"16cd90d4-512b-49ad-9f39-f559c55111ff\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"7403889f-8a04-4277-83a0-6302f9853f63\"]},{\"parent_id\":\"16cd90d4-512b-49ad-9f39-f559c55111ff\",\"item_id\":\"7403889f-8a04-4277-83a0-6302f9853f63\",\"label\":\"What adjustments have been made to improve this?\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true},\"children\":[\"790c1ff6-4496-47e8-8c40-3888548ad121\"]},{\"parent_id\":\"7403889f-8a04-4277-83a0-6302f9853f63\",\"item_id\":\"790c1ff6-4496-47e8-8c40-3888548ad121\",\"label\":\"\",\"type\":\"smartfield\",\"inactive\":true,\"evaluation\":true,\"options\":{\"values\":[\"\"],\"weighting\":1,\"condition\":\"6ff300f0-e501-11e1-aff1-0800200c9a66\",\"is_mandatory\":false}},{\"parent_id\":\"7a13b584-d054-49a6-baa3-fb2c6e737d66\",\"item_id\":\"449b30d2-7e10-43a5-84a2-7ac4aa4b09ff\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"848661c7-4532-4134-a50d-2cd20b590f75\"]},{\"parent_id\":\"449b30d2-7e10-43a5-84a2-7ac4aa4b09ff\",\"item_id\":\"848661c7-4532-4134-a50d-2cd20b590f75\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"item_id\":\"b422060c-d446-4cdf-bed0-394f37bf71c1\",\"label\":\"Double Espresso\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"3634cb99-09d4-479f-9ae5-7366431aae38\",\"label\":\"Good\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"bd74cafe-eb85-4935-90e4-033a845ea7a9\",\"8f02f721-81ae-4f90-b771-08c55d8764d0\",\"94d2b784-a659-477d-bab8-a39830f2f420\",\"ad9964d5-cb44-4590-b664-d22ad6fae0fd\"]},{\"parent_id\":\"b422060c-d446-4cdf-bed0-394f37bf71c1\",\"item_id\":\"bd74cafe-eb85-4935-90e4-033a845ea7a9\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"5e0e693c-b070-43ab-aacd-8f23954b7956\"]},{\"parent_id\":\"bd74cafe-eb85-4935-90e4-033a845ea7a9\",\"item_id\":\"5e0e693c-b070-43ab-aacd-8f23954b7956\",\"label\":\"What adjustments have been made to improve this?\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true},\"children\":[\"857cd599-225f-458f-bf71-549c664830f9\"]},{\"parent_id\":\"5e0e693c-b070-43ab-aacd-8f23954b7956\",\"item_id\":\"857cd599-225f-458f-bf71-549c664830f9\",\"label\":\"\",\"type\":\"smartfield\",\"inactive\":true,\"evaluation\":true,\"options\":{\"values\":[\"\"],\"weighting\":1,\"condition\":\"6ff300f0-e501-11e1-aff1-0800200c9a66\",\"is_mandatory\":false}},{\"parent_id\":\"b422060c-d446-4cdf-bed0-394f37bf71c1\",\"item_id\":\"8f02f721-81ae-4f90-b771-08c55d8764d0\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"dc641bcb-7a89-4ba1-937f-af2748f29175\"]},{\"parent_id\":\"8f02f721-81ae-4f90-b771-08c55d8764d0\",\"item_id\":\"dc641bcb-7a89-4ba1-937f-af2748f29175\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"b422060c-d446-4cdf-bed0-394f37bf71c1\",\"item_id\":\"94d2b784-a659-477d-bab8-a39830f2f420\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"3634cb99-09d4-479f-9ae5-7366431aae38\",\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"0cf336c1-0a42-493f-b090-b243e85e60a9\"]},{\"parent_id\":\"94d2b784-a659-477d-bab8-a39830f2f420\",\"item_id\":\"0cf336c1-0a42-493f-b090-b243e85e60a9\",\"label\":\"Espresso extraction time in seconds:\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"15\"}},{\"parent_id\":\"b422060c-d446-4cdf-bed0-394f37bf71c1\",\"item_id\":\"ad9964d5-cb44-4590-b664-d22ad6fae0fd\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"3634cb99-09d4-479f-9ae5-7366431aae38\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false}},{\"parent_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"item_id\":\"6c5bb2e7-2bca-497c-b3fb-43e40fb915d5\",\"label\":\"Mocha\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"label\":\"Satisfactory\",\"colour\":\"255,176,0\",\"score\":1,\"enable_score\":false}]},\"children\":[\"f61a586c-79af-40a0-b9a6-022ef2ae1d0e\",\"6112bcd9-7fb2-4d07-8940-fd9b27b437e8\"]},{\"parent_id\":\"6c5bb2e7-2bca-497c-b3fb-43e40fb915d5\",\"item_id\":\"f61a586c-79af-40a0-b9a6-022ef2ae1d0e\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"0eefb5dc-7039-420c-8071-77c4494795f0\"]},{\"parent_id\":\"f61a586c-79af-40a0-b9a6-022ef2ae1d0e\",\"item_id\":\"0eefb5dc-7039-420c-8071-77c4494795f0\",\"label\":\"What adjustments have been made to improve this?\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"Loosened chocolate valve & reduced fill level.\"}},{\"parent_id\":\"6c5bb2e7-2bca-497c-b3fb-43e40fb915d5\",\"item_id\":\"6112bcd9-7fb2-4d07-8940-fd9b27b437e8\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"ecc9586b-337b-4f03-b50d-e16847be2854\"]},{\"parent_id\":\"6112bcd9-7fb2-4d07-8940-fd9b27b437e8\",\"item_id\":\"ecc9586b-337b-4f03-b50d-e16847be2854\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"item_id\":\"8a7944f2-238f-4681-a341-e669548315d8\",\"label\":\"Hot Chocolate\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"label\":\"Satisfactory\",\"colour\":\"255,176,0\",\"score\":1,\"enable_score\":false}]},\"children\":[\"4aec8ad6-6663-44bd-a0f7-8a8425f1abfc\",\"62af5a6e-df60-42ae-956e-f01683a0453b\"]},{\"parent_id\":\"8a7944f2-238f-4681-a341-e669548315d8\",\"item_id\":\"4aec8ad6-6663-44bd-a0f7-8a8425f1abfc\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"48706806-55b0-4af6-bb0a-be6517c41c4d\"]},{\"parent_id\":\"4aec8ad6-6663-44bd-a0f7-8a8425f1abfc\",\"item_id\":\"48706806-55b0-4af6-bb0a-be6517c41c4d\",\"label\":\"What adjustments have been made to improve this?\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"Loosened chocolate valve & reduced fill level.\"}},{\"parent_id\":\"8a7944f2-238f-4681-a341-e669548315d8\",\"item_id\":\"62af5a6e-df60-42ae-956e-f01683a0453b\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"0f61fb3c-e3b6-47f0-abdf-6e652f1553bc\"]},{\"parent_id\":\"62af5a6e-df60-42ae-956e-f01683a0453b\",\"item_id\":\"0f61fb3c-e3b6-47f0-abdf-6e652f1553bc\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"item_id\":\"576270be-7f77-4382-ab40-f66d68c0731a\",\"label\":\"Black Tea\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"label\":\"Satisfactory\",\"colour\":\"255,176,0\",\"score\":1,\"enable_score\":false}]},\"children\":[\"9c878a5c-f932-4894-b17d-9ec67d10590e\",\"37b2c7be-f94d-42bc-b93b-acd1af27671b\"]},{\"parent_id\":\"576270be-7f77-4382-ab40-f66d68c0731a\",\"item_id\":\"9c878a5c-f932-4894-b17d-9ec67d10590e\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":true,\"options\":{\"values\":[\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"586d5fdc-c51d-40c7-986c-3bd42007c0a0\"]},{\"parent_id\":\"9c878a5c-f932-4894-b17d-9ec67d10590e\",\"item_id\":\"586d5fdc-c51d-40c7-986c-3bd42007c0a0\",\"label\":\"What adjustments have been made to improve this?\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"Increased fill level.\"}},{\"parent_id\":\"576270be-7f77-4382-ab40-f66d68c0731a\",\"item_id\":\"37b2c7be-f94d-42bc-b93b-acd1af27671b\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"3400cf9f-9288-44b2-bd34-01d74149c56e\"]},{\"parent_id\":\"37b2c7be-f94d-42bc-b93b-acd1af27671b\",\"item_id\":\"3400cf9f-9288-44b2-bd34-01d74149c56e\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"item_id\":\"72bd1ba1-212c-40bf-b9e3-c124cca8e47d\",\"label\":\"White Tea\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"3634cb99-09d4-479f-9ae5-7366431aae38\",\"label\":\"Good\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"65d01c99-1d73-49e5-a56e-30fe03d279fc\",\"03cb5881-1483-4b05-ac62-01bd907d6248\"]},{\"parent_id\":\"72bd1ba1-212c-40bf-b9e3-c124cca8e47d\",\"item_id\":\"65d01c99-1d73-49e5-a56e-30fe03d279fc\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"113b3047-322c-42fc-8136-a3b7d659307c\"]},{\"parent_id\":\"65d01c99-1d73-49e5-a56e-30fe03d279fc\",\"item_id\":\"113b3047-322c-42fc-8136-a3b7d659307c\",\"label\":\"What adjustments have been made to improve this?\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"72bd1ba1-212c-40bf-b9e3-c124cca8e47d\",\"item_id\":\"03cb5881-1483-4b05-ac62-01bd907d6248\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"50844892-f20a-4739-98c0-f2b1cde8af5f\"]},{\"parent_id\":\"03cb5881-1483-4b05-ac62-01bd907d6248\",\"item_id\":\"50844892-f20a-4739-98c0-f2b1cde8af5f\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"item_id\":\"87dedce5-a5ab-437d-b72e-5c26dd433947\",\"label\":\"Tomato Soup\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"3634cb99-09d4-479f-9ae5-7366431aae38\",\"label\":\"Good\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"bf63e36a-4662-43e2-a38e-92381b674490\",\"28405cb1-e045-4e39-b203-438ede92013b\"]},{\"parent_id\":\"87dedce5-a5ab-437d-b72e-5c26dd433947\",\"item_id\":\"bf63e36a-4662-43e2-a38e-92381b674490\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"f28199cc-9dec-48ac-85c7-e334e8101455\"]},{\"parent_id\":\"bf63e36a-4662-43e2-a38e-92381b674490\",\"item_id\":\"f28199cc-9dec-48ac-85c7-e334e8101455\",\"label\":\"What adjustments have been made to improve this?\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"87dedce5-a5ab-437d-b72e-5c26dd433947\",\"item_id\":\"28405cb1-e045-4e39-b203-438ede92013b\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"d0411f40-e4ce-46aa-b530-c9d5019ba0f9\"]},{\"parent_id\":\"28405cb1-e045-4e39-b203-438ede92013b\",\"item_id\":\"d0411f40-e4ce-46aa-b530-c9d5019ba0f9\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"item_id\":\"4900ace6-aaf2-44c3-8157-7ff56eec3bc8\",\"label\":\"Caramel Syrup\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"3634cb99-09d4-479f-9ae5-7366431aae38\",\"label\":\"Good\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"66801b0a-7e9d-41cb-8e09-3fbec77059dd\",\"cf8efd13-6877-4a18-932b-1a7692a3f29b\"]},{\"parent_id\":\"4900ace6-aaf2-44c3-8157-7ff56eec3bc8\",\"item_id\":\"66801b0a-7e9d-41cb-8e09-3fbec77059dd\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"791c6aa7-03a2-4015-a878-f849cc8736c8\"]},{\"parent_id\":\"66801b0a-7e9d-41cb-8e09-3fbec77059dd\",\"item_id\":\"791c6aa7-03a2-4015-a878-f849cc8736c8\",\"label\":\"What adjustments have been made to improve this?\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"4900ace6-aaf2-44c3-8157-7ff56eec3bc8\",\"item_id\":\"cf8efd13-6877-4a18-932b-1a7692a3f29b\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"8a38972c-0759-4cc1-b543-5236f386c6af\"]},{\"parent_id\":\"cf8efd13-6877-4a18-932b-1a7692a3f29b\",\"item_id\":\"8a38972c-0759-4cc1-b543-5236f386c6af\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"a4587d0c-ae4c-4c55-b935-e883ba356520\",\"item_id\":\"e367001f-b019-49e7-b7b7-d303c3080a35\",\"label\":\"Vanilla Syrup\",\"type\":\"question\",\"options\":{\"weighting\":1,\"response_set\":\"4728b690-6be3-4c45-83bd-02b0718e3404\",\"is_mandatory\":true},\"responses\":{\"text\":\"\",\"selected\":[{\"id\":\"3634cb99-09d4-479f-9ae5-7366431aae38\",\"label\":\"Good\",\"colour\":\"19,133,95\",\"score\":1,\"enable_score\":false}]},\"children\":[\"4bbf1068-44f4-47ab-9cd6-dc44bf20aed4\",\"83d689c3-921a-4b6d-a620-1e2637806ed3\"]},{\"parent_id\":\"e367001f-b019-49e7-b7b7-d303c3080a35\",\"item_id\":\"4bbf1068-44f4-47ab-9cd6-dc44bf20aed4\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"e7d9ba1c-1ba5-4ae0-8bc1-1ec650fbc4d1\",\"c3c234aa-9cd4-4002-bf6d-8337362dae24\"],\"weighting\":1,\"condition\":\"3f206184-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"d729f2c4-d648-4d9b-ba37-98c25615ba8e\"]},{\"parent_id\":\"4bbf1068-44f4-47ab-9cd6-dc44bf20aed4\",\"item_id\":\"d729f2c4-d648-4d9b-ba37-98c25615ba8e\",\"label\":\"What adjustments have been made to improve this?\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"parent_id\":\"e367001f-b019-49e7-b7b7-d303c3080a35\",\"item_id\":\"83d689c3-921a-4b6d-a620-1e2637806ed3\",\"label\":\"\",\"type\":\"smartfield\",\"evaluation\":false,\"options\":{\"values\":[\"2c16e14d-23d2-4cf2-8b55-c87b7bf4193f\"],\"weighting\":1,\"condition\":\"3f206182-e4f6-11e1-aff1-0800200c9a66\",\"is_mandatory\":false},\"children\":[\"9a34e761-d82c-4daa-9ffe-5b3e7c988037\"]},{\"parent_id\":\"83d689c3-921a-4b6d-a620-1e2637806ed3\",\"item_id\":\"9a34e761-d82c-4daa-9ffe-5b3e7c988037\",\"label\":\"Reason:\",\"type\":\"textsingle\",\"inactive\":true,\"options\":{\"weighting\":1,\"is_mandatory\":true}},{\"item_id\":\"b9aa1e33-3574-4512-bd89-73a2a60d0aae\",\"label\":\"Drinks Counter Readings\",\"type\":\"section\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\"]},{\"parent_id\":\"b9aa1e33-3574-4512-bd89-73a2a60d0aae\",\"item_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"label\":\"Drinks Counter Readings\",\"type\":\"category\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"0b162d0d-c614-4ca5-a500-b8cdcd75a792\",\"6327ec86-4214-496e-866b-28e9d6791aee\",\"e2f2fc03-0a8a-4893-b564-c7196a44a7ec\",\"e50cb0b9-858a-4fab-897f-56af5f5830f1\",\"b8a1b2a8-ba8a-467d-b7a0-c581ca2a61ae\",\"0581ca55-c881-4d50-9a2c-e9c3d9e64357\",\"2f1b5a6a-f9c7-477e-bf3a-47ebe5c4494a\",\"35687210-8a9e-4c25-a25e-5ee8204ba627\",\"48f46dde-37b8-4bc6-94c2-104eacb24f08\",\"3ec686cb-95bb-4f85-926a-42167164d709\",\"df96eff4-54e0-47ce-9918-52f211f6c089\",\"6e215ada-9ef2-4bbc-8002-b3fb8c6ec08f\",\"df8c8f30-7c25-4b09-8787-44e44a89a4a9\"]},{\"parent_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"item_id\":\"0b162d0d-c614-4ca5-a500-b8cdcd75a792\",\"label\":\"12oz Cappuccino Drink Sales\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1695\"}},{\"parent_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"item_id\":\"6327ec86-4214-496e-866b-28e9d6791aee\",\"label\":\"12oz Latte Drink Sales\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"2335\"}},{\"parent_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"item_id\":\"e2f2fc03-0a8a-4893-b564-c7196a44a7ec\",\"label\":\"12oz White Coffee Drink Sales\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"515\"}},{\"parent_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"item_id\":\"e50cb0b9-858a-4fab-897f-56af5f5830f1\",\"label\":\"12oz Americano Drink Sales\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"282\"}},{\"parent_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"item_id\":\"b8a1b2a8-ba8a-467d-b7a0-c581ca2a61ae\",\"label\":\"12oz Flat White Drink Sales\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"744\"}},{\"parent_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"item_id\":\"0581ca55-c881-4d50-9a2c-e9c3d9e64357\",\"label\":\"12oz Double Espresso Drink Sales\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"195\"}},{\"parent_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"item_id\":\"2f1b5a6a-f9c7-477e-bf3a-47ebe5c4494a\",\"label\":\"12oz Mocha Drink Sales\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"429\"}},{\"parent_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"item_id\":\"35687210-8a9e-4c25-a25e-5ee8204ba627\",\"label\":\"12oz Hot Chocolate Drink Sales\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"824\"}},{\"parent_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"item_id\":\"48f46dde-37b8-4bc6-94c2-104eacb24f08\",\"label\":\"12oz Black Tea Drink Sales\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"33\"}},{\"parent_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"item_id\":\"3ec686cb-95bb-4f85-926a-42167164d709\",\"label\":\"12oz White Tea Drink Sales\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"133\"}},{\"parent_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"item_id\":\"df96eff4-54e0-47ce-9918-52f211f6c089\",\"label\":\"12oz Tomato Soup Drink Sales\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"28\"}},{\"parent_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"item_id\":\"6e215ada-9ef2-4bbc-8002-b3fb8c6ec08f\",\"label\":\"12oz Caramel Syrup Drink Sales\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1118\"}},{\"parent_id\":\"020bbcc9-95fa-4020-8268-ce58e7b0eb53\",\"item_id\":\"df8c8f30-7c25-4b09-8787-44e44a89a4a9\",\"label\":\"12oz Vanilla Syrup Drink Sales\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"480\"}},{\"item_id\":\"3815f6bd-ebeb-413d-9b83-9df8cc8bd667\",\"label\":\"Test Counter Readings\",\"type\":\"section\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"b144850f-ad5f-494f-a9ff-95e25e83366a\"]},{\"parent_id\":\"3815f6bd-ebeb-413d-9b83-9df8cc8bd667\",\"item_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"label\":\"12oz Test Counter Readings\",\"type\":\"category\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"eed5e00a-8ce9-4cf5-81ce-fd5decf0249b\",\"430c6c75-985e-4310-ba4f-5e310946da82\",\"3ed85676-e260-43d2-8d9b-d9d6e8c18eed\",\"15fd6bf4-e379-4488-9d90-2043ac991d2f\",\"e8106e9a-698b-4f3e-ba2e-a90d0e4ce0b3\",\"6aba53c4-a322-4d06-b493-d4b355261ba3\",\"b0ed1246-d9b5-4d75-a1d4-8d8445773363\",\"08dd77f2-a26d-4274-b786-fd644a5e60b7\",\"d0d18c4f-980d-45a9-8dff-6c4bb9def60c\",\"83da6d00-8a1d-4db5-8cb3-b9b1f13fc4e9\",\"8d743b25-09b8-4c48-9d7d-87d818acfa31\",\"978dd173-aae7-4676-8fb6-2bb9725eaf6f\",\"ecf2a7a6-7454-4f27-9463-1557a2d08f30\"]},{\"parent_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"item_id\":\"eed5e00a-8ce9-4cf5-81ce-fd5decf0249b\",\"label\":\"12oz Cappuccino Test Vends\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"3\"}},{\"parent_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"item_id\":\"430c6c75-985e-4310-ba4f-5e310946da82\",\"label\":\"12oz Latte Test Vends\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"2\"}},{\"parent_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"item_id\":\"3ed85676-e260-43d2-8d9b-d9d6e8c18eed\",\"label\":\"12oz White Coffee Test Vends\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"item_id\":\"15fd6bf4-e379-4488-9d90-2043ac991d2f\",\"label\":\"12oz Americano Test Vends\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"item_id\":\"e8106e9a-698b-4f3e-ba2e-a90d0e4ce0b3\",\"label\":\"12oz Flat White Test Vends\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"item_id\":\"6aba53c4-a322-4d06-b493-d4b355261ba3\",\"label\":\"12oz Double Espresso Test Vends\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"item_id\":\"b0ed1246-d9b5-4d75-a1d4-8d8445773363\",\"label\":\"12oz Mocha Test Vends\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"item_id\":\"08dd77f2-a26d-4274-b786-fd644a5e60b7\",\"label\":\"12oz Hot Chocolate Test Vends\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"4\"}},{\"parent_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"item_id\":\"d0d18c4f-980d-45a9-8dff-6c4bb9def60c\",\"label\":\"12oz Black Tea Test Vends\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"2\"}},{\"parent_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"item_id\":\"83da6d00-8a1d-4db5-8cb3-b9b1f13fc4e9\",\"label\":\"12oz White Tea Test Vends\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"item_id\":\"8d743b25-09b8-4c48-9d7d-87d818acfa31\",\"label\":\"12oz Tomato Soup Test Vends\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"item_id\":\"978dd173-aae7-4676-8fb6-2bb9725eaf6f\",\"label\":\"12oz Caramel Syrup Test Vends\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"b144850f-ad5f-494f-a9ff-95e25e83366a\",\"item_id\":\"ecf2a7a6-7454-4f27-9463-1557a2d08f30\",\"label\":\"12oz Vanilla Syrup Test Vends\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"item_id\":\"adb7eae7-d738-4ca3-b7c8-e4a67efff107\",\"label\":\"Stock Take\",\"type\":\"section\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"24b6f5bc-1297-45a3-a5a7-228403882d09\"]},{\"parent_id\":\"adb7eae7-d738-4ca3-b7c8-e4a67efff107\",\"item_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"label\":\"Stock take\",\"type\":\"category\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"5f9ca61e-8c57-42e5-8bb3-401933e28937\",\"37490b9e-0fb5-40be-8d64-443cf8ff7df4\",\"0dab190b-2a54-4aa9-8c2c-30a6c9d8dfa8\",\"7e1ebb82-5491-40dd-af36-0bddaeef595c\",\"1277a497-2835-45f6-ad07-3d211c249d92\",\"9b5a6fbc-d9f7-4268-a7cb-d3ad138986a7\",\"22e57825-3cd9-404b-b793-773697e28d34\",\"a3639cd7-da09-42ab-aa57-34cbc65ffbd5\",\"21f6e804-9ae9-4d45-affa-b78e751b24e2\",\"41d76c92-b1ad-43eb-b299-d9f3f5b2faf7\",\"6acafb96-a87f-4bc2-87e8-92d71d4235e4\",\"7be23a6f-8018-46fe-9bd5-31dbd2d1b875\",\"b1ecfe2e-0d8a-4ac2-a82b-926fad5d0c92\",\"b675b13d-8bc5-410b-85e3-fba36e8988dd\",\"173bcf70-2831-41cb-97d8-b260a71e2986\"]},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"5f9ca61e-8c57-42e5-8bb3-401933e28937\",\"label\":\"Lavazza Gold Beans (Packets)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"5\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"37490b9e-0fb5-40be-8d64-443cf8ff7df4\",\"label\":\"Milfresh Gold (Packets)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"10\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"0dab190b-2a54-4aa9-8c2c-30a6c9d8dfa8\",\"label\":\"Hot chocolate (Packets)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"2\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"7e1ebb82-5491-40dd-af36-0bddaeef595c\",\"label\":\"Vending Sugar (Packets)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"16\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"1277a497-2835-45f6-ad07-3d211c249d92\",\"label\":\"Tea (Packets)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"3\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"9b5a6fbc-d9f7-4268-a7cb-d3ad138986a7\",\"label\":\"Tomato Soup (Packets)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"5\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"22e57825-3cd9-404b-b793-773697e28d34\",\"label\":\"White Sugar Sticks (Boxes)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"a3639cd7-da09-42ab-aa57-34cbc65ffbd5\",\"label\":\"Brown Sugar Sticks (Boxes)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"21f6e804-9ae9-4d45-affa-b78e751b24e2\",\"label\":\"Sweetener Sticks (Boxes)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"41d76c92-b1ad-43eb-b299-d9f3f5b2faf7\",\"label\":\"Cups (Sleeves)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"30\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"6acafb96-a87f-4bc2-87e8-92d71d4235e4\",\"label\":\"Lids (Sleeves)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"40\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"7be23a6f-8018-46fe-9bd5-31dbd2d1b875\",\"label\":\"Serviettes (Sleeves)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"23\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"b1ecfe2e-0d8a-4ac2-a82b-926fad5d0c92\",\"label\":\"Stirrers (Packets)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"b675b13d-8bc5-410b-85e3-fba36e8988dd\",\"label\":\"Caramel Syrup (Bottles)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"2\"}},{\"parent_id\":\"24b6f5bc-1297-45a3-a5a7-228403882d09\",\"item_id\":\"173bcf70-2831-41cb-97d8-b260a71e2986\",\"label\":\"Vanilla Syrup (Bottles)\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":true},\"responses\":{\"text\":\"2\"}},{\"item_id\":\"e7688baa-2ff8-44ff-ae0b-7b2ec36ef066\",\"label\":\"POS Stock Take\",\"type\":\"section\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"c11009d0-444f-4a85-af6e-174e3b5464a3\"]},{\"parent_id\":\"e7688baa-2ff8-44ff-ae0b-7b2ec36ef066\",\"item_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"label\":\"POS Stock Take\",\"type\":\"category\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"4412181f-4996-4fad-8e26-5c4ece74db15\",\"54e66852-d41e-40c9-bdda-aeed603df729\",\"c52d3c8a-3026-4d87-80b4-215c40ebf200\",\"d5ca1f91-90e0-47b5-a645-e0570e08256e\",\"17b9b06d-91fc-43a3-bfba-eea799c1c04a\",\"b3201df2-f4cc-4cd7-918e-4d452910c7ae\",\"2da1ea9e-3048-44e5-b45a-e8dc38b5a97f\",\"f07093e2-5c11-4783-a5f8-94a41c017e89\",\"61933033-6348-4303-b1bb-bc5c670078c5\",\"38e3f263-ae9e-4d63-a7b0-3abe88323bfa\",\"81b68a6d-07c6-4e7e-aaad-16d9518fc140\",\"96769206-df3a-4c5b-935a-6bcc20167f38\",\"75410bcb-22f1-4d49-9901-c62c63d721d0\",\"2c94de4e-5810-45d8-89fe-2df1bb2b160f\",\"f79a5792-35c8-438a-b845-ca8ea77c8366\",\"8e19a573-6148-49f3-a73a-3c4f9e5c6051\",\"f911d0bb-a1db-4b1c-a53c-2cdd4143d823\",\"c203cb8c-08f9-49cd-9e94-80f63d3c291d\",\"83a87fee-4966-4931-a051-be88fbdf5d01\",\"382a3e82-48e2-4ffe-a141-dc373c177b53\"]},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"4412181f-4996-4fad-8e26-5c4ece74db15\",\"label\":\"Table Talker\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"54e66852-d41e-40c9-bdda-aeed603df729\",\"label\":\"Tent Card\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"c52d3c8a-3026-4d87-80b4-215c40ebf200\",\"label\":\"Flag\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"d5ca1f91-90e0-47b5-a645-e0570e08256e\",\"label\":\"Giant Cup\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"17b9b06d-91fc-43a3-bfba-eea799c1c04a\",\"label\":\"Pavement Sign\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"1\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"b3201df2-f4cc-4cd7-918e-4d452910c7ae\",\"label\":\"Till Wobbler\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"2da1ea9e-3048-44e5-b45a-e8dc38b5a97f\",\"label\":\"Cora Wobbler\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"f07093e2-5c11-4783-a5f8-94a41c017e89\",\"label\":\"Floor Sticker\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"61933033-6348-4303-b1bb-bc5c670078c5\",\"label\":\"Hanging Sign\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"2\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"38e3f263-ae9e-4d63-a7b0-3abe88323bfa\",\"label\":\"Mobile Hanging Sign\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"81b68a6d-07c6-4e7e-aaad-16d9518fc140\",\"label\":\"A1 Poster\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"96769206-df3a-4c5b-935a-6bcc20167f38\",\"label\":\"A2 Poster\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"75410bcb-22f1-4d49-9901-c62c63d721d0\",\"label\":\"A3 Poster\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"2c94de4e-5810-45d8-89fe-2df1bb2b160f\",\"label\":\"A4 Poster\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"f79a5792-35c8-438a-b845-ca8ea77c8366\",\"label\":\"A1 Contra Vision\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"8e19a573-6148-49f3-a73a-3c4f9e5c6051\",\"label\":\"A2 Contra Vision\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"f911d0bb-a1db-4b1c-a53c-2cdd4143d823\",\"label\":\"A3 Contra Vision\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"c203cb8c-08f9-49cd-9e94-80f63d3c291d\",\"label\":\"A4 Contra Vision\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"83a87fee-4966-4931-a051-be88fbdf5d01\",\"label\":\"Outdoor Banner\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"parent_id\":\"c11009d0-444f-4a85-af6e-174e3b5464a3\",\"item_id\":\"382a3e82-48e2-4ffe-a141-dc373c177b53\",\"label\":\"Outdoor Wall Mount\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"0\"}},{\"item_id\":\"3140e55d-c700-40b1-af5b-e481ee7b954e\",\"label\":\"Additional Comments\",\"type\":\"section\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"children\":[\"79a0784c-fd08-453c-b866-22b488e45535\"]},{\"parent_id\":\"3140e55d-c700-40b1-af5b-e481ee7b954e\",\"item_id\":\"79a0784c-fd08-453c-b866-22b488e45535\",\"label\":\"Do you have any additional comments?\",\"type\":\"textsingle\",\"options\":{\"weighting\":1,\"is_mandatory\":false},\"responses\":{\"text\":\"EVO visit.  No addittional comments.\"}}]}",
        "payloadType": "json",
        "x": 180,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "220131e1.352fce",
        "type": "function",
        "z": "81053105.60e14",
        "name": "Green Pass",
        "func": "var machineType = msg.payload[1].machineType[0].responses.selected[0].label;\nvar machineCleanliness = msg.payload[1].machineCleanliness[0].responses.selected[0].label;\nvar posCondition = msg.payload[1].posCondition[0].responses.selected[0].label;\nvar signoffSheets = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar trainingRequired = msg.payload[1].trainingRequired[0].responses.selected[0].label;\nvar operatingManual = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar author = msg.payload[1].audit_data.authorship.owner;\nvar site = msg.payload[1].audit_data.site.name;\nvar reportWebLink = msg.payload[0].url;\nvar visitScore = msg.payload[1].audit_data.score_percentage.toString().slice(0, 5);\nvar serialNo = msg.payload[1].serialNo[0].responses.text;\nvar date_completed = msg.payload[1].audit_data.date_completed;\nvar dateCompleted = msg.payload[1].audit_data.date_completed.toString().slice(0, 10);\nvar timeCompleted = msg.payload[1].audit_data.date_completed.toString().slice(11, 19);\nvar rawFeedback = msg.payload[1].feedback[0].responses.text;\nvar visitStatus = msg.payload[1].visitStatus;\nvar storeNumber = msg.payload[1].storeNumber[0].responses.text;\nvar score = msg.payload[1].audit_data.score;\nvar maxScore = msg.payload[1].audit_data.total_score;\nvar feedback = rawFeedback.toString().replace(/(\\r\\n|\\n|\\r|[\"'])/gm, \" \");\nvar toEmail = \"ryan.rich@expressoplus.com\";\nvar toName = \"Ryan Rich\";\nmsg.headers = {};\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 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\";\nmsg.url = \"https://api.sendgrid.com/v3/mail/send\";\nmsg.method = \"POST\";\nmsg.payload= '{ \"personalizations\": [ { \"to\": [ { \"email\": \"'+ toEmail +'\", \"name\": \"'+ toName +'\" } ], \"dynamic_template_data\": { \"site\": \"' + site + '\", \"machineType\": \"' + machineType + '\", \"visitScore\": \"' + visitScore + '\", \"posCondition\": \"' + posCondition +'\", \"machineCleanliness\": \"'+ machineCleanliness +'\", \"operatingManual\": \"' + operatingManual + '\", \"signoffSheets\": \"' + signoffSheets + '\", \"trainingRequired\": \"' + trainingRequired + '\", \"author\": \"' + author +'\", \"reportWebLink\": \"' + reportWebLink + '\", \"serialNo\": \"' + serialNo + '\", \"date_completed\": \"'+ dateCompleted +'\", \"time_completed\": \"'+ timeCompleted +'\", \"feedback\": \"'+ feedback +'\", \"visitStatus\": \"'+ visitStatus +'\", \"storeNumber\": \"'+ storeNumber +'\", \"score\": \"'+ score +'\", \"maxScore\": \"'+ maxScore +'\" }, \"subject\": \"Green Pass: '+ storeNumber +' '+ site +' | '+ visitStatus +' '+ visitScore +'%\" } ], \"from\": { \"email\": \"robot@expressoplus.com\", \"name\": \"eP Robot\" }, \"reply_to\": { \"email\": \"transactional@expressoplus.com\", \"name\": \"eXpresso PLUS\" }, \"template_id\": \"d-bdf56e3665184f17ab53a512062ac3dc\" }';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1230,
        "y": 460,
        "wires": [
            [
                "3568bef1.ee521a"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "a98d9e75.73ba08",
        "type": "http in",
        "z": "7a5c30af.ff5bc",
        "name": "",
        "url": "/leadStatusUpdate",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 120,
        "wires": [
            [
                "1416063a.289f82",
                "c747b107.2918f"
            ]
        ]
    },
    {
        "id": "1416063a.289f82",
        "type": "http response",
        "z": "7a5c30af.ff5bc",
        "name": "Send http response",
        "statusCode": "200",
        "headers": {},
        "x": 410,
        "y": 80,
        "wires": []
    },
    {
        "id": "c747b107.2918f",
        "type": "switch",
        "z": "7a5c30af.ff5bc",
        "name": "If StatusId updated",
        "property": "payload.updatedFields[0]",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "StatusId",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 410,
        "y": 120,
        "wires": [
            [
                "6b714c33.20dbcc"
            ]
        ]
    },
    {
        "id": "6b714c33.20dbcc",
        "type": "switch",
        "z": "7a5c30af.ff5bc",
        "name": "if statusId is QUALFA",
        "property": "payload.updatedEntity.statusId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "QUALFA",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 620,
        "y": 120,
        "wires": [
            [
                "43ce5859.088188",
                "fc585f6a.7469e8"
            ]
        ]
    },
    {
        "id": "5d2887f4.08c958",
        "type": "http in",
        "z": "86053255.0ee62",
        "name": "Application API",
        "url": "app",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 260,
        "y": 160,
        "wires": [
            [
                "329fd88c.b8349"
            ]
        ]
    },
    {
        "id": "329fd88c.b8349",
        "type": "template",
        "z": "86053255.0ee62",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<html>\n    <body>\n        <h1>API Accessed Successfully!</h1>\n        <a href=\"logindemo\">Try another OAuth scheme!</a><br/>\n         <a href=\"configuredemo\">Configure again!</a>\n    </body>\n</html>",
        "output": "str",
        "x": 500,
        "y": 160,
        "wires": [
            [
                "d122098f.13a238"
            ]
        ]
    },
    {
        "id": "d122098f.13a238",
        "type": "http response",
        "z": "86053255.0ee62",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 160,
        "wires": []
    },
    {
        "id": "f45100cd.a4029",
        "type": "http request",
        "z": "86053255.0ee62",
        "name": "Call APIConnect Authorize",
        "method": "POST",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "proxy": "",
        "authType": "",
        "x": 1603,
        "y": 836,
        "wires": [
            [
                "9158795a.222ec8"
            ]
        ]
    },
    {
        "id": "7cdb735b.108cfc",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "application",
        "func": "msg.headers = {};\nmsg.headers['Content-Type'] = 'application/x-www-form-urlencoded';\nmsg.headers['APIm-Debug'] = 'true';\nmsg.payload = {}\nvar globalContext = global;\nmsg.payload.username = globalContext.get(\"username\");\nmsg.payload.password = globalContext.get(\"password\");\nmsg.payload.client_id = globalContext.get(\"client_id\");\nmsg.payload.client_secret = globalContext.get(\"client_secret\");\nmsg.payload.grant_type='client_credentials';\nmsg.payload.scope=\"appscope\";\nmsg.url=globalContext.get(\"oauth_authorize_url\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1293,
        "y": 696,
        "wires": [
            [
                "f45100cd.a4029",
                "5989fd64.304acc",
                "4ba1426d.e8d134",
                "e134601a.d99de"
            ]
        ]
    },
    {
        "id": "eb5ead2f.40161",
        "type": "http in",
        "z": "86053255.0ee62",
        "name": "",
        "url": "appredirect",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 280,
        "y": 1176,
        "wires": [
            [
                "daea6759.6e1ba"
            ]
        ]
    },
    {
        "id": "9854f156.30996",
        "type": "http response",
        "z": "86053255.0ee62",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1430,
        "y": 1236,
        "wires": []
    },
    {
        "id": "4645cdf4.3208ec",
        "type": "http in",
        "z": "86053255.0ee62",
        "name": "Authentication",
        "url": "authenticate",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 250,
        "y": 280,
        "wires": [
            [
                "fe3c82ae.f87128"
            ]
        ]
    },
    {
        "id": "fe3c82ae.f87128",
        "type": "http response",
        "z": "86053255.0ee62",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 600,
        "y": 280,
        "wires": []
    },
    {
        "id": "b83684e8.78dae8",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "Confidential",
        "func": "msg.payload = {};\nmsg.payload = msg.scheme;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 873,
        "y": 736,
        "wires": [
            [
                "70f02da3.915e3c"
            ]
        ]
    },
    {
        "id": "70f02da3.915e3c",
        "type": "switch",
        "z": "86053255.0ee62",
        "name": "",
        "property": "scheme",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "application",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "password",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "accesscode",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1033,
        "y": 736,
        "wires": [
            [
                "7cdb735b.108cfc"
            ],
            [
                "2937c338.7482d4"
            ],
            [
                "26c24894.03df4"
            ]
        ]
    },
    {
        "id": "2937c338.7482d4",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "password",
        "func": "msg.headers = {};\nmsg.headers['Content-Type'] = 'application/x-www-form-urlencoded';\nmsg.headers['APIm-Debug'] = 'true';\nvar globalContext = global;\nmsg.payload={};\nmsg.payload.username = globalContext.get(\"username\");\nmsg.payload.password = globalContext.get(\"password\");\nmsg.payload.client_id = globalContext.get(\"client_id\");\nmsg.payload.client_secret = globalContext.get(\"client_secret\");\nmsg.payload.grant_type='password';\nmsg.payload.scope=\"appscope\";\nmsg.url=globalContext.get(\"oauth_token_url\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1283,
        "y": 736,
        "wires": [
            [
                "f45100cd.a4029",
                "5989fd64.304acc",
                "e134601a.d99de",
                "4ba1426d.e8d134"
            ]
        ]
    },
    {
        "id": "26c24894.03df4",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "accesscode",
        "func": "var globalContext = global;\nmsg.payload={};\nmsg.payload.oauth_authorize_url = globalContext.get(\"oauth_authorize_url\");\nmsg.payload.redirect_url = globalContext.get(\"redirect_url\");\nmsg.payload.client_id = globalContext.get(\"client_id\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1290,
        "y": 780,
        "wires": [
            [
                "2326463e.e19f52"
            ]
        ]
    },
    {
        "id": "b252b4ae.8cf838",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "implicit",
        "func": "var globalContext = global;\nmsg.payload={};\nmsg.payload.oauth_authorize_url = globalContext.get(\"oauth_authorize_url\");\nmsg.payload.redirect_url = globalContext.get(\"redirect_url\");\nmsg.payload.client_id = globalContext.get(\"client_id\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1263,
        "y": 836,
        "wires": [
            [
                "9892dab0.4e2978"
            ]
        ]
    },
    {
        "id": "503a4291.05b5d4",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "Public",
        "func": "msg.payload = {};\nmsg.payload = msg.scheme;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 873,
        "y": 856,
        "wires": [
            [
                "f60753e6.d03908"
            ]
        ]
    },
    {
        "id": "f60753e6.d03908",
        "type": "switch",
        "z": "86053255.0ee62",
        "name": "",
        "property": "scheme",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "implicit",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "password",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "accesscode",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1033,
        "y": 856,
        "wires": [
            [
                "b252b4ae.8cf838"
            ],
            [
                "6ad89f19.a2f3"
            ],
            [
                "88215e44.2ada6"
            ]
        ]
    },
    {
        "id": "6ad89f19.a2f3",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "password",
        "func": "msg.headers = {};\nmsg.headers['Content-Type'] = 'application/x-www-form-urlencoded';\nmsg.headers['APIm-Debug'] = 'true';\nvar globalContext = global;\nmsg.payload = {};\nmsg.payload.username = globalContext.get(\"username\");\nmsg.payload.password = globalContext.get(\"password\");\nmsg.payload.redirect_url = globalContext.get(\"redirect_url\");\nmsg.payload.client_id = globalContext.get(\"client_id\");\nmsg.payload.grant_type='password';\nmsg.payload.scope=\"appscope\";\nmsg.url={};\nmsg.url=globalContext.get(\"oauth_token_url\");\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1263,
        "y": 876,
        "wires": [
            [
                "f45100cd.a4029",
                "5989fd64.304acc",
                "4ba1426d.e8d134",
                "e134601a.d99de"
            ]
        ]
    },
    {
        "id": "88215e44.2ada6",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "accesscode",
        "func": "var globalContext = global;\nmsg.payload={};\nmsg.payload.oauth_authorize_url = globalContext.get(\"oauth_authorize_url\");\nmsg.payload.redirect_url = globalContext.get(\"redirect_url\");\nmsg.payload.client_id = globalContext.get(\"client_id\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1273,
        "y": 916,
        "wires": [
            [
                "3a2e5f21.3a4728"
            ]
        ]
    },
    {
        "id": "901c68e9.e66b5",
        "type": "switch",
        "z": "86053255.0ee62",
        "name": "",
        "property": "impl",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "confidential",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "public",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 713,
        "y": 776,
        "wires": [
            [
                "b83684e8.78dae8"
            ],
            [
                "503a4291.05b5d4"
            ]
        ]
    },
    {
        "id": "e8c4ba95.f9eed",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "function",
        "func": "msg.impl = {};\nmsg.impl = msg.payload.impl;\nmsg.scheme = {};\nmsg.scheme = msg.payload.scheme;\nvar globalContext = global;\nglobalContext.set(\"impl\",msg.impl);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 583,
        "y": 776,
        "wires": [
            [
                "901c68e9.e66b5"
            ]
        ]
    },
    {
        "id": "45e758d2.aa30b8",
        "type": "http in",
        "z": "86053255.0ee62",
        "name": "getAccessToken",
        "url": "getAccessToken",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 260,
        "y": 780,
        "wires": [
            [
                "85b291f2.ebd6e"
            ]
        ]
    },
    {
        "id": "a9e2d6d8.a7da78",
        "type": "http response",
        "z": "86053255.0ee62",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 2210,
        "y": 1036,
        "wires": []
    },
    {
        "id": "c8e25e58.29304",
        "type": "http in",
        "z": "86053255.0ee62",
        "name": "",
        "url": "logindemo",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 260,
        "y": 479,
        "wires": [
            [
                "ebe4a582.17b918"
            ]
        ]
    },
    {
        "id": "c2abadf7.c1813",
        "type": "template",
        "z": "86053255.0ee62",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<!-- This file has been downloaded from Bootsnipp.com. Enjoy! -->\n<title>OAuth Demo | Login</title>\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<link\n\thref=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css\"\n\trel=\"stylesheet\">\n<link rel=\"stylesheet\" href=\"{{{payload.node_red_url}}}/style.css\">\n<script src=\"https://code.jquery.com/jquery-1.11.1.min.js\"></script>\n<script\n\tsrc=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js\"></script>\n</head>\n\n<body class=\"bg\">\n\n\t<nav\n\t\tclass=\"navbar special-card navbar-expand-lg navbar-light bg-light navbar-laravel\">\n\t\t<div class=\"container\">\n\t\t\t<a class=\"navbar-brand\" href=\"#\">OAuth Demo </a>\n\t\t\t<button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\n\t\t\t\tdata-target=\"#navbarSupportedContent\"\n\t\t\t\taria-controls=\"navbarSupportedContent\" aria-expanded=\"false\"\n\t\t\t\taria-label=\"Toggle navigation\">\n\t\t\t\t<span class=\"navbar-toggler-icon\"></span>\n\t\t\t</button>\n\n\t\t\t<div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n\t\t\t</div>\n\t\t</div>\n\t</nav>\n\n\t<main class=\"login-form\">\n\t<div class=\"cotainer\">\n\t\t<div class=\"row justify-content-center\">\n\t\t\t<div class=\"col-md-4\">\n\t\t\t\t<div class=\"card special-card\">\n\t\t\t\t\t<div class=\"card-header\" align=\"center\">Login</div>\n\t\t\t\t\t<div class=\"card-body\">\n\t\t\t\t\t\t<form action=\"getAccessToken\" method=\"POST\">\n\t\t\t\t\t\t\t<div class=\"form-group row\">\n\t\t\t\t\t\t\t\t<label for=\"username\"\n\t\t\t\t\t\t\t\t\tclass=\"col-md-4 col-form-label text-md-right\">Username</label>\n\t\t\t\t\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"input_username\" class=\"form-control\"\n\t\t\t\t\t\t\t\t\t\tname=\"username\" required autofocus>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"form-group row\">\n\t\t\t\t\t\t\t\t<label for=\"password\"\n\t\t\t\t\t\t\t\t\tclass=\"col-md-4 col-form-label text-md-right\">Password</label>\n\t\t\t\t\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t\t\t\t\t<input type=\"password\" id=\"input_password\" class=\"form-control\"\n\t\t\t\t\t\t\t\t\t\tname=\"password\" required>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"card-header\" align=\"center\">Choose OAuth\n\t\t\t\t\t\t\t\tImplementation Mode</div>\n\t\t\t\t\t\t\t<div class=\"form-group row\">\n\t\t\t\t\t\t\t\t<label for=\"impl\" class=\"col-md-4 col-form-label text-md-right\">Confidential</label>\n\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"impl\" value=\"confidential\" checked>\n\t\t\t\t\t\t\t\t<label for=\"impl\" class=\"col-md-4 col-form-label text-md-right\">Public</label>\n\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"impl\" value=\"public\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"card-header\" align=\"center\">Choose OAuth Scheme</div>\n\n\t\t\t\t\t\t\t<div align=\"center\">\n\t\t\t\t\t\t\t\t<select id=\"scheme\" name=\"scheme\">\n\t\t\t\t\t\t\t\t\t<option value=\"application\">Application</option>\n\t\t\t\t\t\t\t\t\t<option value=\"implicit\">Implicit</option>\n\t\t\t\t\t\t\t\t\t<option value=\"password\">Password</option>\n\t\t\t\t\t\t\t\t\t<option value=\"accesscode\">Access code</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-md-6 offset-md-4\">\n\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\">Login</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t</div>\n\t</main>\n\n</body>\n</html>\n\n",
        "output": "str",
        "x": 900,
        "y": 479,
        "wires": [
            [
                "67ef07e7.54f5c"
            ]
        ]
    },
    {
        "id": "67ef07e7.54f5c",
        "type": "http response",
        "z": "86053255.0ee62",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1190,
        "y": 479,
        "wires": []
    },
    {
        "id": "9892dab0.4e2978",
        "type": "template",
        "z": "86053255.0ee62",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<html>\n    <head>\n        <script>\n        function redirect(url) {\n\t\twindow.location = url;\n\t    }\n\t</script>\n    </head>\n    <body>\n        <script>\n            alert(\"Redirecting to login form from OAuth server...\");\n            redirect(\"{{{payload.oauth_authorize_url}}}?response_type=token&scope=appscope&client_id={{{payload.client_id}}}&redirect_uri={{{payload.redirect_url}}}\");\n        </script>\n    </body>\n</html>",
        "output": "str",
        "x": 1463,
        "y": 876,
        "wires": [
            [
                "3d767871.22712"
            ]
        ]
    },
    {
        "id": "3d767871.22712",
        "type": "http response",
        "z": "86053255.0ee62",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 1703,
        "y": 936,
        "wires": []
    },
    {
        "id": "4ee2ed4c.0c18b4",
        "type": "template",
        "z": "86053255.0ee62",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<html>\n    <head>\n        <script>\n            var loc = String(window.location);\n            var n = loc.includes(\"#\");\n            if (n)\n            {\n              var res = loc.replace(\"#\",\"?\");\n              window.location = res;\n            }\n            </script>\n        <body>\n            Some error occured. Please check the authorize and token URL. \n        </body>\n    </head>\n</html>",
        "output": "str",
        "x": 1040,
        "y": 1236,
        "wires": [
            [
                "9854f156.30996"
            ]
        ]
    },
    {
        "id": "3a2e5f21.3a4728",
        "type": "template",
        "z": "86053255.0ee62",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<html>\n    <head>\n        <script>\n        function redirect(url) {\n\t\twindow.location = url;\n\t    }\n\t</script>\n    </head>\n    <body>\n        <script>\n            alert(\"Redirecting to login form from OAuth server...\");\n            redirect(\"{{{payload.oauth_authorize_url}}}?response_type=code&scope=appscope&client_id={{{payload.client_id}}}&redirect_uri={{{payload.redirect_url}}}\");\n        </script>\n    </body>\n</html>",
        "output": "str",
        "x": 1483,
        "y": 976,
        "wires": [
            [
                "3d767871.22712"
            ]
        ]
    },
    {
        "id": "52f7c9e6.3ab898",
        "type": "switch",
        "z": "86053255.0ee62",
        "name": "",
        "property": "tok",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 870,
        "y": 1176,
        "wires": [
            [
                "9158795a.222ec8"
            ],
            [
                "2b341be5.3e443c"
            ],
            [
                "4ee2ed4c.0c18b4"
            ]
        ]
    },
    {
        "id": "ac03e779.c05748",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "",
        "func": "// token appears after a # in the URL\nmsg.tok = 0;\n\nif (msg.payload.code)\n{\n    msg.tok = 1;\n}\nif (msg.payload.access_token)\n{\n    msg.tok = 2;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 670,
        "y": 1176,
        "wires": [
            [
                "52f7c9e6.3ab898"
            ]
        ]
    },
    {
        "id": "2b341be5.3e443c",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "",
        "func": "msg.url=msg.payload.oauth_token_url;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/x-www-form-urlencoded';\nvar globalContext=global;\nmsg.payload.grant_type='authorization_code';\nmsg.url=globalContext.get(\"oauth_token_url\");\nmsg.payload.redirect_uri=globalContext.get(\"redirect_url\");\nmsg.payload.client_id=globalContext.get(\"client_id\");\n// client secret is not sent in public implementation mode\nif (globalContext.get(\"impl\") == \"public\")\n   msg.payload.client_secret = null;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1250,
        "y": 1176,
        "wires": [
            [
                "414e049a.900ad4",
                "9c5a3818.0b87c",
                "a6487561.abfbc8",
                "1192238a.1806e4"
            ]
        ]
    },
    {
        "id": "414e049a.900ad4",
        "type": "http request",
        "z": "86053255.0ee62",
        "name": "Call API Connect Token URL",
        "method": "POST",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "proxy": "",
        "authType": "",
        "x": 1540,
        "y": 1176,
        "wires": [
            [
                "9158795a.222ec8"
            ]
        ]
    },
    {
        "id": "2326463e.e19f52",
        "type": "template",
        "z": "86053255.0ee62",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<html>\n    <head>\n        <script>\n        function redirect(url) {\n\t\twindow.location = url;\n\t    }\n\t</script>\n    </head>\n    <body>\n        <script>\n            alert(\"Redirecting to login form from OAuth server...\");\n            redirect(\"{{{payload.oauth_authorize_url}}}?response_type=code&scope=appscope&client_id={{{payload.client_id}}}&redirect_uri={{{payload.redirect_url}}}\");\n        </script>\n    </body>\n</html>",
        "output": "str",
        "x": 1540,
        "y": 760,
        "wires": [
            [
                "90a1f36c.bcafc8"
            ]
        ]
    },
    {
        "id": "90a1f36c.bcafc8",
        "type": "http response",
        "z": "86053255.0ee62",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1743,
        "y": 776,
        "wires": []
    },
    {
        "id": "9158795a.222ec8",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "function",
        "func": "var jsonstr = msg.payload;\n\nvar jsonobj = {};\nif (typeof(jsonstr)==\"string\")\n   jsonobj = JSON.parse(jsonstr);\nelse  jsonobj = jsonstr;\nmsg.payload = {};\nmsg.payload = jsonobj;\nvar globalContext =  global;\nmsg.payload.node_red_url = globalContext.get(\"node_red_url\");\nmsg.payload.url = msg.payload.node_red_url+\"/apimenu\";\nmsg.payload.domain = msg.payload.node_red_url.substring(8);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1820,
        "y": 1036,
        "wires": [
            [
                "4af4b41a.8808ac"
            ]
        ]
    },
    {
        "id": "4af4b41a.8808ac",
        "type": "template",
        "z": "86053255.0ee62",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"utf-8\">\n    <!-- This file has been downloaded from Bootsnipp.com. Enjoy! -->\n    <title>Authentication Successful!</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link rel=\"stylesheet\" href=\"{{{payload.node_red_url}}}/style.css\">\n    <script src=\"https://code.jquery.com/jquery-1.11.1.min.js\"></script>\n    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js\"></script>\n    <script>\n\tfunction redirect(url) {\n\t\twindow.location = url;\n\t}\n\tfunction setCookie(cname, cvalue, exdays) {\n\t\tif (!cvalue)\n\t\t   alert(\"Some error occurred. Please check the authorize and token URLs.\");\n\t\tvar d = new Date();\n\t\td.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\n\t\tvar expires = \"expires=\" + d.toUTCString();\n\t\tdocument.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\" + \";domain={{{payload.domain}}};secure\";\n\t}\n\n\tfunction getCookie(cname) {\n\t\tvar name = cname + \"=\";\n\t\tvar ca = document.cookie.split(';');\n\t\tfor (var i = 0; i < ca.length; i++) {\n\t\t\tvar c = ca[i];\n\t\t\twhile (c.charAt(0) == ' ') {\n\t\t\t\tc = c.substring(1);\n\t\t\t}\n\t\t\tif (c.indexOf(name) == 0) {\n\t\t\t\treturn c.substring(name.length, c.length);\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tsetCookie(\"token\", \"{{{payload.access_token}}}\", 1);\n</script>\n    \n</head>\n<body class=\"bg\">\n<nav class=\"navbar special-card navbar-expand-lg navbar-light bg-light navbar-laravel\">\n    <div class=\"container\">\n        <a class=\"navbar-brand\" href=\"#\">OAuth Demo</a>\n        <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n            <span class=\"navbar-toggler-icon\"></span>\n        </button>\n\n        <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n            <ul class=\"navbar-nav ml-auto\">\n                 <li class=\"nav-item\">\n                    <a class=\"nav-link\" href=\"logindemo\">Home</a>\n                </li>\n                <li class=\"nav-item\">\n                    <a class=\"nav-link\" href=\"configdemo\">Logout</a>\n                </li>\n            </ul>\n\n        </div>\n    </div>\n</nav>\n\n<main class=\"login-form\">\n    <div class=\"cotainer\">\n        <div class=\"row justify-content-center\">\n            <div class=\"col-md-4\">\n                <div class=\"card special-card\">\n                    <div class=\"card-header\" align=\"center\">Authentication was successful.</div>\n                    <div class=\"card-body\">\n                      Got OAuth token and storing it in a cookie - {{{payload.access_token}}}.\n                      <div>\n                         Redirecting to menu options....\n                      </div>\n                    </div>\n                    \n                </div>\n            </div>\n        </div>\n    </div>\n\n</main>\n<script>\nsetTimeout(redirect(\"{{{payload.url}}}\"), 10000);\n</script>\n</body>\n</html>\n",
        "output": "str",
        "x": 2000,
        "y": 1036,
        "wires": [
            [
                "a9e2d6d8.a7da78"
            ]
        ]
    },
    {
        "id": "85eaa506.8240a8",
        "type": "http in",
        "z": "86053255.0ee62",
        "name": "",
        "url": "apimenu",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 290,
        "y": 1356,
        "wires": [
            [
                "306a9f67.a42cb"
            ]
        ]
    },
    {
        "id": "306a9f67.a42cb",
        "type": "template",
        "z": "86053255.0ee62",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<!-- This file has been downloaded from Bootsnipp.com. Enjoy! -->\n<title>API Menu</title>\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<link\n\thref=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css\"\n\trel=\"stylesheet\">\n<link rel=\"stylesheet\" href=\"{{{payload.node_red_url}}}/style.css\">\n<script src=\"https://code.jquery.com/jquery-1.11.1.min.js\"></script>\n<script\n\tsrc=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js\"></script>\n<script>\n\tfunction redirect(url) {\n\t\twindow.location = url;\n\t}\n\tfunction setCookie(cname, cvalue, exdays) {\n\t\tvar d = new Date();\n\t\td.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\n\t\tvar expires = \"expires=\" + d.toUTCString();\n\t\tdocument.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n\t}\n\n\tfunction getCookie(cname) {\n\t\tvar name = cname + \"=\";\n\t\tvar ca = document.cookie.split(';');\n\t\tfor (var i = 0; i < ca.length; i++) {\n\t\t\tvar c = ca[i];\n\t\t\twhile (c.charAt(0) == ' ') {\n\t\t\t\tc = c.substring(1);\n\t\t\t}\n\t\t\tif (c.indexOf(name) == 0) {\n\t\t\t\treturn c.substring(name.length, c.length);\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tfunction checkCookie(cname) {\n\t\tvar token = getCookie(cname);\n\t\tif (token != \"\") {\n\t\t\talert(\"Welcome again \");\n\t\t} else {\n\t\t\talert(\"Session expired. Login again\");\n\t\t\tredirect(\"logindemo\");\n\t\t}\n\t}\n</script>\n\n</head>\n<body class=\"bg\">\n\t<nav\n\t\tclass=\"navbar special-card navbar-expand-lg navbar-light bg-light navbar-laravel\">\n\t\t<div class=\"container\">\n\t\t\t<a class=\"navbar-brand\" href=\"#\">OAuth Demo</a>\n\t\t\t<button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\n\t\t\t\tdata-target=\"#navbarSupportedContent\"\n\t\t\t\taria-controls=\"navbarSupportedContent\" aria-expanded=\"false\"\n\t\t\t\taria-label=\"Toggle navigation\">\n\t\t\t\t<span class=\"navbar-toggler-icon\"></span>\n\t\t\t</button>\n\n\t\t\t<div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n\t\t\t\t<ul class=\"navbar-nav ml-auto\">\n\t\t\t\t\t<li class=\"nav-item\"><a class=\"nav-link\" href=\"apimenu\">Home</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"nav-item\"><a class=\"nav-link\" href=\"logindemo\">Logout</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\n\t\t\t</div>\n\t\t</div>\n\t</nav>\n\n\t<main class=\"login-form\">\n\t<div class=\"cotainer\">\n\t\t<div class=\"row justify-content-center\">\n\t\t\t<div class=\"col-md-6\">\n\t\t\t\t<div class=\"card special-card bg-light\">\n\t\t\t\t\t<div class=\"card-header\" align=\"center\">API Options</div>\n\t\t\t\t\t<div class=\"card-body\">\n\t\t\t\t\t\t<form action=\"callapi\" method=\"POST\">\n\n\t\t\t\t\t\t\t<input type=\"hidden\" id=\"accesstoken\" name=\"inputaccesstoken\"\n\t\t\t\t\t\t\t\tvalue=\"null\" />\n\t\t\t\t\t\t\t<div class=\"col-md-6 offset-md-4\">\n\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\">Invoke\n\t\t\t\t\t\t\t\t\tAPI</button>\n\t\t\t\t\t\t\t\t<p>The token is read from the secure cookie and is used to invoke the API.</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t</main>\n\n\t<script>\n\t\tvar token = getCookie(\"token\");\n\t\tif (token != \"\") {\n\t\t\tvar tokenElem = document.getElementById(\"accesstoken\");\n\t\t\ttokenElem.value = token;\n\t\t} else {\n\t\t\talert(\"Session expired. Login again\");\n\t\t\tredirect(\"logindemo\");\n\t\t}\n\t</script>\n\n\n</body>\n</html>\n",
        "output": "str",
        "x": 540,
        "y": 1356,
        "wires": [
            [
                "4739fbda.d1c4a4"
            ]
        ]
    },
    {
        "id": "4739fbda.d1c4a4",
        "type": "http response",
        "z": "86053255.0ee62",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 1356,
        "wires": []
    },
    {
        "id": "da0516f2.633bc8",
        "type": "http in",
        "z": "86053255.0ee62",
        "name": "",
        "url": "callapi",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 290,
        "y": 1496,
        "wires": [
            [
                "4abdf5f1.8272cc"
            ]
        ]
    },
    {
        "id": "8642088d.de2468",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers['X-IBM-Client-Id']= msg.payload.client_id;\nmsg.headers['Authorization']= 'Bearer '+msg.payload.inputaccesstoken;\nmsg.url = msg.payload.api_url;\nmsg.payload={};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 730,
        "y": 1496,
        "wires": [
            [
                "45e2f03c.6a8768"
            ]
        ]
    },
    {
        "id": "45e2f03c.6a8768",
        "type": "http request",
        "z": "86053255.0ee62",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "proxy": "",
        "authType": "basic",
        "x": 990,
        "y": 1496,
        "wires": [
            [
                "fc2bfb62.e0777"
            ]
        ]
    },
    {
        "id": "fc2bfb62.e0777",
        "type": "http response",
        "z": "86053255.0ee62",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1250,
        "y": 1496,
        "wires": []
    },
    {
        "id": "a05ebd5e.210e4",
        "type": "http in",
        "z": "86053255.0ee62",
        "name": "",
        "url": "configuredemo",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 270,
        "y": 380,
        "wires": [
            [
                "f55d95d4.2e6918"
            ]
        ]
    },
    {
        "id": "f55d95d4.2e6918",
        "type": "template",
        "z": "86053255.0ee62",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<!-- This file has been downloaded from Bootsnipp.com. Enjoy! -->\n<title>OAuth Demo | Configuration</title>\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<link\n\thref=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css\"\n\trel=\"stylesheet\">\n<script src=\"https://code.jquery.com/jquery-1.11.1.min.js\"></script>\n<script\n\tsrc=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js\"></script>\n</head>\n\n<body class=\"bg\">\n    <nav\n\t\tclass=\"navbar special-card navbar-expand-lg navbar-light bg-light navbar-laravel\">\n\t\t<div class=\"container\">\n\t\t\t<a class=\"navbar-brand\" href=\"#\">OAuth Demo </a>\n\t\t\t<button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\n\t\t\t\tdata-target=\"#navbarSupportedContent\"\n\t\t\t\taria-controls=\"navbarSupportedContent\" aria-expanded=\"false\"\n\t\t\t\taria-label=\"Toggle navigation\">\n\t\t\t\t<span class=\"navbar-toggler-icon\"></span>\n\t\t\t</button>\n\n\t\t\t<div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n\t\t\t</div>\n\t\t</div>\n\t</nav>\n\t<main class=\"login-form\">\n\t<div class=\"cotainer\">\n\t\t<div class=\"row justify-content-center\">\n\t\t\t<div class=\"col-md-4\">\n\t\t\t\t<div class=\"card special-card\">\n\t\t\t\t\t<div class=\"card-header\" align=\"center\">OAuth2 Configuration</div>\n\t\t\t\t\t<div class=\"card-body\">\n\t\t\t\t\t\t<form action=\"configureapply\" method=\"POST\">\n\t\t\t\t\t\t\t<div class=\"form-group row\">\n\t\t\t\t\t\t\t\t<label for=\"authorize_url\"\n\t\t\t\t\t\t\t\t\tclass=\"col-md-4 col-form-label text-md-right\">Authorize\n\t\t\t\t\t\t\t\t\tURL</label>\n\t\t\t\t\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"input_username\" class=\"form-control\"\n\t\t\t\t\t\t\t\t\t\tname=\"authorize_url\" required autofocus>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"form-group row\">\n\t\t\t\t\t\t\t\t<label for=\"token_url\"\n\t\t\t\t\t\t\t\t\tclass=\"col-md-4 col-form-label text-md-right\">Token URL</label>\n\t\t\t\t\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"input_token_url\" class=\"form-control\"\n\t\t\t\t\t\t\t\t\t\tname=\"token_url\" required>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"form-group row\">\n\t\t\t\t\t\t\t\t<label for=\"redirect_url\"\n\t\t\t\t\t\t\t\t\tclass=\"col-md-4 col-form-label text-md-right\">Redirect\n\t\t\t\t\t\t\t\t\tURL</label>\n\t\t\t\t\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"input_redirect_url\" class=\"form-control\"\n\t\t\t\t\t\t\t\t\t\tname=\"redirect_url\" required>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"form-group row\">\n\t\t\t\t\t\t\t\t<label for=\"node_red_base_url\"\n\t\t\t\t\t\t\t\t\tclass=\"col-md-4 col-form-label text-md-right\">Node-RED\n\t\t\t\t\t\t\t\t\tBase URL</label>\n\t\t\t\t\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"input_base_url\" class=\"form-control\"\n\t\t\t\t\t\t\t\t\t\tname=\"node_red_base_url\" required>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"form-group row\">\n\t\t\t\t\t\t\t\t<label for=\"api_url\"\n\t\t\t\t\t\t\t\t\tclass=\"col-md-4 col-form-label text-md-right\">API URL</label>\n\t\t\t\t\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"input_api_url\" class=\"form-control\"\n\t\t\t\t\t\t\t\t\t\tname=\"api_url\" required>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"form-group row\">\n\t\t\t\t\t\t\t\t<label for=\"client_id\"\n\t\t\t\t\t\t\t\t\tclass=\"col-md-4 col-form-label text-md-right\">App\n\t\t\t\t\t\t\t\t\tClient ID</label>\n\t\t\t\t\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"input_client_id\" class=\"form-control\"\n\t\t\t\t\t\t\t\t\t\tname=\"client_id\" required>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"form-group row\">\n\t\t\t\t\t\t\t\t<label for=\"client_secret\"\n\t\t\t\t\t\t\t\t\tclass=\"col-md-4 col-form-label text-md-right\">App\n\t\t\t\t\t\t\t\t\tClient Secret</label>\n\t\t\t\t\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"input_client_secret\"\n\t\t\t\t\t\t\t\t\t\tclass=\"form-control\" name=\"client_secret\" required>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\n\n\t\t\t\t\t\t\t<div class=\"col-md-6 offset-md-4\">\n\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\">\n\t\t\t\t\t\t\t\t\tConfigure Demo</button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t</main>\n\n</body>\n</html>\n\n",
        "output": "str",
        "x": 540,
        "y": 380,
        "wires": [
            [
                "d57768.ce38a898"
            ]
        ]
    },
    {
        "id": "d57768.ce38a898",
        "type": "http response",
        "z": "86053255.0ee62",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 380,
        "wires": []
    },
    {
        "id": "2204d6a2.16adda",
        "type": "http in",
        "z": "86053255.0ee62",
        "name": "Apply Configuration",
        "url": "/configureapply",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 1070,
        "y": 380,
        "wires": [
            [
                "f4a6b998.ebfa78"
            ]
        ]
    },
    {
        "id": "f4a6b998.ebfa78",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "SetGlobal",
        "func": "var node_red_url = msg.payload.node_red_base_url;\nvar oauth_authorize_url = msg.payload.authorize_url;\nvar oauth_token_url = msg.payload.token_url;\nvar redirect_url = msg.payload.redirect_url;\nvar client_id = msg.payload.client_id;\nvar client_secret = msg.payload.client_secret;\nvar api_url = msg.payload.api_url;\nvar globalContext = global;\nglobalContext.set(\"node_red_url\",node_red_url);\nglobalContext.set(\"api_url\",api_url);\nglobalContext.set(\"oauth_authorize_url\",oauth_authorize_url);\nglobalContext.set(\"oauth_token_url\", oauth_token_url);\nglobalContext.set(\"redirect_url\", redirect_url);\nglobalContext.set(\"client_id\", client_id);\nglobalContext.set(\"client_secret\", client_secret);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1260,
        "y": 380,
        "wires": [
            [
                "22495dae.5cd892"
            ]
        ]
    },
    {
        "id": "22495dae.5cd892",
        "type": "template",
        "z": "86053255.0ee62",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<html>\n    <body>\n        Applied configuration successfully. Please wait...\n        <script>\n              function redirect(url) {\n\t                \twindow.location = url;\n            \t}\n              setTimeout(redirect(\"{{{payload.node_red_url}}}/logindemo\"), 1000)\n        </script>\n    </body>\n</html>",
        "output": "str",
        "x": 1420,
        "y": 380,
        "wires": [
            [
                "1909d069.fc8198"
            ]
        ]
    },
    {
        "id": "1909d069.fc8198",
        "type": "http response",
        "z": "86053255.0ee62",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 1600,
        "y": 380,
        "wires": []
    },
    {
        "id": "ebe4a582.17b918",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "GetGlobal",
        "func": "msg.payload={}\nvar globalContext = global;\nmsg.payload.node_red_url = globalContext.get(\"node_red_url\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 480,
        "wires": [
            [
                "c2abadf7.c1813"
            ]
        ]
    },
    {
        "id": "85b291f2.ebd6e",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "GetGlobal",
        "func": "var globalContext = global;\nglobalContext.set(\"username\",msg.payload.username);\nglobalContext.set(\"password\",msg.payload.password);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 420,
        "y": 780,
        "wires": [
            [
                "e8c4ba95.f9eed"
            ]
        ]
    },
    {
        "id": "daea6759.6e1ba",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "GetGlobal",
        "func": "var globalContext = global;\nglobalContext.set(\"username\",msg.payload.username);\nglobalContext.set(\"password\",msg.payload.password);\nmsg.payload.redirect_uri = globalContext.get(\"redirect_url\");\nmsg.payload.client_id = globalContext.get(\"client_id\");\nmsg.payload.client_secret = globalContext.get(\"client_secret\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 480,
        "y": 1176,
        "wires": [
            [
                "ac03e779.c05748"
            ]
        ]
    },
    {
        "id": "4abdf5f1.8272cc",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "GetGlobal",
        "func": "var globalContext = global;\nmsg.payload.api_url = globalContext.get(\"api_url\");\nmsg.payload.client_id = globalContext.get(\"client_id\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 500,
        "y": 1496,
        "wires": [
            [
                "8642088d.de2468"
            ]
        ]
    },
    {
        "id": "5989fd64.304acc",
        "type": "debug",
        "z": "86053255.0ee62",
        "name": "payload",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 1540,
        "y": 680,
        "wires": []
    },
    {
        "id": "69ae09f.4833078",
        "type": "comment",
        "z": "86053255.0ee62",
        "name": "Application API",
        "info": "",
        "x": 260,
        "y": 100,
        "wires": []
    },
    {
        "id": "fbb38412.a5db3",
        "type": "comment",
        "z": "86053255.0ee62",
        "name": "Dummy Authentication Service (accepts all usernames and passwords)",
        "info": "",
        "x": 430,
        "y": 220,
        "wires": []
    },
    {
        "id": "a48c6409.be08f8",
        "type": "comment",
        "z": "86053255.0ee62",
        "name": "Client application login",
        "info": "",
        "x": 280,
        "y": 439,
        "wires": []
    },
    {
        "id": "3441881d.535e7",
        "type": "comment",
        "z": "86053255.0ee62",
        "name": "Application configuration with API Connect Authorize URL, Token URL, Client ID, Client Secret etc.",
        "info": "",
        "x": 520,
        "y": 340,
        "wires": []
    },
    {
        "id": "f7cf545c.aeccc",
        "type": "comment",
        "z": "86053255.0ee62",
        "name": "Flow to get token from API connect based on the OAuth implementation mode and scheme",
        "info": "",
        "x": 520,
        "y": 620,
        "wires": []
    },
    {
        "id": "b2e40ba0.c3def8",
        "type": "comment",
        "z": "86053255.0ee62",
        "name": "OAuth Redirect URL - configured on API Connect",
        "info": "",
        "x": 380,
        "y": 1100,
        "wires": []
    },
    {
        "id": "6b72a64d.9c979",
        "type": "comment",
        "z": "86053255.0ee62",
        "name": "Application API Menu (apis that can be invoked with the token)",
        "info": "",
        "x": 450,
        "y": 1320,
        "wires": []
    },
    {
        "id": "aadc5939.d88d8",
        "type": "comment",
        "z": "86053255.0ee62",
        "name": "Call API with Token flow",
        "info": "",
        "x": 320,
        "y": 1440,
        "wires": []
    },
    {
        "id": "6847caa2.6599ac",
        "type": "comment",
        "z": "86053255.0ee62",
        "name": "Store configuration in a global variable",
        "info": "",
        "x": 1130,
        "y": 340,
        "wires": []
    },
    {
        "id": "616dea62.210024",
        "type": "comment",
        "z": "86053255.0ee62",
        "name": "The below flow returns the CSS style sheet",
        "info": "",
        "x": 380,
        "y": 1580,
        "wires": []
    },
    {
        "id": "6887b8b4.82ca3",
        "type": "http in",
        "z": "86053255.0ee62",
        "name": "",
        "url": "style.css",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 290,
        "y": 1640,
        "wires": [
            [
                "37720d3c.ccaada"
            ]
        ]
    },
    {
        "id": "37720d3c.ccaada",
        "type": "template",
        "z": "86053255.0ee62",
        "name": "Styles",
        "field": "payload",
        "fieldType": "msg",
        "format": "css",
        "syntax": "plain",
        "template": "/* Starter CSS for Flyout Menu */\n        \nbody, html {\n  height: 100%;\n}\n.bg {\n\n  /* Full height */\n  height: 100%;\n\n  /* Center and scale the image nicely */\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n}\n\n.navbar-laravel\n{\n    box-shadow: 0 2px 4px rgba(0,0,0,.8);\n}\n\n.navbar-brand , .nav-link, .my-form, .login-form\n{\n    font-family: Raleway, sans-serif;\n}\n\n.my-form\n{\n    padding-top: 1.5rem;\n    padding-bottom: 1.5rem;\n}\n.special-card {\n  opacity: .7;\n}\n\n.transp {\n    box-shadow: 0 2px 4px rgba(0,0,0,.04);\n}\n\n.my-form .row\n{\n    margin-left: 0;\n    margin-right: 0;\n}\n\n.login-form\n{\n    padding-top: 12rem;\n    padding-bottom: 1.5rem;\n}\n\n.login-form .row\n{\n    margin-left: 0;\n    margin-right: 0;\n}\n\n#cssmenu {\n  padding: 0;\n  margin: 0;\n  border: 0;\n}\n#cssmenu ul,\nli {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n#cssmenu ul {\n  position: relative;\n  z-index: 597;\n  float: left;\n}\n#cssmenu ul li {\n  float: left;\n  min-height: 1px;\n  line-height: 1em;\n  vertical-align: middle;\n}\n#cssmenu ul li.hover,\n#cssmenu ul li:hover {\n  position: relative;\n  z-index: 599;\n  cursor: default;\n}\n#cssmenu ul ul {\n  visibility: hidden;\n  position: absolute;\n  top: 100%;\n  left: 0;\n  z-index: 598;\n  width: 100%;\n}\n#cssmenu ul ul li {\n  float: none;\n}\n#cssmenu ul li:hover > ul {\n  visibility: visible;\n}\n#cssmenu ul ul {\n  top: 0;\n  left: 100%;\n}\n#cssmenu ul li {\n  float: none;\n}\n/* Custom Stuff */\n#cssmenu span,\n#cssmenu a {\n  display: inline-block;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 12px;\n  text-decoration: none;\n}\n#cssmenu {\n  -moz-border-radius: 5px;\n  -webkit-border-radius: 5px;\n  border-radius: 5px;\n  -moz-background-clip: padding;\n  -webkit-background-clip: padding-box;\n  background-clip: padding-box;\n  -moz-box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.15);\n  -webkit-box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.15);\n  box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.15);\n  font-weight: 600;\n  width: 200px;\n}\n#cssmenu:after,\n#cssmenu ul:after {\n  content: '';\n  display: block;\n  clear: both;\n}\n#cssmenu > ul > li:first-child {\n  -moz-border-radius: 5px 5px 0 0;\n  -webkit-border-radius: 5px 5px 0 0;\n  border-radius: 5px 5px 0 0;\n  -moz-background-clip: padding;\n  -webkit-background-clip: padding-box;\n  background-clip: padding-box;\n}\n#cssmenu > ul > li:last-child {\n  -moz-border-radius: 0 0 5px 5px;\n  -webkit-border-radius: 0 0 5px 5px;\n  border-radius: 0 0 5px 5px;\n  -moz-background-clip: padding;\n  -webkit-background-clip: padding-box;\n  background-clip: padding-box;\n}\n#cssmenu > ul > li ul ul li:first-child {\n  -moz-border-radius: 0 5px 0 0;\n  -webkit-border-radius: 0 5px 0 0;\n  border-radius: 0 5px 0 0;\n  -moz-background-clip: padding;\n  -webkit-background-clip: padding-box;\n  background-clip: padding-box;\n}\n#cssmenu > ul > li ul ul li:last-child {\n  -moz-border-radius: 0 0 5px 0;\n  -webkit-border-radius: 0 0 5px 0;\n  border-radius: 0 0 5px 0;\n  -moz-background-clip: padding;\n  -webkit-background-clip: padding-box;\n  background-clip: padding-box;\n}\n#cssmenu ul,\n#cssmenu li {\n  width: 100%;\n}\n#cssmenu li {\n  background: #c0bebf url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA0CAMAAAB8fKKlAAAAmVBMVEXy7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7erx7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7ery7eoO3g4TAAAAMnRSTlP8+fbz7+vn497Z1M/KxL+5s66oopuVj4mDfHZwamRdV1FMRkA7NTArJiEcGBQQDAkGA02z+X0AAABLSURBVHheDcGDEQMBAACwvFnbtrv/cO3F949AKBJLpDK5QqlSa2hqaevo6ukbGBoZm5iamVtYWlnb2NrZOzg6Obu4url7eHp5+/wAxikFLnlTZcYAAAAASUVORK5CYII=) repeat-x;\n  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #f2edea), color-stop(1, #c0bebf));\n  background-image: -webkit-linear-gradient(top, #f2edea, #c0bebf);\n  background-image: -moz-linear-gradient(top, #f2edea, #c0bebf);\n  background-image: -ms-linear-gradient(top, #f2edea, #c0bebf);\n  background-image: -o-linear-gradient(top, #f2edea, #c0bebf);\n  background-image: linear-gradient(#f2edea, #c0bebf);\n}\n#cssmenu li:hover,\n#cssmenu li.active {\n  background: #606a76 url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA0CAMAAAB8fKKlAAAAmVBMVEVKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmJKVmL///9KVmL3Z0MtAAAAMnRSTlP8+fby7+vm4t3Y087Iw723sauln5mTjIaAeXNsZmBaVE5IQjw3MSwnIh0ZFBANCQYDAAm6nKYAAABLSURBVHheDcGDEQMBAACwvFnbtrv/cO3F949AKBJLpDK5QqlSa2hqaevo6ukbGBoZm5iamVtYWlnb2NrZOzg6Obu4url7eHp5+/wAxikFLnlTZcYAAAAASUVORK5CYII=) repeat-x;\n  -moz-box-shadow: inset 0 -2px 3px rgba(0, 0, 0, 0.15);\n  -webkit-box-shadow: inset 0 -2px 3px rgba(0, 0, 0, 0.15);\n  box-shadow: inset 0 -2px 3px rgba(0, 0, 0, 0.15);\n  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #4a5662), color-stop(1, #606a76));\n  background-image: -webkit-linear-gradient(top, #4a5662, #606a76);\n  background-image: -moz-linear-gradient(top, #4a5662, #606a76);\n  background-image: -ms-linear-gradient(top, #4a5662, #606a76);\n  background-image: -o-linear-gradient(top, #4a5662, #606a76);\n  background-image: linear-gradient(#4a5662, #606a76);\n}\n#cssmenu li:hover > a,\n#cssmenu li.active > a {\n  color: #FFF;\n}\n#cssmenu a {\n  color: #666666;\n  line-height: 160%;\n  padding: 16px 8px 16px 28px;\n  width: 164px;\n}\n#cssmenu ul ul {\n  -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);\n  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);\n  width: 200px;\n}\n#cssmenu ul ul li {\n  background: #606a76;\n  border-bottom: 1px solid #59636F;\n  -moz-box-shadow: inset 0 1px 0 #66707c;\n  -webkit-box-shadow: inset 0 1px 0 #66707c;\n  box-shadow: inset 0 1px 0 #66707c;\n}\n#cssmenu ul ul li:hover {\n  background: #4a5662;\n}\n#cssmenu ul ul li a {\n  color: #FFF;\n}\n#cssmenu ul ul a,\n#cssmenu ul ul a span {\n  font-size: 12px;\n}\n\nbody{\n    margin: 0;\n    font-size: .9rem;\n    font-weight: 400;\n    line-height: 1.6;\n    color: #212529;\n    text-align: left;\n    background-color: #f5f8fa;\n}",
        "output": "str",
        "x": 510,
        "y": 1640,
        "wires": [
            [
                "6847d363.f020e4"
            ]
        ]
    },
    {
        "id": "6847d363.f020e4",
        "type": "function",
        "z": "86053255.0ee62",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers[\"Content-Type\"]=\"text/css\";\nmsg.headers[\"Accept\"]=\"text/css\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 750,
        "y": 1640,
        "wires": [
            [
                "850f8051.cf68f8"
            ]
        ]
    },
    {
        "id": "850f8051.cf68f8",
        "type": "http response",
        "z": "86053255.0ee62",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 970,
        "y": 1640,
        "wires": []
    },
    {
        "id": "4ba1426d.e8d134",
        "type": "debug",
        "z": "86053255.0ee62",
        "name": "headers",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "headers",
        "targetType": "msg",
        "x": 1550,
        "y": 640,
        "wires": []
    },
    {
        "id": "e134601a.d99de",
        "type": "debug",
        "z": "86053255.0ee62",
        "name": "URL",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "url",
        "targetType": "msg",
        "x": 1530,
        "y": 600,
        "wires": []
    },
    {
        "id": "9c5a3818.0b87c",
        "type": "debug",
        "z": "86053255.0ee62",
        "name": "headers",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "headers",
        "targetType": "msg",
        "x": 1600,
        "y": 1080,
        "wires": []
    },
    {
        "id": "a6487561.abfbc8",
        "type": "debug",
        "z": "86053255.0ee62",
        "name": "payload",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 1580,
        "y": 1120,
        "wires": []
    },
    {
        "id": "1192238a.1806e4",
        "type": "debug",
        "z": "86053255.0ee62",
        "name": "URL",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "url",
        "targetType": "msg",
        "x": 1590,
        "y": 1020,
        "wires": []
    },
    {
        "id": "e8e3a6c2.b5475",
        "type": "function",
        "z": "15a0d5c9.3b9b92",
        "name": "Encode ReceiptHandle",
        "func": "var enc_real_timezone_minus10mins = encodeURIComponent(msg.real_timezone_minus10mins);\nmsg.payload.enc_real_timezone_minus10mins = enc_real_timezone_minus10mins;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1650,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "ef5f8a83.9c843",
        "type": "function",
        "z": "15a0d5c9.3b9b92",
        "name": "Encode ReceiptHandle",
        "func": "var enc_real_timezone = encodeURIComponent(msg.real_timezone);\nmsg.payload.enc_real_timezone = enc_real_timezone;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1650,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "d23532f1.091ef8",
        "type": "sendgrid",
        "z": "7a5c30af.ff5bc",
        "from": "marketing@expressoplus.com",
        "multiple": false,
        "to": "",
        "name": "Send Nescafe&Go email",
        "content": "html",
        "templateId": "d-e016cdfff183415e99605b221352de2a",
        "templateData": "",
        "x": 1370,
        "y": 120,
        "wires": []
    },
    {
        "id": "83e2a9df.afae8",
        "type": "inject",
        "z": "7a5c30af.ff5bc",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"previousEntity\":{\"leadId\":267058,\"contactId\":366896,\"sourceId\":\"WEB\",\"createdByUserId\":\"APE\",\"statusId\":\"CONTMA\",\"statusDetailId\":null,\"sizeId\":\"UNKNOW\",\"guttometer\":0,\"postponed\":0,\"spokeCode\":null,\"estimatedClose\":null,\"description\":\"NE Web - General enquiry\",\"responsibleUser\":null,\"marginId\":null,\"analysis1Id\":null,\"situationSummary\":null,\"sourceOther\":null,\"lastUpdatedTimestamp\":\"2021-01-11T11:27:21.53\",\"lastUpdated\":\"2021-01-11T11:27:21.53\",\"lastUpdatedByUserId\":\"APE\",\"created\":\"2020-01-13T10:40:11.138229\",\"statusFlag\":\"A\",\"sourceActivityId\":null,\"systemObjectsKey\":\"267058\",\"typeId\":null,\"salesPersonId\":null,\"statusChanged\":\"2021-01-11T11:27:21.473178\",\"lastSpoke\":null,\"problemCount\":0,\"alternateReference\":null,\"searchTerms\":null,\"searchCached\":0,\"divisionId\":243609,\"value\":4,\"addressId\":242402,\"pipelineId\":\"9309e0\",\"weightedValue\":0,\"worstValue\":0,\"likelyValue\":0,\"bestValue\":0,\"combinedEntity\":null,\"firstActiveEngagement\":null,\"lastActiveEngagement\":null,\"closeDate\":\"2021-01-05T14:19:45.905799\"},\"updatedEntity\":{\"leadId\":267058,\"contactId\":366896,\"sourceId\":\"WEB\",\"createdByUserId\":\"APE\",\"statusId\":\"QUALFA\",\"statusDetailId\":null,\"sizeId\":\"UNKNOW\",\"guttometer\":0,\"postponed\":0,\"spokeCode\":null,\"estimatedClose\":null,\"description\":\"NE Web - General enquiry\",\"responsibleUser\":null,\"marginId\":null,\"analysis1Id\":null,\"situationSummary\":null,\"sourceOther\":null,\"lastUpdatedTimestamp\":\"2021-01-11T11:27:21.53\",\"lastUpdated\":\"2021-01-11T11:27:21.53\",\"lastUpdatedByUserId\":\"APE\",\"created\":\"2020-01-13T10:40:11.138229\",\"statusFlag\":\"A\",\"sourceActivityId\":null,\"systemObjectsKey\":\"267058\",\"typeId\":null,\"salesPersonId\":null,\"statusChanged\":\"2021-01-11T11:27:52.266374Z\",\"lastSpoke\":null,\"problemCount\":0,\"alternateReference\":null,\"searchTerms\":null,\"searchCached\":0,\"divisionId\":243609,\"value\":4,\"addressId\":242402,\"pipelineId\":\"9309e0\",\"weightedValue\":0,\"worstValue\":0,\"likelyValue\":0,\"bestValue\":0,\"combinedEntity\":null,\"firstActiveEngagement\":null,\"lastActiveEngagement\":null,\"closeDate\":\"2021-01-11T11:27:52.266374Z\"},\"updatedFields\":[\"StatusId\",\"StatusChanged\",\"CloseDate\"],\"action\":\"entityUpdated\",\"happenedAtUtc\":\"2021-01-11T11:27:52.4070013Z\",\"triggeredByUser\":{\"id\":315328,\"name\":\"Alex Perjescu\",\"email\":\"alex.perjescu@expressoplus.com\",\"userCode\":\"APE\"},\"entityType\":\"Lead\",\"entityIdProperties\":[\"LeadId\"],\"entityODataLink\":\"https://api-v1.prospect365.com/Leads(LeadId=267058)\"}",
        "payloadType": "json",
        "x": 110,
        "y": 60,
        "wires": [
            [
                "c747b107.2918f"
            ]
        ]
    },
    {
        "id": "43ce5859.088188",
        "type": "function",
        "z": "7a5c30af.ff5bc",
        "name": "Build http request",
        "func": "msg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.url = \"https://api-batch-v1.prospect365.com/Contacts(\" + msg.payload.updatedEntity.contactId + \")?&$select=Email\";\nmsg.method = \"GET\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 850,
        "y": 80,
        "wires": [
            [
                "4ca8ea2d.eaeecc"
            ]
        ]
    },
    {
        "id": "4ca8ea2d.eaeecc",
        "type": "http request",
        "z": "7a5c30af.ff5bc",
        "name": "GET Contact Email",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "bearer",
        "x": 850,
        "y": 120,
        "wires": [
            [
                "fb6558e0.f8f1f"
            ]
        ]
    },
    {
        "id": "fb6558e0.f8f1f",
        "type": "change",
        "z": "7a5c30af.ff5bc",
        "name": "Set msg.payload",
        "rules": [
            {
                "t": "set",
                "p": "to",
                "pt": "msg",
                "to": "payload.value[0].Email",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "The Compact & Convenient Nescaf & Go Solution",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "parts.id",
                "pt": "msg",
                "to": "nescafe",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "parts.count",
                "pt": "msg",
                "to": "2",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "parts.index",
                "pt": "msg",
                "to": "1",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1070,
        "y": 120,
        "wires": [
            [
                "891e552f.560c28",
                "d23532f1.091ef8"
            ]
        ]
    },
    {
        "id": "9529c360.df1c98",
        "type": "http request",
        "z": "7a5c30af.ff5bc",
        "name": "GET Contact Email",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "bearer",
        "x": 1350,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "d9dd4e88.bb71e8",
        "type": "function",
        "z": "7a5c30af.ff5bc",
        "name": "Build http request",
        "func": "msg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.url = \"https://api-batch-v1.prospect365.com/Notepads\";\nmsg.method = \"POST\";\nmsg.payload = '{\"ObjectType\": \"lead\",\"ObjectId\": \"'+ msg.LeadId +'\",\"Text\": \"The Compact & Convenient Nescaf & Go Solution automated email sent\",\"DateTime\": \"'+ msg.notepadTime +'\"}'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1350,
        "y": 180,
        "wires": [
            [
                "9529c360.df1c98"
            ]
        ]
    },
    {
        "id": "fc585f6a.7469e8",
        "type": "change",
        "z": "7a5c30af.ff5bc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "LeadId",
                "pt": "msg",
                "to": "payload.updatedEntity.leadId",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "notepadTime",
                "pt": "msg",
                "to": "payload.happenedAtUtc",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "parts.id",
                "pt": "msg",
                "to": "nescafe",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "parts.count",
                "pt": "msg",
                "to": "2",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "parts.index",
                "pt": "msg",
                "to": "0",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 160,
        "wires": [
            [
                "891e552f.560c28"
            ]
        ]
    },
    {
        "id": "c70ba940.4b3348",
        "type": "debug",
        "z": "7a5c30af.ff5bc",
        "name": "URL",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "url",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1270,
        "y": 300,
        "wires": []
    },
    {
        "id": "cfdd9f9d.4605f",
        "type": "debug",
        "z": "7a5c30af.ff5bc",
        "name": "headers",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "headers",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1290,
        "y": 340,
        "wires": []
    },
    {
        "id": "ea5dfe43.08dc4",
        "type": "debug",
        "z": "7a5c30af.ff5bc",
        "name": "payload",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1280,
        "y": 380,
        "wires": []
    },
    {
        "id": "891e552f.560c28",
        "type": "join",
        "z": "7a5c30af.ff5bc",
        "name": "",
        "mode": "auto",
        "build": "array",
        "property": "",
        "propertyType": "full",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 1090,
        "y": 180,
        "wires": [
            [
                "d9dd4e88.bb71e8"
            ]
        ]
    },
    {
        "id": "21549cd4.5792a4",
        "type": "debug",
        "z": "15a0d5c9.3b9b92",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 620,
        "wires": []
    },
    {
        "id": "80294482.ce92f8",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "application",
        "func": "msg.headers = {};\nmsg.headers['Content-Type'] = 'application/x-www-form-urlencoded';\nmsg.payload = {}\nmsg.payload.client_id = '18a824e4-c6c2-47ff-af9a-da5d9a7fccaa';\nmsg.payload.client_secret = '6fIVoXCsgYDQIWNPM3L7SrjDpSRu1DBGcio5VXqdgu/2ie40QTkMMJhjEgLVUobbe6izmYlU68VFEavGSPAZdA==';\nmsg.payload.grant_type='client_credentials';\nmsg.payload.scope=\"deviceevents.read\";\nmsg.url='https://iot.franke.com/identity-server/connect/token';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 650,
        "y": 220,
        "wires": [
            [
                "af597814.e257a"
            ]
        ]
    },
    {
        "id": "af597814.e257a",
        "type": "http request",
        "z": "2adcf353.aeef9c",
        "name": "Call APIConnect Authorize",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 900,
        "y": 220,
        "wires": [
            [
                "4ba043e0.08d85c"
            ]
        ]
    },
    {
        "id": "ee93ad4d.07c45",
        "type": "inject",
        "z": "2adcf353.aeef9c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 220,
        "wires": [
            [
                "d2ef43d6.96d0c"
            ]
        ]
    },
    {
        "id": "4ba043e0.08d85c",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "SetGlobalToken",
        "func": "var franke_auth_token = msg.access_token;\nvar globalContext = global;\nglobalContext.set(\"franke_auth_token\",franke_auth_token);\nmsg.payload.franke_auth_token = franke_auth_token;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1120,
        "y": 220,
        "wires": [
            [
                "dca50ceb.c0873"
            ]
        ]
    },
    {
        "id": "44ce802a.a29c8",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "BP Garage - Deal",
        "func": "//var franke_auth_token = global.get(['franke_auth_token']);\nvar startTime = encodeURIComponent(msg.payload[0].real_timezone_minus10mins);\nvar endTime = encodeURIComponent(msg.payload[1].real_timezone);\nvar franke_auth_token = msg.payload[2].payload.access_token;\nvar installationId = \"c860637a-6791-4562-9d35-1f064c905f92\";\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Authorization'] = 'Bearer '+franke_auth_token;\nmsg.url = \"https://iot.franke.com/device-events-service/v1/events?installationId=\"+ installationId +\"&$filter=eventCode%20eq%2010000%20and%20(dateTime%20gt%20\" + startTime +\")%20and%20(dateTime%20lt%20\"+ endTime +\")\";\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 280,
        "wires": [
            [
                "884e3b0.17c53c8"
            ]
        ]
    },
    {
        "id": "884e3b0.17c53c8",
        "type": "http request",
        "z": "2adcf353.aeef9c",
        "name": "Get transactions",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 580,
        "y": 280,
        "wires": [
            [
                "9d27ce15.b557c8"
            ]
        ]
    },
    {
        "id": "961349ee.e9b98",
        "type": "moment",
        "z": "2adcf353.aeef9c",
        "name": "real_timezone",
        "topic": "",
        "input": "time",
        "inputType": "msg",
        "inTz": "Europe/London",
        "adjAmount": "0",
        "adjType": "hours",
        "adjDir": "add",
        "format": "YYYY-MM-DDTHH:mm:ssZ",
        "locale": "en-gb",
        "output": "real_timezone",
        "outputType": "msg",
        "outTz": "Europe/London",
        "x": 860,
        "y": 180,
        "wires": [
            [
                "dca50ceb.c0873"
            ]
        ]
    },
    {
        "id": "8342b4f8.f500c8",
        "type": "moment",
        "z": "2adcf353.aeef9c",
        "name": "real_timezone_minus10mins",
        "topic": "",
        "input": "time",
        "inputType": "msg",
        "inTz": "Europe/London",
        "adjAmount": "10",
        "adjType": "minutes",
        "adjDir": "subtract",
        "format": "YYYY-MM-DDTHH:mm:ssZ",
        "locale": "en-gb",
        "output": "real_timezone_minus10mins",
        "outputType": "msg",
        "outTz": "Europe/London",
        "x": 900,
        "y": 140,
        "wires": [
            [
                "dca50ceb.c0873"
            ]
        ]
    },
    {
        "id": "f571cadc.a20bd8",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "time",
                "pt": "msg",
                "to": "$now()",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 180,
        "wires": [
            [
                "8342b4f8.f500c8",
                "961349ee.e9b98"
            ]
        ]
    },
    {
        "id": "dca50ceb.c0873",
        "type": "join",
        "z": "2adcf353.aeef9c",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "",
        "propertyType": "full",
        "key": "payload",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "3",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 1270,
        "y": 220,
        "wires": [
            [
                "44ce802a.a29c8",
                "149d8b24.7e7e05",
                "7e23119c.bdb5d"
            ]
        ]
    },
    {
        "id": "7878a715.7b965",
        "type": "comment",
        "z": "2adcf353.aeef9c",
        "name": "Franke",
        "info": "",
        "x": 190,
        "y": 140,
        "wires": []
    },
    {
        "id": "149d8b24.7e7e05",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "BP Garage - Dover",
        "func": "//var franke_auth_token = global.get(['franke_auth_token']);\nvar startTime = encodeURIComponent(msg.payload[0].real_timezone_minus10mins);\nvar endTime = encodeURIComponent(msg.payload[1].real_timezone);\nvar franke_auth_token = msg.payload[2].payload.access_token;\nvar installationId = \"61b48874-4ff6-4694-8da4-d70db7bccda8\";\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Authorization'] = 'Bearer '+franke_auth_token;\nmsg.url = \"https://iot.franke.com/device-events-service/v1/events?installationId=\"+ installationId +\"&$filter=eventCode%20eq%2010000%20and%20(dateTime%20gt%20\" + startTime +\")%20and%20(dateTime%20lt%20\"+ endTime +\")\";\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 320,
        "wires": [
            [
                "610164f.5376e9c"
            ]
        ]
    },
    {
        "id": "610164f.5376e9c",
        "type": "http request",
        "z": "2adcf353.aeef9c",
        "name": "Get transactions",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 580,
        "y": 320,
        "wires": [
            [
                "abaf5d28.a6a52"
            ]
        ]
    },
    {
        "id": "7e23119c.bdb5d",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "Spar - Tattenhall",
        "func": "//var franke_auth_token = global.get(['franke_auth_token']);\nvar startTime = encodeURIComponent(msg.payload[0].real_timezone_minus10mins);\nvar endTime = encodeURIComponent(msg.payload[1].real_timezone);\nvar franke_auth_token = msg.payload[2].payload.access_token;\nvar installationId = \"377bc54b-1a00-4a00-bf4a-0013394e7eec\";\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Authorization'] = 'Bearer '+franke_auth_token;\nmsg.url = \"https://iot.franke.com/device-events-service/v1/events?installationId=\"+ installationId +\"&$filter=eventCode%20eq%2010000%20and%20(dateTime%20gt%20\" + startTime +\")%20and%20(dateTime%20lt%20\"+ endTime +\")\";\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 380,
        "y": 360,
        "wires": [
            [
                "4fb07185.3ebc58"
            ]
        ]
    },
    {
        "id": "4fb07185.3ebc58",
        "type": "http request",
        "z": "2adcf353.aeef9c",
        "name": "Get transactions",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 580,
        "y": 360,
        "wires": [
            [
                "43eb9694.303808"
            ]
        ]
    },
    {
        "id": "6444f431.fbe8e4",
        "type": "debug",
        "z": "2adcf353.aeef9c",
        "name": "payload",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1640,
        "y": 180,
        "wires": []
    },
    {
        "id": "54cd4c2c.993c14",
        "type": "debug",
        "z": "2adcf353.aeef9c",
        "name": "headers",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "headers",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1650,
        "y": 140,
        "wires": []
    },
    {
        "id": "faa891c2.4046d",
        "type": "debug",
        "z": "2adcf353.aeef9c",
        "name": "URL",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "url",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1630,
        "y": 100,
        "wires": []
    },
    {
        "id": "9d27ce15.b557c8",
        "type": "split",
        "z": "2adcf353.aeef9c",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 750,
        "y": 280,
        "wires": [
            [
                "86fe1638.56aa38"
            ]
        ]
    },
    {
        "id": "86fe1638.56aa38",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.installationId",
                "pt": "msg",
                "to": "c860637a-6791-4562-9d35-1f064c905f92",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 280,
        "wires": [
            [
                "cf6645a4.b2a388"
            ]
        ]
    },
    {
        "id": "cf6645a4.b2a388",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.measurements.durationBrewingProcess",
                "pt": "msg",
                "to": "payloadmeasurementsDurationBrewingProcess",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.durationDispense",
                "pt": "msg",
                "to": "payload.measurementsDurationDispense",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureCoffeeWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureCoffeeWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureSteam",
                "pt": "msg",
                "to": "payload.measurementsTemperatureSteam",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureHotWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureHotWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureThermoblock",
                "pt": "msg",
                "to": "payload.measurementsTemperatureThermoblock",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk1",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk1",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk2",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk2",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.totalGrindQuantity",
                "pt": "msg",
                "to": "payload.measurementsTotalGrindQuantity",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.measurements",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 280,
        "wires": [
            [
                "b8d324bd.834368",
                "34e04675.79af7a"
            ]
        ]
    },
    {
        "id": "abaf5d28.a6a52",
        "type": "split",
        "z": "2adcf353.aeef9c",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 750,
        "y": 320,
        "wires": [
            [
                "2fac7236.68eb66"
            ]
        ]
    },
    {
        "id": "2fac7236.68eb66",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.installationId",
                "pt": "msg",
                "to": "61b48874-4ff6-4694-8da4-d70db7bccda8",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 320,
        "wires": [
            [
                "c9b9caf.128ec38"
            ]
        ]
    },
    {
        "id": "c9b9caf.128ec38",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.measurements.durationBrewingProcess",
                "pt": "msg",
                "to": "payloadmeasurementsDurationBrewingProcess",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.durationDispense",
                "pt": "msg",
                "to": "payload.measurementsDurationDispense",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureCoffeeWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureCoffeeWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureSteam",
                "pt": "msg",
                "to": "payload.measurementsTemperatureSteam",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureHotWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureHotWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureThermoblock",
                "pt": "msg",
                "to": "payload.measurementsTemperatureThermoblock",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk1",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk1",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk2",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk2",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.totalGrindQuantity",
                "pt": "msg",
                "to": "payload.measurementsTotalGrindQuantity",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.measurements",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 320,
        "wires": [
            [
                "b8d324bd.834368",
                "34e04675.79af7a"
            ]
        ]
    },
    {
        "id": "b8d324bd.834368",
        "type": "bigquery insert",
        "z": "2adcf353.aeef9c",
        "bigquery": "e288eb3f.29a54",
        "dataset": "Franke",
        "table": "Lavazza",
        "name": "Write Data in BigQuery",
        "x": 1480,
        "y": 360,
        "wires": []
    },
    {
        "id": "43eb9694.303808",
        "type": "split",
        "z": "2adcf353.aeef9c",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 750,
        "y": 360,
        "wires": [
            [
                "ebbfaa80.ec7d78"
            ]
        ]
    },
    {
        "id": "ebbfaa80.ec7d78",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.installationId",
                "pt": "msg",
                "to": "377bc54b-1a00-4a00-bf4a-0013394e7eec",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 360,
        "wires": [
            [
                "60e6d4f7.a68bd4"
            ]
        ]
    },
    {
        "id": "60e6d4f7.a68bd4",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.measurements.durationBrewingProcess",
                "pt": "msg",
                "to": "payloadmeasurementsDurationBrewingProcess",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.durationDispense",
                "pt": "msg",
                "to": "payload.measurementsDurationDispense",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureCoffeeWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureCoffeeWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureSteam",
                "pt": "msg",
                "to": "payload.measurementsTemperatureSteam",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureHotWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureHotWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureThermoblock",
                "pt": "msg",
                "to": "payload.measurementsTemperatureThermoblock",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk1",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk1",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk2",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk2",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.totalGrindQuantity",
                "pt": "msg",
                "to": "payload.measurementsTotalGrindQuantity",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.measurements",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 360,
        "wires": [
            [
                "b8d324bd.834368",
                "34e04675.79af7a"
            ]
        ]
    },
    {
        "id": "34e04675.79af7a",
        "type": "debug",
        "z": "2adcf353.aeef9c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1450,
        "y": 280,
        "wires": []
    },
    {
        "id": "51b838f9.8203f8",
        "type": "inject",
        "z": "2adcf353.aeef9c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 1020,
        "wires": [
            [
                "5842c2c.7e98c3c"
            ]
        ]
    },
    {
        "id": "5842c2c.7e98c3c",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "application",
        "func": "msg.headers = {};\nmsg.headers['Content-Type'] = 'application/x-www-form-urlencoded';\nmsg.payload = {}\nmsg.payload.client_id = '18a824e4-c6c2-47ff-af9a-da5d9a7fccaa';\nmsg.payload.client_secret = '6fIVoXCsgYDQIWNPM3L7SrjDpSRu1DBGcio5VXqdgu/2ie40QTkMMJhjEgLVUobbe6izmYlU68VFEavGSPAZdA==';\nmsg.payload.grant_type='client_credentials';\nmsg.payload.scope=\"deviceevents.read\";\nmsg.url='https://iot.franke.com/identity-server/connect/token';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 310,
        "y": 1020,
        "wires": [
            [
                "6ffd477b.65295"
            ]
        ]
    },
    {
        "id": "6ffd477b.65295",
        "type": "http request",
        "z": "2adcf353.aeef9c",
        "name": "Call APIConnect Authorize",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 520,
        "y": 1020,
        "wires": [
            [
                "448053f1.c2ff84"
            ]
        ]
    },
    {
        "id": "72b77c78.ebb6c4",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "BP Garage - Deal",
        "func": "//var franke_auth_token = global.get(['franke_auth_token']);\nvar franke_auth_token = msg.payload.access_token;\nvar installationId = \"c860637a-6791-4562-9d35-1f064c905f92\";\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Authorization'] = 'Bearer '+franke_auth_token;\nmsg.url = \"https://iot.franke.com/device-events-service/v1/events?installationId=\"+ installationId +\"&$filter=eventCode%20eq%2010000%20and%20(dateTime%20gt%202021-01-15T00%3A00%3A00%2B02%3A00)%20and%20(dateTime%20lt%202021-01-15T23%3A59%3A59%2B02%3A00)\";\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 770,
        "y": 1020,
        "wires": [
            [
                "1b148004.b81"
            ]
        ]
    },
    {
        "id": "448053f1.c2ff84",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "BP Garage - Dover",
        "func": "//var franke_auth_token = global.get(['franke_auth_token']);\nvar franke_auth_token = msg.payload.access_token;\nvar installationId = \"61b48874-4ff6-4694-8da4-d70db7bccda8\";\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Authorization'] = 'Bearer '+franke_auth_token;\nmsg.url = \"https://iot.franke.com/device-events-service/v1/events?installationId=\"+ installationId +\"&$filter=eventCode%20eq%2010000%20and%20(dateTime%20gt%202021-01-15T00%3A00%3A00%2B02%3A00)%20and%20(dateTime%20lt%202021-01-15T23%3A59%3A59%2B02%3A00)\";\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 770,
        "y": 1060,
        "wires": [
            [
                "1bf590d1.a2fe1f"
            ]
        ]
    },
    {
        "id": "1de88cb0.0d3eab",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "Spar - Tattenhall",
        "func": "//var franke_auth_token = global.get(['franke_auth_token']);\nvar franke_auth_token = msg.payload.access_token;\nvar installationId = \"377bc54b-1a00-4a00-bf4a-0013394e7eec\";\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Authorization'] = 'Bearer '+franke_auth_token;\nmsg.url = \"https://iot.franke.com/device-events-service/v1/events?installationId=\"+ installationId +\"&$filter=eventCode%20eq%2010000%20and%20(dateTime%20gt%202021-01-11T00%3A00%3A00%2B02%3A00)%20and%20(dateTime%20lt%202021-01-12T23%3A59%3A59%2B02%3A00)\";\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 760,
        "y": 1100,
        "wires": [
            [
                "d11666df.dab2f8"
            ]
        ]
    },
    {
        "id": "d11666df.dab2f8",
        "type": "http request",
        "z": "2adcf353.aeef9c",
        "name": "Get transactions",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 960,
        "y": 1100,
        "wires": [
            [
                "5577b2b6.9ad2dc"
            ]
        ]
    },
    {
        "id": "1bf590d1.a2fe1f",
        "type": "http request",
        "z": "2adcf353.aeef9c",
        "name": "Get transactions",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 960,
        "y": 1060,
        "wires": [
            [
                "bc29174f.ee3fa"
            ]
        ]
    },
    {
        "id": "1b148004.b81",
        "type": "http request",
        "z": "2adcf353.aeef9c",
        "name": "Get transactions",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 960,
        "y": 1020,
        "wires": [
            [
                "d6eb1121.73e51"
            ]
        ]
    },
    {
        "id": "d6eb1121.73e51",
        "type": "split",
        "z": "2adcf353.aeef9c",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1110,
        "y": 1020,
        "wires": [
            [
                "a8ae3d59.dfa888"
            ]
        ]
    },
    {
        "id": "bc29174f.ee3fa",
        "type": "split",
        "z": "2adcf353.aeef9c",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1110,
        "y": 1060,
        "wires": [
            [
                "ff14a6a4.cbf1"
            ]
        ]
    },
    {
        "id": "5577b2b6.9ad2dc",
        "type": "split",
        "z": "2adcf353.aeef9c",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1110,
        "y": 1100,
        "wires": [
            [
                "2f50f64f.c6b4f2"
            ]
        ]
    },
    {
        "id": "2f50f64f.c6b4f2",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.installationId",
                "pt": "msg",
                "to": "377bc54b-1a00-4a00-bf4a-0013394e7eec",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 1100,
        "wires": [
            [
                "f144928f.ef7c28"
            ]
        ]
    },
    {
        "id": "ff14a6a4.cbf1",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.installationId",
                "pt": "msg",
                "to": "61b48874-4ff6-4694-8da4-d70db7bccda8",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 1060,
        "wires": [
            [
                "5c0d36f2.ec8cd8"
            ]
        ]
    },
    {
        "id": "a8ae3d59.dfa888",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.installationId",
                "pt": "msg",
                "to": "c860637a-6791-4562-9d35-1f064c905f92",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 1020,
        "wires": [
            [
                "d48b60b0.b68b2"
            ]
        ]
    },
    {
        "id": "d48b60b0.b68b2",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.measurements.durationBrewingProcess",
                "pt": "msg",
                "to": "payloadmeasurementsDurationBrewingProcess",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.durationDispense",
                "pt": "msg",
                "to": "payload.measurementsDurationDispense",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureCoffeeWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureCoffeeWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureSteam",
                "pt": "msg",
                "to": "payload.measurementsTemperatureSteam",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureHotWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureHotWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureThermoblock",
                "pt": "msg",
                "to": "payload.measurementsTemperatureThermoblock",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk1",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk1",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk2",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk2",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.totalGrindQuantity",
                "pt": "msg",
                "to": "payload.measurementsTotalGrindQuantity",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.measurements",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1540,
        "y": 1020,
        "wires": [
            [
                "1de0a7dd.b762d"
            ]
        ]
    },
    {
        "id": "5c0d36f2.ec8cd8",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.measurements.durationBrewingProcess",
                "pt": "msg",
                "to": "payloadmeasurementsDurationBrewingProcess",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.durationDispense",
                "pt": "msg",
                "to": "payload.measurementsDurationDispense",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureCoffeeWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureCoffeeWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureSteam",
                "pt": "msg",
                "to": "payload.measurementsTemperatureSteam",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureHotWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureHotWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureThermoblock",
                "pt": "msg",
                "to": "payload.measurementsTemperatureThermoblock",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk1",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk1",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk2",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk2",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.totalGrindQuantity",
                "pt": "msg",
                "to": "payload.measurementsTotalGrindQuantity",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.measurements",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1540,
        "y": 1060,
        "wires": [
            [
                "1de0a7dd.b762d"
            ]
        ]
    },
    {
        "id": "f144928f.ef7c28",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.measurements.durationBrewingProcess",
                "pt": "msg",
                "to": "payloadmeasurementsDurationBrewingProcess",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.durationDispense",
                "pt": "msg",
                "to": "payload.measurementsDurationDispense",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureCoffeeWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureCoffeeWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureSteam",
                "pt": "msg",
                "to": "payload.measurementsTemperatureSteam",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureHotWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureHotWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureThermoblock",
                "pt": "msg",
                "to": "payload.measurementsTemperatureThermoblock",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk1",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk1",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk2",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk2",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.totalGrindQuantity",
                "pt": "msg",
                "to": "payload.measurementsTotalGrindQuantity",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.measurements",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1540,
        "y": 1100,
        "wires": [
            [
                "1de0a7dd.b762d",
                "f2fa5aeb.2fdb18"
            ]
        ]
    },
    {
        "id": "1de0a7dd.b762d",
        "type": "bigquery insert",
        "z": "2adcf353.aeef9c",
        "bigquery": "e288eb3f.29a54",
        "dataset": "Franke",
        "table": "Lavazza",
        "name": "Write Data in BigQuery",
        "x": 1780,
        "y": 1060,
        "wires": []
    },
    {
        "id": "f2fa5aeb.2fdb18",
        "type": "debug",
        "z": "2adcf353.aeef9c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1770,
        "y": 980,
        "wires": []
    },
    {
        "id": "d2ef43d6.96d0c",
        "type": "trigger",
        "z": "2adcf353.aeef9c",
        "name": "",
        "op1": "",
        "op2": "0",
        "op1type": "pay",
        "op2type": "str",
        "duration": "-10",
        "extend": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 390,
        "y": 220,
        "wires": [
            [
                "80294482.ce92f8",
                "f571cadc.a20bd8"
            ]
        ]
    },
    {
        "id": "ac41547c.c8fbf",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "application",
        "func": "msg.headers = {};\nmsg.headers['Content-Type'] = 'application/x-www-form-urlencoded';\nmsg.payload = {}\nmsg.payload.client_id = '18a824e4-c6c2-47ff-af9a-da5d9a7fccaa';\nmsg.payload.client_secret = '6fIVoXCsgYDQIWNPM3L7SrjDpSRu1DBGcio5VXqdgu/2ie40QTkMMJhjEgLVUobbe6izmYlU68VFEavGSPAZdA==';\nmsg.payload.grant_type='client_credentials';\nmsg.payload.scope=\"deviceevents.read\";\nmsg.url='https://iot.franke.com/identity-server/connect/token';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 650,
        "y": 520,
        "wires": [
            [
                "e53a0bb8.59ee88"
            ]
        ]
    },
    {
        "id": "e53a0bb8.59ee88",
        "type": "http request",
        "z": "2adcf353.aeef9c",
        "name": "Call APIConnect Authorize",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 900,
        "y": 520,
        "wires": [
            [
                "a93ed0e4.bd6ea8"
            ]
        ]
    },
    {
        "id": "792c332c.aba72c",
        "type": "inject",
        "z": "2adcf353.aeef9c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 520,
        "wires": [
            [
                "e3f58775.02cf9"
            ]
        ]
    },
    {
        "id": "a93ed0e4.bd6ea8",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "SetGlobalToken",
        "func": "var franke_auth_token = msg.access_token;\nvar globalContext = global;\nglobalContext.set(\"franke_auth_token\",franke_auth_token);\nmsg.payload.franke_auth_token = franke_auth_token;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1120,
        "y": 520,
        "wires": [
            [
                "27b4aa8d.d829b6"
            ]
        ]
    },
    {
        "id": "bd52f383.7dfdf8",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "BP Garage - Deal",
        "func": "//var franke_auth_token = global.get(['franke_auth_token']);\nvar startTime = encodeURIComponent(msg.payload[0].real_timezone_minus10mins);\nvar endTime = encodeURIComponent(msg.payload[1].real_timezone);\nvar franke_auth_token = msg.payload[2].payload.access_token;\nvar installationId = \"c860637a-6791-4562-9d35-1f064c905f92\";\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Authorization'] = 'Bearer '+franke_auth_token;\nmsg.url = \"https://iot.franke.com/device-events-service/v1/events?installationId=\"+ installationId +\"&$filter=eventCode%20eq%2010000%20and%20(dateTime%20gt%20\" + startTime +\")%20and%20(dateTime%20lt%20\"+ endTime +\")\";\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 580,
        "wires": [
            [
                "24ad7efd.48a5ea"
            ]
        ]
    },
    {
        "id": "24ad7efd.48a5ea",
        "type": "http request",
        "z": "2adcf353.aeef9c",
        "name": "Get transactions",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 580,
        "y": 580,
        "wires": [
            [
                "768de307.d99da4"
            ]
        ]
    },
    {
        "id": "27b4aa8d.d829b6",
        "type": "join",
        "z": "2adcf353.aeef9c",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "",
        "propertyType": "full",
        "key": "payload",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "3",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 1270,
        "y": 520,
        "wires": [
            [
                "bd52f383.7dfdf8",
                "8568be3e.3a9528",
                "2d13ef84.52ed78"
            ]
        ]
    },
    {
        "id": "8568be3e.3a9528",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "BP Garage - Dover",
        "func": "//var franke_auth_token = global.get(['franke_auth_token']);\nvar startTime = encodeURIComponent(msg.payload[0].real_timezone_minus10mins);\nvar endTime = encodeURIComponent(msg.payload[1].real_timezone);\nvar franke_auth_token = msg.payload[2].payload.access_token;\nvar installationId = \"61b48874-4ff6-4694-8da4-d70db7bccda8\";\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Authorization'] = 'Bearer '+franke_auth_token;\nmsg.url = \"https://iot.franke.com/device-events-service/v1/events?installationId=\"+ installationId +\"&$filter=eventCode%20eq%2010000%20and%20(dateTime%20gt%20\" + startTime +\")%20and%20(dateTime%20lt%20\"+ endTime +\")\";\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 620,
        "wires": [
            [
                "13302e26.fe760a"
            ]
        ]
    },
    {
        "id": "13302e26.fe760a",
        "type": "http request",
        "z": "2adcf353.aeef9c",
        "name": "Get transactions",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 580,
        "y": 620,
        "wires": [
            [
                "7dfce233.601564"
            ]
        ]
    },
    {
        "id": "2d13ef84.52ed78",
        "type": "function",
        "z": "2adcf353.aeef9c",
        "name": "Spar - Tattenhall",
        "func": "//var franke_auth_token = global.get(['franke_auth_token']);\nvar startTime = encodeURIComponent(msg.payload[0].real_timezone_minus10mins);\nvar endTime = encodeURIComponent(msg.payload[1].real_timezone);\nvar franke_auth_token = msg.payload[2].payload.access_token;\nvar installationId = \"377bc54b-1a00-4a00-bf4a-0013394e7eec\";\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Authorization'] = 'Bearer '+franke_auth_token;\nmsg.url = \"https://iot.franke.com/device-events-service/v1/events?installationId=\"+ installationId +\"&$filter=eventCode%20eq%2010000%20and%20(dateTime%20gt%20\" + startTime +\")%20and%20(dateTime%20lt%20\"+ endTime +\")\";\nmsg.method = 'GET';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 380,
        "y": 660,
        "wires": [
            [
                "6600f323.14e914"
            ]
        ]
    },
    {
        "id": "6600f323.14e914",
        "type": "http request",
        "z": "2adcf353.aeef9c",
        "name": "Get transactions",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 580,
        "y": 660,
        "wires": [
            [
                "832d530e.20d05"
            ]
        ]
    },
    {
        "id": "768de307.d99da4",
        "type": "split",
        "z": "2adcf353.aeef9c",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 750,
        "y": 580,
        "wires": [
            [
                "7fe55cf8.e0d894"
            ]
        ]
    },
    {
        "id": "7fe55cf8.e0d894",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.installationId",
                "pt": "msg",
                "to": "c860637a-6791-4562-9d35-1f064c905f92",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 580,
        "wires": [
            [
                "831626a4.6a28d8"
            ]
        ]
    },
    {
        "id": "831626a4.6a28d8",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.measurements.durationBrewingProcess",
                "pt": "msg",
                "to": "payloadmeasurementsDurationBrewingProcess",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.durationDispense",
                "pt": "msg",
                "to": "payload.measurementsDurationDispense",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureCoffeeWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureCoffeeWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureSteam",
                "pt": "msg",
                "to": "payload.measurementsTemperatureSteam",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureHotWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureHotWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureThermoblock",
                "pt": "msg",
                "to": "payload.measurementsTemperatureThermoblock",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk1",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk1",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk2",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk2",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.totalGrindQuantity",
                "pt": "msg",
                "to": "payload.measurementsTotalGrindQuantity",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.measurements",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 580,
        "wires": [
            [
                "3c3aa8d2.cf333",
                "92e84161.edafd8"
            ]
        ]
    },
    {
        "id": "7dfce233.601564",
        "type": "split",
        "z": "2adcf353.aeef9c",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 750,
        "y": 620,
        "wires": [
            [
                "a9f737a6.0bf47"
            ]
        ]
    },
    {
        "id": "a9f737a6.0bf47",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.installationId",
                "pt": "msg",
                "to": "61b48874-4ff6-4694-8da4-d70db7bccda8",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 620,
        "wires": [
            [
                "3181fb0a.d0315c"
            ]
        ]
    },
    {
        "id": "3181fb0a.d0315c",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.measurements.durationBrewingProcess",
                "pt": "msg",
                "to": "payloadmeasurementsDurationBrewingProcess",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.durationDispense",
                "pt": "msg",
                "to": "payload.measurementsDurationDispense",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureCoffeeWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureCoffeeWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureSteam",
                "pt": "msg",
                "to": "payload.measurementsTemperatureSteam",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureHotWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureHotWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureThermoblock",
                "pt": "msg",
                "to": "payload.measurementsTemperatureThermoblock",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk1",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk1",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk2",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk2",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.totalGrindQuantity",
                "pt": "msg",
                "to": "payload.measurementsTotalGrindQuantity",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.measurements",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 620,
        "wires": [
            [
                "3c3aa8d2.cf333",
                "92e84161.edafd8"
            ]
        ]
    },
    {
        "id": "3c3aa8d2.cf333",
        "type": "bigquery insert",
        "z": "2adcf353.aeef9c",
        "bigquery": "e288eb3f.29a54",
        "dataset": "Franke",
        "table": "Lavazza",
        "name": "Write Data in BigQuery",
        "x": 1480,
        "y": 660,
        "wires": []
    },
    {
        "id": "832d530e.20d05",
        "type": "split",
        "z": "2adcf353.aeef9c",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 750,
        "y": 660,
        "wires": [
            [
                "da9afce5.7a297"
            ]
        ]
    },
    {
        "id": "da9afce5.7a297",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.installationId",
                "pt": "msg",
                "to": "377bc54b-1a00-4a00-bf4a-0013394e7eec",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 660,
        "wires": [
            [
                "e141635c.d76548"
            ]
        ]
    },
    {
        "id": "e141635c.d76548",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.measurements.durationBrewingProcess",
                "pt": "msg",
                "to": "payloadmeasurementsDurationBrewingProcess",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.durationDispense",
                "pt": "msg",
                "to": "payload.measurementsDurationDispense",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureCoffeeWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureCoffeeWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureSteam",
                "pt": "msg",
                "to": "payload.measurementsTemperatureSteam",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureHotWater",
                "pt": "msg",
                "to": "payload.measurementsTemperatureHotWater",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureThermoblock",
                "pt": "msg",
                "to": "payload.measurementsTemperatureThermoblock",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk1",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk1",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.temperatureMilk2",
                "pt": "msg",
                "to": "payload.measurementsTemperatureMilk2",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.measurements.totalGrindQuantity",
                "pt": "msg",
                "to": "payload.measurementsTotalGrindQuantity",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload.measurements",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 660,
        "wires": [
            [
                "3c3aa8d2.cf333",
                "92e84161.edafd8"
            ]
        ]
    },
    {
        "id": "92e84161.edafd8",
        "type": "debug",
        "z": "2adcf353.aeef9c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1450,
        "y": 580,
        "wires": []
    },
    {
        "id": "e3f58775.02cf9",
        "type": "trigger",
        "z": "2adcf353.aeef9c",
        "name": "",
        "op1": "",
        "op2": "0",
        "op1type": "pay",
        "op2type": "str",
        "duration": "-24",
        "extend": false,
        "units": "hr",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 390,
        "y": 520,
        "wires": [
            [
                "ac41547c.c8fbf",
                "81aa3f11.2a44a"
            ]
        ]
    },
    {
        "id": "a11fc54c.b797",
        "type": "moment",
        "z": "2adcf353.aeef9c",
        "name": "real_timezone",
        "topic": "",
        "input": "time",
        "inputType": "msg",
        "inTz": "Europe/London",
        "adjAmount": "0",
        "adjType": "hours",
        "adjDir": "add",
        "format": "YYYY-MM-DDTHH:mm:ssZ",
        "locale": "en-gb",
        "output": "real_timezone",
        "outputType": "msg",
        "outTz": "Europe/London",
        "x": 860,
        "y": 480,
        "wires": [
            [
                "27b4aa8d.d829b6"
            ]
        ]
    },
    {
        "id": "81aa3f11.2a44a",
        "type": "change",
        "z": "2adcf353.aeef9c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "time",
                "pt": "msg",
                "to": "$now()",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 480,
        "wires": [
            [
                "446b5afb.d82934",
                "a11fc54c.b797"
            ]
        ]
    },
    {
        "id": "446b5afb.d82934",
        "type": "moment",
        "z": "2adcf353.aeef9c",
        "name": "real_timezone_minus24hours",
        "topic": "",
        "input": "time",
        "inputType": "msg",
        "inTz": "Europe/London",
        "adjAmount": "24",
        "adjType": "hours",
        "adjDir": "subtract",
        "format": "YYYY-MM-DDTHH:mm:ssZ",
        "locale": "en-gb",
        "output": "real_timezone_minus10mins",
        "outputType": "msg",
        "outTz": "Europe/London",
        "x": 900,
        "y": 440,
        "wires": [
            [
                "27b4aa8d.d829b6"
            ]
        ]
    },
    {
        "id": "a276539f.973778",
        "type": "debug",
        "z": "15a0d5c9.3b9b92",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 500,
        "wires": []
    },
    {
        "id": "4e9b018d.a76058",
        "type": "function",
        "z": "81053105.60e14",
        "name": "Build http request",
        "func": "var machineType = msg.payload[1].machineType[0].responses.selected[0].label;\nvar machineCleanliness = msg.payload[1].machineCleanliness[0].responses.selected[0].label;\nvar posCondition = msg.payload[1].posCondition[0].responses.selected[0].label;\nvar signoffSheets = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar trainingRequired = msg.payload[1].trainingRequired[0].responses.selected[0].label;\nvar operatingManual = msg.payload[1].operatingManual[0].responses.selected[0].label;\nvar author = msg.payload[1].audit_data.authorship.owner;\nvar siteName = msg.payload[1].audit_data.site.name;\nvar site = siteName;\nvar reportWebLink = msg.payload[0].url;\nvar visitScore = msg.payload[1].audit_data.score_percentage.toString().slice(0, 5);\nvar serialNo = msg.payload[1].serialNo[0].responses.text;\nvar date_completed = msg.payload[1].audit_data.date_completed;\nvar dateCompleted = msg.payload[1].audit_data.date_completed.toString().slice(0, 10);\nvar timeCompleted = msg.payload[1].audit_data.date_completed.toString().slice(11, 19);\nvar rawFeedback = msg.payload[1].feedback[0].responses.text;\nvar visitStatus = msg.payload[1].visitStatus;\nvar storeNumber = msg.payload[1].storeNumber[0].responses.text;\nvar score = msg.payload[1].audit_data.score;\nvar maxScore = msg.payload[1].audit_data.total_score;\nvar feedback = rawFeedback.toString().replace(/(\\r\\n|\\n|\\r|[\"'])/gm, \" \");\nvar toEmail = \"epteam@expressoplus.com\";\nvar toName = \"eP team\";\nmsg.headers = {};\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.headers[\"accept\"] = \"application/json\";\nmsg.headers[\"Authorization\"] = \"Bearer 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\";\nmsg.url = \"https://api.sendgrid.com/v3/mail/send\";\nmsg.method = \"POST\";\nmsg.payload= '{ \"personalizations\": [ { \"to\": [ { \"email\": \"'+ toEmail +'\", \"name\": \"'+ toName +'\" } ], \"dynamic_template_data\": { \"site\": \"' + site + '\", \"machineType\": \"' + machineType + '\", \"visitScore\": \"' + visitScore + '\", \"posCondition\": \"' + posCondition +'\", \"machineCleanliness\": \"'+ machineCleanliness +'\", \"operatingManual\": \"' + operatingManual + '\", \"signoffSheets\": \"' + signoffSheets + '\", \"trainingRequired\": \"' + trainingRequired + '\", \"author\": \"' + author +'\", \"reportWebLink\": \"' + reportWebLink + '\", \"serialNo\": \"' + serialNo + '\", \"date_completed\": \"'+ dateCompleted +'\", \"time_completed\": \"'+ timeCompleted +'\", \"feedback\": \"'+ feedback +'\", \"visitStatus\": \"'+ visitStatus +'\", \"storeNumber\": \"'+ storeNumber +'\", \"score\": \"'+ score +'\", \"maxScore\": \"'+ maxScore +'\" }, \"subject\": \"'+ storeNumber +' '+ site +' | '+ visitStatus +' '+ visitScore +'%\" } ], \"from\": { \"email\": \"robot@expressoplus.com\", \"name\": \"eP Robot\" }, \"template_id\": \"d-bdf56e3665184f17ab53a512062ac3dc\" }';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 810,
        "y": 320,
        "wires": [
            [
                "4252e895.743f1",
                "8dcf0ea.7d6d3f"
            ]
        ],
        "info": "curl --request POST \\\n  --url https://api.sendinblue.com/v3/smtp/email \\\n  --header 'accept: application/json' \\\n  --header 'content-type: application/json' \\\n  --data '{\"sender\":{\"name\":\"eP Robot\",\"email\":\"robot@expressoplus.com\"},\"to\":[{\"email\":\"Alex\",\"name\":\"alex.perjescu@expressoplus.com\"}],\"replyTo\":{\"email\":\"transactional@expressoplus.com\"},\"attachment\":[{\"url\":\"http://urlofattacment.com\"}],\"textContent\":\"this is the body of the email\",\"subject\":\"this is the subject line\"}'\nreturn msg;"
    },
    {
        "id": "4252e895.743f1",
        "type": "http request",
        "z": "81053105.60e14",
        "name": "Send email via Sendgrid",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 810,
        "y": 360,
        "wires": [
            [
                "3cdf43b6.b6936c"
            ]
        ],
        "icon": "font-awesome/fa-envelope-o"
    },
    {
        "id": "8dcf0ea.7d6d3f",
        "type": "debug",
        "z": "81053105.60e14",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1030,
        "y": 320,
        "wires": []
    },
    {
        "id": "3cdf43b6.b6936c",
        "type": "debug",
        "z": "81053105.60e14",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1030,
        "y": 360,
        "wires": []
    }
]